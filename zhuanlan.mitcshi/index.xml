<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
<title>川流不息</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/</link>
<description>北京量信投资管理有限公司是一家在中国基金业协会备案登记的专业私募基金管理人。本专栏作者石川是量信投资的联合创始人。希望通过这个平台和各位小伙伴分享我们在量化投资领域的知识和心得，共同促进量化投资在中国的发展。</description>
<language>zh-cn</language>
<lastBuildDate>Wed, 27 Jun 2018 01:42:08 +0800</lastBuildDate>
<item>
<title>朴素贝叶斯分类器</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-26-38533349.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38533349&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f3dfbbfbdc4d44d8ea1d288e3137e0ce_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 引言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;有监督分类是量化投资中常见的情景之一。比如，我们希望根据上市公司财报中的各种指标特征，区分出优秀的和差劲的股票，这就是一个分类问题。在机器学习中，有监督分类的算法有很多，比如 SVM、ANN 以及基于决策树的 AdaBoost 和随机森林等。这其中自然也少不了今天的主角&lt;b&gt;朴素贝叶斯分类器（Naïve Bayes classifiers）&lt;/b&gt;。它代表着&lt;b&gt;一类&lt;/b&gt;应用&lt;b&gt;贝叶斯定理&lt;/b&gt;的分类器的总称。朴素（naive）在这里有着特殊的含义、代表着一个非常强的假设（下文会解释）。&lt;/p&gt;&lt;p&gt;朴素贝叶斯分类器虽然简单，但是用处非常广泛（尤其是在文本分类方面）。在 IEEE 协会于 2006 年列出的十大数据挖掘算法中，朴素贝叶斯分类器赫然在列（Wu et al. 2008）。捎带一提，另外九个算法是 C4.5、k-Means、SVM、Apriori、EM、PageRank、AdaBoost、kNN 和 CART（那时候深度学习还没有什么发展）。&lt;/p&gt;&lt;p&gt;朴素贝叶斯分类器以贝叶斯定理为基础。下面首先回顾一下贝叶斯定理（熟悉的朋友可以跳过第 2 节）。之后会阐释“朴素”的意义并介绍朴素贝叶斯分类器。文章的最后使用一个例子说明如何使用朴素贝叶斯分类器选股。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 贝叶斯定理&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;贝叶斯定理的推导始于条件概率。&lt;b&gt;条件概率可以定义为：在事件 B 发生的前提下，事件 A 发生的概率。&lt;/b&gt;数学上用 P(A|B) 来表示该条件概率。条件概率 P(A|B) 的数学定义为：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A|B)=\frac{P(A\bigcap B)}{P(B)}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;这个公式的白话解释为：&lt;b&gt;“当 B 发生前提下 A 发生的概率”等于“A 和 B 同时发生的概率”除以“B 发生的概率”。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;生活中条件概率屡见不鲜。比如“在没有赶上 8 点这趟地铁的前提下，上班迟到的概率是多少？”应用条件概率的定义可知“在没有赶上 8 点这趟地铁的前提下，上班迟到的&lt;b&gt;条件&lt;/b&gt;概率”等于“没赶上 8 点这趟地铁且上班迟到的概率”除以“没赶上 8 点这趟地铁的概率”。将上式左右两边同时乘以 P(B) 得到：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(B)P(A|B)=P(A\bigcap B)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;类似的，我们也可以求出 P(B|A)，即在 A 发生的前提下，B 发生的概率是多少。在上面例子中，这对应着“在上班迟到的前提下，没有赶上 8 点这趟地铁的概率是多少”？（上班迟到的原因可能很多，比如没赶上这趟地铁是一个，又比如在公司楼下的咖啡馆里耽搁了 10 分钟也是一个，或者因为早上发烧先去医院了等等。）根据定义：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(B|A)=\frac{P(B\bigcap A)}{P(A)}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;同样，两边同时乘以 P(A) ，并且由 P(A∩B) = P(B∩A)，得到：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A)P(B|A)=P(A\bigcap B)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;由此可知 P(B)P(A|B) = P(A)P(B|A)。这个结果也可以写作如下形式，即大名鼎鼎的&lt;b&gt;贝叶斯定理（Bayes rule）&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A|B)=\frac{P(A)P(B|A)}{P(B)}&lt;/equation&gt; &lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 何为“朴素”？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;下面我们将贝叶斯定理应用于有监督的分类场景。令 &lt;b&gt;X&lt;/b&gt; 代表一个 n 维特征向量（它代表着一组特征，即 features），这些特征用来描述一个对象；C 代表该对象所属的类别。分类的目的是找到 &lt;b&gt;X&lt;/b&gt;和 C 之间的映射关系，从而计算出 P(C|&lt;b&gt;X&lt;/b&gt;)，即当待分类的对象具备 &lt;b&gt;X&lt;/b&gt; 这些特征时，它属于 C 类的条件概率。&lt;/p&gt;&lt;p&gt;具体的，假设类别的个数为 K（即 C 的取值有 K 个），那么对于每一个可能的取值（记为 c_k，k = 1, 2, …, K），我们需要根据给定的特征 &lt;b&gt;X&lt;/b&gt; 计算出概率 P(C=c_k|&lt;b&gt;X&lt;/b&gt;)。然后，&lt;b&gt;只要从所有的&lt;/b&gt;P(c_k|&lt;b&gt;X&lt;/b&gt;) &lt;b&gt;中挑出取值最大的概率对应的&lt;/b&gt; c_k &lt;b&gt;作为最有可能的分类即可。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;利用贝叶斯定理，P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 可以写作：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(C=c_k|\mathbf{X})=\frac{P(\mathbf{X}|C=c_k)P(C=c_k)}{P(\mathbf{X})}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;由于对有所的 P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 来说，上式右侧的分母都相同（和 C 的取值无关），因此我们只需要根据训练集数据来估计所有的 P(&lt;b&gt;X&lt;/b&gt;|C=c_k) 以及所有的 P(C=c_k) 即可。下面来看看为了实现这个目标，需要多大的样本空间。&lt;/p&gt;&lt;p&gt;考虑最简单的情况。假设 n 维向量 &lt;b&gt;X&lt;/b&gt; 中的每一个特征以及类别 C 都是二元的（binary）。因此，特征向量 &lt;b&gt;X&lt;/b&gt; = {X_1, X_2, …, X_n} 所有可能的取值为 2^n 个（因为每个 X_i 的取值有 2 个，而一共有 n 个 X_i）。此外，C 的取值也是 2 个。因此，仅从 P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 来说，需要估计的参数就高达 2×(2^n - 1) 个。而这仅仅是从特征空间所有取值组合可能性出发的最低要求。事实上，为了得到准确的参数估计，对于每一个 n 维特征的组合，我们都需要多个观测值来计算 P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 的概率。这进一步增加了对样本空间大小的要求。举例来说，如果特征空间的维度 n = 30，那么我们需要估计超过 30 亿个参数！&lt;/p&gt;&lt;p&gt;在现实的应用场景中，n = 30 是否常见？非常常见。比如上市公司的特征就可以轻松超过 30 个。而在现实的应用场景中，我们拥有超过 30 亿个样本来估计 30 亿个参数是否常见？痴人说梦。因此，&lt;b&gt;想利用有限的样本数据估计出所有的&lt;/b&gt; P(&lt;b&gt;X&lt;/b&gt;|C=c_k) &lt;b&gt;和&lt;/b&gt; P(C=c_k) &lt;b&gt;是不切实际的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;为什么有这么多参数需要估计呢？这是因为在求解 P(&lt;b&gt;X&lt;/b&gt;|C=c_k) 时，我们考虑的是 &lt;b&gt;X&lt;/b&gt; = (x_1, x_2, …, x_n) 在 C = c_k 这个条件下的&lt;b&gt;条件联合分布&lt;/b&gt;，这大大增加了待估计的参数的个数。为了解决这个问题，“朴素”闪亮登场。&lt;/p&gt;&lt;p&gt;朴素贝叶斯在求解 P(&lt;b&gt;X&lt;/b&gt;|C=c_k) 时做了一个非常强的假设 —— &lt;b&gt;条件独立性（conditional independence）&lt;/b&gt;。&lt;b&gt;它的意思是在给定的类别&lt;/b&gt; C = c_k &lt;b&gt;下，不同维度特征的取值之间是相互独立的。&lt;/b&gt;比如令 X_1 和 X_2 代表 n 维里面的两个维度，则 P(X_1=x_1|C=c_k) 的概率与 X_2 的取值无关，即：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(X_1=x_1|C=c_k)=P(X_1=x_1|X_2=x_2,C=c_k)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;举个例子，下雨、打雷和闪电是三种天气。我们可以假设在闪电发生的条件下，下雨和打雷之间互为条件独立。这是因为闪电通常会伴随着打雷，而当闪电发生时，是否打雷和之后是否一定会下雨就没什么关系了。当然，打雷和下雨通常在非条件下是相关的，我们仅仅假设在闪电发生的条件下，它们满足条件独立。&lt;/p&gt;&lt;p&gt;上述例子强调了&lt;b&gt;在朴素贝叶斯中，我们仅仅假设特征之间满足条件独立性，而非一般的独立性。&lt;/b&gt;在条件独立性假设下，反复利用条件概率的定义，P(&lt;b&gt;X&lt;/b&gt; = (x_1, x_2, …, x_n)|C=c_k) 可以写成 P(X_1=x_1|C=c_k) × P(X_2=x_2|C=c_k) × … × P(X_n=x_n|C=c_k)：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rll} P(\mathbf{X}|C=c_k)&amp;amp;=&amp;amp;P(X_1=x_1,X_2=x_2,\cdots,X_n=x_n|C=c_k)\\\\ &amp;amp;=&amp;amp;P(X_1=x_1|C=c_k)\times P(X_2=x_2|X_1=x_1,C=c_k)\times\\ &amp;amp;&amp;amp;~P(X_3=x_3|X_1=x_1,X_2=x_2,C=c_k)\times\cdots\times\\ &amp;amp;&amp;amp;~P(X_n=x_n|X_1=x_1,X_2=x_2,\cdots,X_{n-1}=x_{n-1},C=c_k)\\\\ &amp;amp;=&amp;amp;P(X_1=x_1|C=c_k)\times P(X_2=x_2|C=c_k)\times\\ &amp;amp;&amp;amp;~P(X_3=x_3|C=c_k)\times\cdots\times\\ &amp;amp;&amp;amp;~P(X_n=x_n|C=c_k)\\\\ &amp;amp;=&amp;amp;\displaystyle\prod_{i=1}^n P(X_i=x_i|C=c_k) \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在前面提及的特征和类别均为 binary 的情况下，这将待估计的参数从 2×(2^n - 1) 个直接减少到 2n 个。&lt;b&gt;这大大简化了对样本空间的要求以及求解的计算量，使得朴素贝叶斯算法非常简单。条件独立性的假设便是“朴素”一词的来源。&lt;/b&gt;因此，朴素贝叶斯通常也被称为&lt;b&gt;简单贝叶斯（simple Bayes）&lt;/b&gt;或&lt;b&gt;独立贝叶斯（independence Bayes）&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 朴素贝叶斯分类器&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通过上一节对“朴素”含义的说明，朴素贝叶斯分类器的大致轮廓已经比较清晰了。本节就来正式说明其数学表达式。对于特征向量 &lt;b&gt;X&lt;/b&gt; 和类别 C，利用贝叶斯定理和条件独立性的假设，写出每个 C = c_k 的条件概率：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rll} P(C=c_k|X_1,X_2,\cdots,X_n)&amp;amp;=&amp;amp;\displaystyle\frac{P(C=c_k)P(X_1,X_2,\cdots,X_n|C=c_k)}{P(X_1,X_2,\cdots,X_n)}\\\\ &amp;amp;=&amp;amp;\displaystyle\frac{P(C=c_k)\prod_{i=1}^n P(X_i|C=c_k)}{P(X_1,X_2,\cdots,X_n)} \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;接下来使用训练集数据，估计出所有的 P(C=c_k) 以及 P(X_i=x_i|C=c_k) 即可，而无需考虑上式中的分母，因为它和 C 的取值无关。对于新的待分类样本，使用它的特征向量取值对每个 c_k 求出 P(C=c_k) × Π_i P(X_i=x_i|C=c_k)，并比较这些值中最大的，就可以确定这个新样本的分类：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;C\leftarrow\arg\max_{c_k} P(C=c_k)\prod_{i=1}^n P(X_i|C=c_k)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;&lt;b&gt;以上就是朴素贝叶斯分类器的数学表达式。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在实际的应用中，根据特征变量是离散的还是了连续的，在使用训练集数据估计 P(X_i=x_i|C=c_k) 时，又有不同的处理方法。在离散的情况下，只需要 counting（计数），即：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\hat P(X_i=x_i|C=c_k)=\frac{\#\{X_i=x_i\bigwedge C=c_k\}}{\#\{C=c_k\}}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中 #{X_i=x_i Λ C=c_k} 表示训练集中 X_i = x_i 和 C = c_k 共同发生的次数；#{C=c_k} 表示训练集中 C = c_k 发生的次数。这个估计方法称作&lt;b&gt;最大似然估计（maximum likelihood estimate）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;b&gt;在一些情况下，由于样本数据极度匮乏，很有可能出现某个特征的取值和某个类别的取值在训练集中从未同时出现过，即&lt;/b&gt; #{X_i=x_i Λ C=c_k} = 0&lt;b&gt;，这会造成对&lt;/b&gt; P(X_i=x_i|C=c_k) &lt;b&gt;的估计等于零。&lt;/b&gt;P(X_i=x_i|C=c_k) = 0 会导致对应的 P(C=c_k) × Π_i P(X_i=x_i|C=c_k) = 0，即让我们误以为这个样本属于某个类别 c_k 的概率为 0。这是不合理的，&lt;b&gt;不能因为一个事件没有观察到就认为该事件不会发生。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;解决这个问题的办法是给每个特征和类别的组合加上给定个数的&lt;b&gt;虚假样本（“hallucinated” examples）&lt;/b&gt;。假设特征 X_i 的取值有 J 个，并假设为每个 x_i 对应的 #{X_i=x_iΛC=c_k} 增加 s 个虚假样本，这样得到对 P(X_i=x_i|C=c_k) 的估计称为&lt;b&gt;平滑估计（smoothed estimate）&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\hat P(X_i=x_i|C=c_k)=\frac{\#\{X_i=x_i\bigwedge C=c_k\}+s}{\#\{C=c_k\}+sJ}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;特别的，当 s = 1 时，上述平滑称为&lt;b&gt;拉普拉斯平滑（Laplace smoothing）&lt;/b&gt;。类似的，对于 P(C=c_k) 的估计也可以采用平滑的方式：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\hat P(C=c_k)=\frac{\#\{C=c_k\}+t}{\#\{C\}+tK}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中，t 为对每个类增加的虚假样本数，K 是类别个数，#{C} 表示训练集的样本数。&lt;/p&gt;&lt;p&gt;当特征是连续变量时，情况稍微复杂一些。在使用训练集求解 P(X_i=x_i|C=c_k) 时，&lt;b&gt;需要假设该条件概率分布的形式。&lt;/b&gt;一种常见的假设是认为对于给定的 c_k，P(X_i=x_i|C=c_k) 满足正态分布，而正态分布的均值和标准差需要从训练集学习得到。这样的模型称为&lt;b&gt;高斯朴素贝叶斯分类器（Gaussian Naïve Bayes classifier）&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 一个例子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;下面我们用朴素贝叶斯分类来选股看看。假设描述上市公司的特征有 7 个维度：市盈率、市净率、净资产收益率、总资产周转率变动率、预期盈利增长修正、20 日涨幅、以及市值。为了简化讨论，令每一个特征的取值都是 binary 的，即分为高或者低；进一步令类别也是 binary 的，即好公司（买入后的一段时间内股价上涨）或者差公司（买入后的一段时间内股价下跌）。假设训练集中共有 20 个公司，它们的特征和类别如下表所示。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-25fb9a0b7939d2566b4574fdfabd7f7f_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;769&quot; data-rawheight=&quot;533&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;使用这个训练集来估计所有的 P(X_i=x_i|C=c_k) 和 P(C=c_k) 的取值。通过计数（counting）以及拉普拉斯平滑就可以求出这些参数的估计量（见下表）。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-13522ce649d58c1a8259ac72574710c4_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;583&quot; data-rawheight=&quot;371&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;使用这些估计量就可以对任意给定的新公司分类。比如对于某上市公司，它的特征分别为：市盈率低、市净率高、净资产收益率高、总资产周转率变动率高、预期盈利增长修正低、20 日涨幅高、市值低。使用朴素贝叶斯，对好公司和差公司这两类，分别计算 P(C=c_k) × Π_i P(X_i=x_i|C=c_k) 的取值：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4452b202d608da86be765e323cda7d70_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;649&quot; data-rawheight=&quot;271&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;由于 0.00753 &amp;gt; 0.00036，因此朴素贝叶斯分类对该公司的分类结果是好公司。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 结语 —— 朴素贝叶斯为什么靠谱？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;由于条件独立性这个强假设的存在，朴素贝叶斯分类器十分简单。但是，&lt;b&gt;它仍然有非常不错的效果。&lt;/b&gt;原因何在呢？人们在使用分类器之前，首先做的第一步（也是最重要的一步）往往是&lt;b&gt;特征选择（feature selection），&lt;/b&gt;这个过程的目的就是为了&lt;b&gt;排除特征之间的共线性、选择相对较为独立的特征。&lt;/b&gt;其次，当我们假设特征之间相互独立时，这事实上就暗含了正则化的过程；而&lt;b&gt;不考虑变量之间的相关性有效的降低了朴素贝叶斯的分类方差。&lt;/b&gt;虽然这有可能提高分类的偏差，但是如果这样的偏差不改变样本的排列顺序，那么它对分类的结果影响不大。由于这些原因，朴素贝叶斯分类器在实际中往往能够取得非常优秀的结果。Hand and Yu (2001) 通过大量实际的数据表明了这一点。&lt;/p&gt;&lt;p&gt;最后，我们以 Wu et al. (2008) 中对朴素贝叶斯分类器的高度概括作为全文的收尾：&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;The naive Bayes model is tremendously appealing because of its simplicity, elegance, and robustness. It is one of the oldest formal classification algorithms, and yet even in its simplest form it is often surprisingly effective. It is widely used in areas such as text classification and spam filtering. A large number of modifications have been introduced, by the statistical, data mining, machine learning, and pattern recognition communities, in an attempt to make it more flexible, but one has to recognize that such modifications are necessarily complications, which detract from its basic simplicity.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：朴素贝叶斯模型因其简单、优雅和鲁棒性而极具吸引力。它是最古老的形式化分类算法之一，但即使是最简单的形式，它也常常令人惊讶地有效。它被广泛应用于文本分类和垃圾邮件过滤等领域。统计、数据挖掘、机器学习和模式识别领域的专家们通过对它进行了大量的修改，试图使其更加灵活。但人们必须认识到，这种修改必然是复杂的，这削弱了它的基本简单性。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Hand, D. J. and K. Yu (2001). Idiot’s Bayes – not so stupid after all? &lt;i&gt;International Statistical Review&lt;/i&gt;, Vol. 69(3), 385 – 398.&lt;/li&gt;&lt;li&gt;Wu, X., V. Kumar, J. R. Quinlan, J. Ghosh, Q. Yang, H. Motoda, G. J. McLachlan, A. Ng, B. Liu, P. S. Yu, Z. Zhou, M. Steinbach, D. J. Hand, and D. Steinberg (2008). Top 10 algorithms in data mining. &lt;i&gt;Knowledge and Information Systems&lt;/i&gt;, Vol. 14(1), 1 – 37.&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-26-38533349</guid>
<pubDate>Tue, 26 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>获得诺奖的行为金融学是怎么一回事</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-26-38526672.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38526672&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-c76c662a3fd5b1f6839bcf41c2d34e55_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;0 引子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;如果必须从下面两个选项中做出选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a） 100% 损失 3000 元&lt;/li&gt;&lt;li&gt;（b） 80% 损失 4000 元；20% 概率无损失&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;你会选哪个？&lt;/p&gt;&lt;p&gt;从经济学的角度，前者的损失预期是 3000，后者的损失预期是 3200（4000 x 80%），显然前者更优。然而实际情况却是，大多数人都选择了后者。其中的差异就来自人性的影响。&lt;/p&gt;&lt;p&gt;我们在这篇文章中就来谈谈投资中的人性因素，主要以行为金融学中获得诺贝尔奖的&lt;b&gt;前景理论（Prospect Theory）&lt;/b&gt;为基础。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;1 几个有趣的小实验&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;1.1 你比想象中善变&lt;/b&gt;&lt;/p&gt;&lt;p&gt;实践是检验真理的唯一标准。我们先来看三组一共 6 个实验。在每个实验中，实验者都被提供了两个选项，必须从中选择一个。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 1&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）80% 的概率得到 4000 元&lt;/li&gt;&lt;li&gt;（b）100% 得到 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，20% 的人选择了（a）而 &lt;b&gt;80% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 2&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）20% 的概率得到 4000 元&lt;/li&gt;&lt;li&gt;（b）25% 的概率得到 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;65% 的人选择了（a）&lt;/b&gt;而 35% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 1 ~ 2 的分析：&lt;/p&gt;&lt;p&gt;在实验 1 中，尽管期望收益更大的是（a）（4000 x 80% = 3200元），但绝大多数参与者更喜欢能一定到手的 3000 元（b）。&lt;/p&gt;&lt;p&gt;在实验 2 中，与实验 1 的唯一区别是将选项的确定性减小到之前的 1/4，但结果竟然完全相反。大部分选择（a）的参与者认为，既然两个选项都不怎么确定了，那么（a）显然比（b）的期望收益要高（4000 x 20% = 800，大于 25% x 3000 = 750）。&lt;/p&gt;&lt;p&gt;这组实验说明，&lt;b&gt;收益为正的选项中，拥有确定性的选项（如实验1中的（b））给人的主观价值会大于其真实价值。换言之，在面对正收益时，人们往往更加厌恶风险。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果选项的结果不是金钱而是某种福利（比如免费旅游），也可以得到同样的结论。考虑如下实验 3 和 4，其中实验 4 是实验 3 去掉了 90% 的确定性后得到的。结论和实验 1 和 2 完全一致。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 3&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率得到一次包括英格兰、法国、意大利的三周免费旅游&lt;/li&gt;&lt;li&gt;（b）确切地（100%）得到一次英格兰的一周免费旅游&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，22% 的人选择了（a）而 &lt;b&gt;78% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 4&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）5% 的概率得到一次包括英格兰、法国、意大利的三周免费旅游&lt;/li&gt;&lt;li&gt;（b）10% 的概率得到一次英格兰的一周免费旅游&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;67% 的人选择了（a）&lt;/b&gt;而 33% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;前面的两组实验考察了当所有选项都有正期望收益时，结果的确定性对做决策产生的影响。那么当所有选项的期望收益都为负（即损失）时，又会怎样的？考察下面的实验 5 和 6。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 5&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）80% 的概率损失 4000 元&lt;/li&gt;&lt;li&gt;（b）确切地（100%）损失 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;92% 的人选择了（a）&lt;/b&gt;而仅有 8% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 6&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）20% 的概率损失 4000 元&lt;/li&gt;&lt;li&gt;（b）25% 的概率损失 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，42% 的人选择了（a）而 &lt;b&gt;58% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 5 ~ 6 的分析：&lt;/p&gt;&lt;p&gt;在实验 5 中，92% 的参与者选择了（a）。虽然（a）有很高的概率（80%）损失 4000 元，但绝大多数人仍然觉着它比确定的损失 3000 元更好（主观价值更高）。&lt;b&gt;似乎所有人都认为在面对亏损时，运气会站在自己这一边。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;而当我们从两个选项中都去掉 75% 的确定性后（实验 6），人们又似乎“恢复了理智”，选择了期望亏损相对更低的选项（b）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;这两个实验说明，在面对潜在亏损时，人们往往能够容忍甚至愿意承担更高的风险。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;实验 1 ~ 6 带给我们的结论：&lt;b&gt;确定性和反射性&lt;/b&gt;&lt;/p&gt;&lt;p&gt;以上 6 个实验说明了人们在做决策时，&lt;b&gt;格外偏好具备高确定性且收益为正的选项&lt;/b&gt;，&lt;b&gt;格外厌恶具备高确定性且收益为负的选项&lt;/b&gt;；而当确定性大幅降低后，人们又恢复了理智。&lt;/p&gt;&lt;p&gt;正收益实验（实验 1 ~ 4）和负收益实验（实验 5 ~ 6）说明，当不改变结果的概率而仅改变结果的正负号（盈余变为亏损），人们的选择将截然相反。这个现象被称为&lt;b&gt;反射性&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;1.2 你比想象中容易被忽悠&lt;/b&gt;&lt;/p&gt;&lt;p&gt;简化是人类进步的核心动力，这就使得人们在面对不同选择时，往往忽略相同的部分，而专注于不同的部分作为决策的基础。&lt;/p&gt;&lt;p&gt;然而这种简化可能导致大相径庭的结果。实验7说明了这一点。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 7&lt;/b&gt;&lt;/p&gt;&lt;p&gt;假设某游戏由两个阶段组成：&lt;/p&gt;&lt;p&gt;阶段一，25% 概率晋级下一轮，75% 概率被淘汰；阶段二，在两个选项中进行选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）80% 的概率得到 4000，&lt;/li&gt;&lt;li&gt;（b）100% 的概率得到 3000。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;最有意思的地方来了：参与者必须在&lt;b&gt;游戏开始前&lt;/b&gt;就在（a）和（b）中做出选择。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;由于这个游戏的特殊规则，参与者（在游戏开始前）实际上是在以下两个选项中做决定：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a’）20% 的概率得到 4000 元&lt;/li&gt;&lt;li&gt;（b’）25% 的概率得到 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;注意，这实际上和实验 2 的两个选项是完全一致的。然而，在这个新实验中，&lt;b&gt;78% 的参与者选择了（b）&lt;/b&gt;，这和实验 2 的结论完全相反（&lt;b&gt;实验 2 中 65% 的人选择了（a）&lt;/b&gt;）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 7 的分析：&lt;/p&gt;&lt;p&gt;之所以产生这样的“矛盾”，是因为在实验 7 中，&lt;b&gt;人们忽略掉了游戏的第一阶段&lt;/b&gt;（因为该阶段对于两个选项是一样的），而仅仅根据第二阶段的结果来比较两个选项。&lt;b&gt;而第二阶段的选择相当于实验 1&lt;/b&gt;（即得到 3000 元这个选项是确定的），所以大多数参与者选择了选项（b）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;这个实验说明了人们的选择可以因“对结果的概率的描述不同”而改变。&lt;/b&gt;此外，人们的选择还可以因“&lt;b&gt;对于结果的描述不同&lt;/b&gt;”而改变。来看下面的实验 8 和 9。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 8&lt;/b&gt;&lt;/p&gt;&lt;p&gt;假设在你现有财富的基础上，先给你 1000 块钱，然后需要你再从下面两个选项中选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率再得到 1000&lt;/li&gt;&lt;li&gt;（b）100% 的概率再得到 500&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;结果表明，16% 的人选择（a），而 &lt;b&gt;84% 的人选择（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 9&lt;/b&gt;&lt;/p&gt;&lt;p&gt;假设在你现有财富的基础上，先给你 2000 块钱，然后需要你再从下面两个选项中选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率失去 1000&lt;/li&gt;&lt;li&gt;（b）100% 的概率失去 500&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;结果表明，&lt;b&gt;69% 的人选择（a）&lt;/b&gt;，而 31% 的人选择（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 8 ~ 9 的分析：&lt;/p&gt;&lt;p&gt;可以看到，大多数人在实验 8 中选择（b），而在实验 9 中选择（a）。这样的结果并不令人意外。正如前所属，&lt;b&gt;由确定性和反射性可知，人们在收益前厌恶风险，而在损失前偏好风险&lt;/b&gt;（实验 1 ~ 6）。&lt;/p&gt;&lt;p&gt;然而，尽管两个实验获得的&lt;b&gt;最终财富&lt;/b&gt;（选项（a）都是有 50% 的概率增加 2000 元或 1000 元，而选项（b）都是确定地得到 1500 元）被设置为&lt;b&gt;完全一致&lt;/b&gt;，但实验结果却截然相反。这清楚地显示，&lt;b&gt;参与者忽略了“先得到的钱”这个一致的前提条件，而仅仅是基于后面的选项本身做决定。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这组实验说明了如下这个非常重要的结论：&lt;b&gt;人在做决策时，不同结果带给他的主观价值是取决于这个结果给他的财富带来的变化，而非其财富的最终状态。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 行为金融学和前景理论&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;以上几个实验均出自由 Daniel Kahneman 和 Amos Tversky 提出的&lt;b&gt;行为金融学&lt;/b&gt;中最重要的&lt;b&gt;前景理论&lt;/b&gt;（Prospect Theory，又译作前景理论，Kahneman于 2002 年因其获得诺贝尔经济学奖。Tversky 于 1996 年去世，而诺贝尔奖不追授颁奖时已逝 6 个月以上的学者）。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d5aac6bd13ecad4a9fb7776099ea9ec8_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;293&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;（Daniel Kahneman（左）和 Amos Tversky（右））&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;作为行为经济学的一个分支，行为金融学研究投资者行为。它认为证券的市场价格并不只由证券内在价值所决定，还在很大程度上受到投资者主体行为的影响，即投资者心理与行为对证券市场的价格决定及其变动具有重大影响。&lt;/p&gt;&lt;p&gt;由于投资品收益的不确定性，投资者事实上都是在风险下做决策（decision-making under risk），这也是行为金融学主要研究内容。在这方面，最著名的模型包括期望效用理论（Expected Utility Theory, Bernoulli 1954）和前景理论（Kahneman and Tverskey 1979）。两者相较，后者可以解释所有前者能解释的现象，但反之则不然。可见，前景理论优于前者。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 对前景理论的感性认识&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;前景理论研究人如何在风险下做决策。&lt;/p&gt;&lt;p&gt;这个问题可以描述为，一个人可能面对着 n &amp;gt; 1 种不同的选项，每个选项可以有 m &amp;gt;= 1 种结果，而每个结果有一定的实现概率（注：当某个选项只产生一个结果时，我们说该结果是确定的，即它的实现概率是 100%）。当人们面对不同的选项时：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;b&gt;首先评估每个选项中所有可能结果，并据此得到每个选项对于他自己的“主观价值”；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;然后再比较所有选项的“主观价值”高低；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;最后选择价值最高的那个选项。&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;前景理论分析的便是人们在风险下为不同选项赋予“主观价值”背后蕴含的逻辑。&lt;/p&gt;&lt;p&gt;通过我们此前实验 1 ~ 9 的分析，相信你已经对人如何在风险下做实验有了一些感性的认识。下面我们就来阐述前景理论的数学模型。它由价值函数和权重函数组成。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 前景理论的数学模型：价值函数与权重函数&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;为了做最利于自己的选择，决策者必须评估每个选项的价值，然后比较不同的选项。&lt;b&gt;每个选项的最终价值（V）由价值函数（v）和权重函数（w）决定。&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;价值函数以结果的实际价值为自变量，得到的是该结果对于决策者的主观价值；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;权重函数以结果的产生概率为自变量，得到的是这个结果对其所属选项的影响程度。&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;为简化讨论，假设选项中有两个非零的结果（x 和 y），它们的实现概率分别为（p 和 q）。则这个选项的价值 V(x,p;y,q) 可以由如下方程得到：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;V(x,p;y,q) = w(p)v(x) + w(q)v(y)&lt;/equation&gt;&lt;/p&gt;&lt;p&gt;由此可知，为了确定一个选项的价值，必须研究价值函数和权重函数的数学特征。下面一一介绍。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;4.1 价值函数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;当决策者评估每个选项中的不同结果时，他感受到的是每个结果对他的主观价值 v(x)，而非该结果的真实价值 x。主观价值是选项中不同结果的真实价值的函数，但不等同于真实价值。&lt;/b&gt;举个生活中的例子，假如两个人都把手放在两个水温一样的盆里，他们感受到的水温可能因为他们之前接触过冷的或者热的物体而截然不同。&lt;/p&gt;&lt;p&gt;&lt;b&gt;前景理论中对于价值函数的刻画中，另一个非常重要的本质是，价值取决于财富的变化量，而非财富的最终状态&lt;/b&gt;（回顾实验 8 和 9）。&lt;b&gt;这说明价值的衡量由两个因素决定：变化的初始状态（称作参考点）以及变化的幅度。&lt;/b&gt;因为只有定义了参考点之后，才能正确描述一个选项的结果是带来正收益还是负收益。当参考点在决策过程中发生变化时，一个正收益的结果可能会变成一个负收益的结果，反之亦然。比如下面这两幅图，中间小长方形的颜色是一样的。然而，取决于它边上的大长方形的深浅，我们可以得到关于中间小长方形深浅的不同的结论。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2f994ab303eb6d56605e3c473befdb24_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;663&quot; data-rawheight=&quot;215&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;对于价值函数的形状，前景理论定性的指出：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;当结果为正收益时，价值函数为结果的凹函数；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;当结果为负收益时，价值函数为结果的凸函数。&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;换句话说，对于正收益（负收益）结果，随着结果本身的增加（减少），&lt;b&gt;结果的变化带来的边缘价值逐步减少。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;举个例子，比如将室温从 3 度提高到 6 度，以及从 13 度提高到 16 度，二者都是提高了 3 度，但显然前者给人的边缘感受要强于后者。又或者，比如从亏了 100 变成亏了 200，以及从亏了 1100 到亏了 1200，两者都是多亏损 100 块，但显然前者给人的边缘感受高于后者。&lt;/p&gt;&lt;p&gt;&lt;b&gt;凹函数的性质表明，对于两个正收益的结果 x1 和 x2，它们的主观价值满足v(x1+x2) &amp;lt; v(x1) + v(x2)&lt;/b&gt;；&lt;b&gt;凸函数的性质表明，对于两个负收益的结果 -y1 和 -y2，它们的主观价值满足&lt;/b&gt; &lt;b&gt;v(-y1-y2) &amp;gt; v(-y1) + v(-y2)。&lt;/b&gt;此外，前景理论认为&lt;b&gt;亏损部分的增长快于收益部分的增长&lt;/b&gt;。基于这些特点，可以得到定性的价值函数曲线如下图所示。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-35189cbd0cb05d95e516f0902ed912e5_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;771&quot; data-rawheight=&quot;509&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;价值函数&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;4.2 权重函数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;决定每个选项的第二个重要因素是选项中每个结果的权重。&lt;b&gt;权重 w(p) 是结果的产生概率 p 的函数，但它不是概率。它衡量的是每个结果对其所在的选项的影响，而非仅仅是该结果发生的可能性。&lt;/b&gt;然而特别的，当结果发生的概率为0时，w(0) = 0；当结果发生的概率为 1 时，w(1) = 1。当 0 &amp;lt; p &amp;lt; 1 时 w(p) 是什么样呢？&lt;/p&gt;&lt;p&gt;前景理论指出，&lt;b&gt;如果一个结果产生的概率非常小（微乎其微），人们往往容易放大这种可能性&lt;/b&gt;，即当p非常小时，w(p) &amp;gt; p。考虑如下实验 10 和 11。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 10&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）0.1%（百分之 0.1，非常小）的概率得到 5000 元&lt;/li&gt;&lt;li&gt;（b）100% 的概率得到 5 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;72% 的人选择了（a）&lt;/b&gt;而仅有 28% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 11&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）0.1%（百分之 0.1，非常小）的概率损失 5000 元&lt;/li&gt;&lt;li&gt;（b）100% 的概率损失 5 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，17% 的人选择了（a）而 &lt;b&gt;83% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;对实验 10 ~ 11 的分析：&lt;/p&gt;&lt;p&gt;实验 10 实际上描述了一个生活中非常熟悉的场景。我们平时买彩票就类似这个情况。假设一张彩票是 5 元钱，而买了彩票后你有千分之一的机会得到 5000。这看起来是如此诱人，以至于绝大多数实验者选择了（a）。这是因为人们放大了这个千分之一的可能性在评估两个选项时对选项（a）的作用。&lt;/p&gt;&lt;p&gt;同样的，在实验 11 中，人们也放大了损失 5000 这件事对应的千分之一的可能性。这就像人们买保险一样，和损失的 5 元保险费相比，人们更愿意避免千分之一才会发生的损失 5000 元的事故。因此，二者之间更多的人选择了（b）。在 Markowitz (1952) 中也有类似的描述。&lt;/p&gt;&lt;p&gt;尽管对于很小的 p 有 w(p) &amp;gt; p，前景理论指出，对于任意的 0 &amp;lt; p &amp;lt; 1，有 w(p) + w(1-p) &amp;lt; 1，这个性质称为&lt;b&gt;次确定性（subcertainty）&lt;/b&gt;。这个特性揭示了人们对于不确定事件态度的重要特征，即两个在发生概率上完全互补的事件（即注定会发生其中某一个）的权重之和小于1。除此之外，前景理论还说明了权重函数满足&lt;b&gt;次比例性（subproportionality）&lt;/b&gt;和&lt;b&gt;次可加性（subadditive）&lt;/b&gt;。这里不详细论述。基于权重函数的特点，前景理论给出它的定性图形如下图所示。注意，&lt;b&gt;该函数在概率 p 为 0 和 1 的时候是不连续的，是突变的。&lt;/b&gt;&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cbb7d8cc81a188789b9e813ae4072d37_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;658&quot; data-rawheight=&quot;542&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;权重函数&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;权重函数是非线性的，而且当 0 &amp;lt; p &amp;lt; 1 时它是凸函数。&lt;b&gt;这说明结果概率的增量带给人们的边缘权重增量随着概率本身的增大而增大。这可以理解为人们对确定性的一种追逐。&lt;/b&gt;比如在俄罗斯轮盘赌（Russian roulette），我们有机会花钱来从左轮手枪中减少一发子弹。在这种情况下，根据枪膛中剩余子弹数目的不同，人们愿意花不同的价钱。显然把子弹从 2 颗减少到 1 颗比把子弹从 4 颗减少到 3 颗会让人愿意出更多的价钱。在前者中，我们把结果（不被击中）的概率从 4/6 提高到了 5/6；而在后者中，我们把结果的概率从 2/6 提高到了 3/6。虽然都是提高了 1/6，但显然前者的吸引力大于后者。这显示了w(p) 的凸性。如果仅剩余 1 颗子弹而我们可以通过花钱来把它去掉的话（把不被击中的概率提升到1），那么无论出多少价都是值得的。&lt;b&gt;这既说明了 w(p) 在 p = 1 时的突变，又说明了确定性可以显著提升人们的决策权重&lt;/b&gt;（如同本文开篇的几个实验中展示的那样）。&lt;/p&gt;&lt;p&gt;了解了价值函数和权重函数的定性特性后，我们便可以利用前景理论做决策了。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 用前景理论解释身边的例子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;考虑几个假想的例子（来自网络）。假如上市公司要进行消息发布，在下面的每个情境中，上市公司应该一起发布还是分开发布呢？&lt;/p&gt;&lt;ul&gt;&lt;li&gt;情景 1：有两个好消息要发布&lt;/li&gt;&lt;li&gt;情景 2：有两个坏消息要发布&lt;/li&gt;&lt;li&gt;情景 3：有一个大大的好消息和一个小小的坏消息&lt;/li&gt;&lt;li&gt;情景 4：有一个大大的坏消息和一个小小的好消息&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;根据前景理论中价值函数的特性，不难得出结论。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;情景 1：假设两个消息的正结果价值为 x 和 y，因为 v(x) + v(y) &amp;gt; v(x+y)，该公司应该分开发布好消息。&lt;/li&gt;&lt;li&gt;情景 2：假设两个消息的负结果价值为 -x 和 -y，因为 v(-x) + v(-y) &amp;lt; v(-x-y)，该公司应该一起发布坏消息。&lt;/li&gt;&lt;li&gt;情景 3：假设好、坏消息的结果价值为 x 和 -y且 x &amp;gt; y，因为 v(x) + v(-y) &amp;lt; v(x-y)，该公司应该一起发布。&lt;/li&gt;&lt;li&gt;情景 4：假设好、坏消息的结果价值为 x 和 -y且 x&amp;lt;y，因为 v(x) + v(-y) &amp;gt; v(x-y)，该公司应该分开发布。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 看不懂大函数也没关系，几句话简单总结一下&lt;/b&gt;&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;我们更在乎财富的变化而不是财富的绝对水平；&lt;/li&gt;&lt;li&gt;亏损对我们的伤害要强于盈利带给我们的满足感。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;我们对拥有确定性的选项毫无抵抗力；&lt;/li&gt;&lt;li&gt;只有在不那么确定的时候才会用脑子。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;如果能获取收益，我们都是胆小鬼，认为自己运气比别人差；&lt;/li&gt;&lt;li&gt;如果要承担损失，我们都是赌徒，认为自己运气比别人都好。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;面对极小概率的事件，我们倾向于放大它的影响；&lt;/li&gt;&lt;li&gt;面对极大概率的事件，我们倾向于放大它的影响。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;我们在选择的时候会忽略掉相同的条件，仅关注不同的部分；&lt;/li&gt;&lt;li&gt;这会让我们更容易被忽悠，当然也可以活学活用去忽悠别人。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Bernoulli, D. (Originally published in 1738) translated by L. Sommer (1954). Exposition of a New Theory on the Measurement of Risk. Econometrica, 22(1), 22–36&lt;/li&gt;&lt;li&gt;Kahneman, D. and A. Tversky (1979). Prospect Theory: An Analysis of Decision under Risk. &lt;i&gt;Econometrica&lt;/i&gt;, 47(2), 263–291&lt;/li&gt;&lt;li&gt;Markowitz, H (1952). The Utility of Wealth. &lt;i&gt;Journal of Political Economy&lt;/i&gt;, 60, 151–158&lt;/li&gt;&lt;li&gt;Tversky, A (1972). Elimination by Aspects: A Theory of Choice. &lt;i&gt;Psychological Review&lt;/i&gt;, 79, 281–299&lt;/li&gt;&lt;li&gt;Tversky, A. and D. Kahneman (1992). Advances in Prospect Theory: Cumulative Representation of Uncertainty. &lt;i&gt;Journal of Risk and Uncertainty&lt;/i&gt;, 5(4), 297–323&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-26-38526672</guid>
<pubDate>Tue, 26 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>协方差矩阵的 Newey-West 调整</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-26-38506157.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38506157&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-738e7c18c15348d28af1cfa4f9d1dd3d_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 引言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们在&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38280638&quot;&gt;《正确理解 Barra 的纯因子模型》&lt;/a&gt;介绍了 Barra 的多因子模型。该文讨论的重点在于从业务上说明国家、行业、风格纯因子投资组合的含义，而非具体的数学计算。&lt;/p&gt;&lt;p&gt;不过，后来我意识到我给自己挖了一个坑。因为有个小伙伴给我们留言询问在计算因子协方差矩阵时，Barra 使用的 Newey-West 调整是怎么一回事儿。所以今天就来填坑了。本文就来简单说说 Newey-West 调整对于协方差矩阵估计的重要性。&lt;/p&gt;&lt;p&gt;在我为了写作本文而查阅的相关资料中，除了文末参考文献中的几篇重要论文外，知乎上的两篇讨论也给我很多启发（见参考文献），特此感谢。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 为什么关注因子协方差矩阵？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通过多因子模型，我们可以把个股的收益率表达为因子收益率和个股特异性收益率的形式：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf r = \bf X\bf f+\bf u&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在上式中，&lt;b&gt;r&lt;/b&gt; 为 N × 1 维个股收益率向量（省略了时间下标，假设有 N 支股票）、&lt;b&gt;X&lt;/b&gt; 为当期因子暴露矩阵（N × K 矩阵，K 为因子个数），&lt;b&gt;f&lt;/b&gt; 为 K × 1 维因子收益率向量，&lt;b&gt;u&lt;/b&gt; 为 N × 1 维个股特异性收益率向量。&lt;/p&gt;&lt;p&gt;使用因子模型的好处是可以用它来推算个股收益率之间的协方差矩阵。直接计算股票收益率协方差矩阵的问题是该矩阵有 0.5 × (N^2 + N) 个不同的参数需要估计。这意味着我们至少需要 N 个样本数据来计算它。由于 N 是个股的个数，通常很大，因此这几乎是不可能的任务。&lt;/p&gt;&lt;p&gt;多因子模型的好处是，它把股票的收益率转换为因子收益率的线性组合。因此股票的风险也转换为因子风险的组合。因为因子的个数远远小于股票的个数，估计因子收益率的协方差矩阵要容易的多。对&lt;b&gt;r&lt;/b&gt; = &lt;b&gt;Xf&lt;/b&gt; + &lt;b&gt;u&lt;/b&gt; 等号两边同时做协方差运算可得：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf V = X V_f X&#39;+\Delta&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中，&lt;b&gt;V&lt;/b&gt;（N × N）是股票收益率的协方差矩阵，&lt;b&gt;V_f&lt;/b&gt;（K × K）是因子收益率的协方差矩阵，而 &lt;b&gt;Δ&lt;/b&gt;为 N × N 对角阵，其对角线上的元素对应个股的特异性收益率的方差 —— 多因子模型假设股票的特异性收益和因子解释的收益率之间是独立的，因此因子收益率和特异性收益率之间不存在协方差；此外，模型同时假设不同股票的特异性收益率是相互独立的，因此股票的特异性收益率的协方差也为 0。&lt;/p&gt;&lt;p&gt;可见，为了得到 &lt;b&gt;V&lt;/b&gt;，对于 &lt;b&gt;V_f&lt;/b&gt; 的求解至关重要。Newey-West 调整就是为了更准确的计算出 &lt;b&gt;V_f&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 时序不相关条件下协方差矩阵求解&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在介绍协方差矩阵的 Newey-West 调整前，我们首先看看当因子收益率在时序上没有相关性时的做法（通常的做法）。&lt;b&gt;为了简化数学表达，在下面的推导中，假设收益率已经去均值化（demean）了。&lt;/b&gt;假设共有 K 个因子，令 &lt;b&gt;F&lt;/b&gt;_t 表示第 t 期这 K 个因子的收益率向量，它是一个 K × 1 向量：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf F_{\mbox{$t$}}=\left[ \begin{array}{c} f_t^{(1)}\\ f_t^{(2)}\\ \vdots\\ f_t^{(K)} \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在上面的表达中，符号 f_t^(k) 既有下标也有上标：下标 t 表示第 t 期，而上标 (k) 表示第 k 个因子，因此 k 的取值是从 1 到 K，所以 f_t^(k) 就代表第 t 期，因子 k 的收益率（按照本小节一开始的说明，所有的 f_t^(k) 都已经 demean 了）。&lt;/p&gt;&lt;p&gt;将 &lt;b&gt;F&lt;/b&gt;_t 和它的转置 &lt;b&gt;F&lt;/b&gt;_t’ 相乘，利用线性代数的定义得到 &lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;= \left[\begin{array}{cccc} f_t^{(1)}f_t^{(1)},&amp;amp;f_t^{(1)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;f_t^{(1)}f_t^{(K)}\\\\ f_t^{(2)}f_t^{(1)},&amp;amp;f_t^{(2)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;f_t^{(2)}f_t^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ f_t^{(K)}f_t^{(1)},&amp;amp;f_t^{(K)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;f_t^{(K)}f_t^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;假设计算协方差矩阵的时间窗口为 T，即 t 的取值为 1 到 T。对 T 窗口内的所有 t 都进行上述运算并把不同 t 的 &lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’ 相加得到 Σ&lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle\sum_{t=1}^T\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;= \left[\begin{array}{cccc} \displaystyle\sum_{t=1}^Tf_t^{(1)}f_t^{(1)},&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(1)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(1)}f_t^{(K)}\\\\ \displaystyle\sum_{t=1}^Tf_t^{(2)}f_t^{(1)},&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(2)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(2)}f_t^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ \displaystyle\sum_{t=1}^Tf_t^{(K)}f_t^{(1)},&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(K)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(K)}f_t^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;最后，将 Σ&lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’ 除以时间窗口长度 T 就得到 (1/T) Σ&lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’，这正是以 T 窗口为长度计算出来的 K 个因子收益率的协方差矩阵 &lt;b&gt;V_f&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle \mathbf{V_f}=\frac{1}{T}\sum_{t=1}^T\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;= \left[\begin{array}{cccc} \displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(1)}f_t^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(1)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(1)}f_t^{(K)}\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(2)}f_t^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(2)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(2)}f_t^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(K)}f_t^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(K)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(K)}f_t^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;写了这么“啰嗦”的推导，实在不是因为我有编辑数学公式的癖好，而是希望我们能够对如何从因子收益率向量求解协方差矩阵加深印象。这是因为 Newey and West (1987) 这篇提出 Newey-West 调整的论文行文风格非常干练、没有任何废话，上来就是矩阵和向量的运算，直接给出了计算向量 h_t(θ) 的协方差矩阵 S_T 的表达式（见下红框图划重点的部分）。我第一次读这篇论文的时候感到云里雾里，&lt;b&gt;难以把该文的推导和 Barra 文献中关于 Newey-West 调整的说明联系起来&lt;/b&gt;（换句话说，看了 Barra 的文档说用了 Newey-West 调整，然后找到 1987 年的这篇论文一看，第一感觉却是“这俩有关系吗……”）。所以在我自己写作时，我花费了上面笔墨解释了协方差矩阵到底是怎么从单期收益率向量推导出来的，这能帮助我们更好的阅读 Newey and West (1987)。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f882c5653f96ac5e61c5f9a35846edd0_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;927&quot; data-rawheight=&quot;733&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-f882c5653f96ac5e61c5f9a35846edd0&quot; data-watermark-src=&quot;v2-fb6cebd657c828c9d9790937b9b37fec&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在前文推导中，&lt;b&gt;F&lt;/b&gt;_t 可以被认为对应 Newey and West (1987) 中的 h_t(θ)，而 &lt;b&gt;V_f&lt;/b&gt; 对应 Newey and West (1987) 中 S_T 的估计量。这样通过上面的推导就不难理解在 Newey and West (1987) 中 S_T 的估计量为什么会有和本文中的 &lt;b&gt;V_f&lt;/b&gt; 一样的表达式，这对于理解 Newey and West (1987) 很重要。&lt;/p&gt;&lt;p&gt;Newey and West (1987)  是严谨的数学论文，因此行文在总体和样本统计量之间切换。但在阅读本文时请暂时遗忘总体 vs 样本统计量。本文的所有 notation，比如 &lt;b&gt;F&lt;/b&gt;_t、&lt;b&gt;V_f&lt;/b&gt; 这些都是针对样本数据而言，正如 Barra 的模型一样 —— 我们关注的是如何使用样本数据、通过 Newey-West 调整来对未知的协方差数据进行估计。&lt;/p&gt;&lt;p&gt;在接下来的行文中，我们只要记住：&lt;b&gt;F&lt;/b&gt;_t 是一个 K × 1 的列向量，代表第 t 期 K 个因子的收益率向量（demean 之后的收益率）；而通过总共 T 期（sample size）的 &lt;b&gt;F&lt;/b&gt;_t, t = 1, 2, …, T 计算出来的因子收益率协方差矩阵 &lt;b&gt;V_f&lt;/b&gt; 为（请记住这个式子，下面讲 Newey-West 调整时还会用到）：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle \mathbf{V_f}=\frac{1}{T}\sum_{t=1}^T\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;&lt;b&gt;上式就是当因子收益率在时序上没有自相关性时计算协方差矩阵的一般方法。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;值得一提的是，在 Barra 的模型中，它们还对上式进行了一点点修改。&lt;b&gt;上式中对时间窗口 T 内的各期收益率采用了简单平均，而 Barra 的模型采用了指数平均，目的是为了让更近期的数据有更高的权重，从而快速捕捉波动率的变化。&lt;/b&gt;使用指数平均对上式进行改进不是本文关注的重点，因此不再赘述。感兴趣的朋友请参考 Briner et al. (2009) 中的第 5.1 节（这个文献是 Barra 的 EUE3 模型 —— 欧洲股权模型，它和 Barra 的 USE4 以及 CHE5 模型使用的方法相同）。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 Newey-West 调整&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上一节给出了当因子收益率在时序上不相关时求解协方差矩阵的方法。然而，当因子收益率在时序上有自相关性时，上节的计算方法就有问题了，它不是真实协方差矩阵的一个&lt;b&gt;相合估计（consistent estimation）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;相合估计大致可以理解为随着样本个数的增加，一个统计量的估计越来越逼近其真实值，实现在概率上收敛的效果。相合估计有助于我们计算统计量的估计误差，这对于后续使用该估计量至关重要（比如计算置信区间等）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;为了得到相合估计，必须考虑因子收益率之间的自相关性，从而在计算协方差矩阵时考虑自协方差的影响，这就是 Newey-West 调整的作用。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;此外，&lt;b&gt;Barra 的模型中必须要进行自协方差调整的另一个原因是，Barra 的多因子模型是日频的，因此每天都会有一期因子收益率，而然它们的风险预测模型是月频的。这意味着 Barra 需要把日频的协方差矩阵通过尺度变换（scaling）变成月频的协方差矩阵&lt;/b&gt;。在这个过程中就必须考虑日频收益率之间的序列相关性。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;All EUE3 risk forecasts are&lt;/i&gt; &lt;i&gt;&lt;b&gt;monthly&lt;/b&gt;&lt;/i&gt; &lt;i&gt;volatility estimates. The use of&lt;/i&gt; &lt;i&gt;&lt;b&gt;daily&lt;/b&gt;&lt;/i&gt; &lt;i&gt;factor returns in (5.1) necessitates scaling the covariance matrices to monthly horizon. This scaling step needs to account for possible serial correlation in subsequent factor returns.&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;假设单期的因子收益率 &lt;b&gt;F&lt;/b&gt;_t 满足一个 q 阶的序列相关性，即 F_t 可以用 MA(q) 来刻画。则协方差矩阵的一个最简单的相合估计为（对应 Newey and West 1987 中的式 (4)）：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rlll} &amp;amp;\mathbf{V_f}&amp;amp;=&amp;amp;\displaystyle\mathbf{\Gamma}_0+\sum_{i=1}^q(\mathbf{\Gamma}_i+\mathbf{\Gamma}_i&#39;)\\\\ \mbox{where}&amp;amp; \displaystyle \mathbf{\Gamma}_0&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;\\\\ &amp;amp;\displaystyle \mathbf{\Gamma}_i&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-i}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t+i$}}&#39; \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在上式中，&lt;b&gt;Γ&lt;/b&gt;_0 就是第三节中不考虑自相关性的协方差矩阵，而任何 i ≠ 0 对应的 &lt;b&gt;Γ&lt;/b&gt;_i 代表着由 &lt;b&gt;F&lt;/b&gt;_t 和从时刻 t 滞后 i 期得到的 &lt;b&gt;F&lt;/b&gt;_{t+i} 计算出来的自协方差矩阵。举个例子，令 i = 3 则 &lt;b&gt;Γ&lt;/b&gt;_3 为：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle \mathbf{\Gamma}_3=\frac{1}{T}\sum_{t=1}^{T-3}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t+3$}}&#39;= \left[\begin{array}{cccc} \displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(1)}f_{t+3}^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(1)}f_{t+3}^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(1)}f_{t+3}^{(K)}\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(2)}f_{t+3}^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(2)}f_{t+3}^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(2)}f_{t+3}^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(K)}f_{t+3}^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(K)}f_{t+3}^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(K)}f_{t+3}^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;从这个例子中不难看出 &lt;b&gt;Γ&lt;/b&gt;_3 本身不一定是对称的，因此在上述调整中，对于任何的滞后期 i，&lt;b&gt;Γ&lt;/b&gt;_i 和&lt;b&gt;Γ&lt;/b&gt;_i’ 总是成对出现（&lt;b&gt;Γ&lt;/b&gt;_i + &lt;b&gt;Γ&lt;/b&gt;_i’ 是对称的）。需要特别提醒的是，当计算滞后期为 i 的自协方差时，由于 &lt;b&gt;F&lt;/b&gt;_t 和 &lt;b&gt;F&lt;/b&gt;_{t+i} 之间有间隔 i，因此在总共 T 长度时间窗口内，这二者的配对儿个数为 T - i、少于 T，但是在计算 &lt;b&gt;Γ&lt;/b&gt;_i 的表达式中，永远是除以 T，而不是 T - i。&lt;/p&gt;&lt;p&gt;&lt;b&gt;上述调整（请注意，我没有称该调整为 Newey-West 调整！下面马上就会解释）的本质是使用最大到&lt;/b&gt; q &lt;b&gt;阶的自协方差 Γ&lt;/b&gt;_i &lt;b&gt;对 Γ&lt;/b&gt;_0 &lt;b&gt;进行修正，从而得到调整后的因子收益率协方差矩阵 V_f。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;上面这个调整有一个小问题，就是如此得到的协方差矩阵 V_f 不一定是半正定（positive semi-definite）的，而协方差矩阵必须是半正定的。为了解决这个问题，大名鼎鼎的 Newey-West 调整出场。&lt;/b&gt;它在上述调整的思想上，对 &lt;b&gt;Γ&lt;/b&gt;_i 的修正加入了 Bartlett 权重系数 1 - i/(1+q)。可以看到，该系数和滞后期 i 成反比，说明两个收益率向量 &lt;b&gt;F&lt;/b&gt;_t 和 &lt;b&gt;F&lt;/b&gt;_{t+i} 的间隔越大，&lt;b&gt;Γ&lt;/b&gt;_i 的权重越小。最终，&lt;b&gt;协方差矩阵的 Newey-West 调整为&lt;/b&gt;（对应 Newey and West 1987 中的式 (5)）：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rlll} &amp;amp;\mathbf{V_f}&amp;amp;=&amp;amp;\displaystyle\mathbf{\Gamma}_0+\sum_{i=1}^q\omega_i(\mathbf{\Gamma}_i+\mathbf{\Gamma}_i&#39;)\\\\ \mbox{where}&amp;amp; \displaystyle \mathbf{\Gamma}_0&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;\\\\ &amp;amp;\displaystyle \mathbf{\Gamma}_i&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-i}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t+i$}}&#39;\\\\ &amp;amp;\omega_i&amp;amp;=&amp;amp;\displaystyle1-\frac{i}{1+q} \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;&lt;b&gt;Newey and West (1987) 证明了上面这个协方差矩阵是一个相合估计，而且它是半正定的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这就是 Barra 采用的 Newey-West 调整。在 Barra 的 EUE3 研究报告（Briner et al. 2009）中的第五节对此有简单的说明。此外，前文提到，Barra 需要用日频的协方差矩阵通过 scaling 转换成月频的。为此，Barra 的做法是对 Newey-West 调整后的日频协方差矩阵乘以一个月内的交易天数，即 22，这就得到了最终的因子收益率协方差矩阵（下图截自 Briner et al. 2009，在 EUE3 中 Barra 采用的最大滞后期为 15）。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-10ea22b80e8dab9cb72fea2797aaf85b_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;273&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-10ea22b80e8dab9cb72fea2797aaf85b&quot; data-watermark-src=&quot;v2-f38543c640f12f9f9c14051e52265c78&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;最后想要指出的是，在计算股票特异性收益率的协方差矩阵上，Barra 同样采用了 Newey-West 调整，只不过对于个股特异型收益率，Barra EUE3 模型选择的最大滞后期为 10。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 结语&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;好了，终于把之前的坑填上了。学习大概就是不断的挖坑然后再填坑的过程。&lt;/p&gt;&lt;p&gt;&lt;b&gt;从 Barra 自己的论述来看，它们在因子收益率协方差矩阵以及股票特异性收益率的方差矩阵上面都进行了 Newey-West 调整，且这一调整被沿用到了最新版的模型中，足见这一步的重要程度。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;值得一提的是，在 Barra 的 USE4 模型中，Barra 把协方差矩阵拆成了分别计算每个因子收益率的波动率以及不同因子之间的相关系数矩阵（而非直接求协方差矩阵，见 Menchero et al. 2011）。因此，它们对因子的波动率和相关系数矩阵分别进行 Newey-West 调整。Barra 的 USE4 模型并没有披露具体细节，但&lt;b&gt;万变不离其宗&lt;/b&gt;。我猜想应该和 EUE3 模型中的处理方法（即本文介绍的方法）一致，&lt;b&gt;区别就是我们使用不同因子的收益率序列&lt;/b&gt; {f_t^(k} &lt;b&gt;计算出类似于本文中的 Γ&lt;/b&gt;_i &lt;b&gt;，即利用&lt;/b&gt; K &lt;b&gt;个因子的&lt;/b&gt; {f_t^(k)} &lt;b&gt;序列求出不同滞后期&lt;/b&gt; i &lt;b&gt;下相关系数的矩阵以及方差的对角阵，然后用这个矩阵替换 Γ&lt;/b&gt;_i&lt;b&gt;套入 Newey-West 调整的表达式即可；核心是用 &lt;/b&gt;{f_t^(k)} &lt;b&gt;找到正确的矩阵。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;比如因子 (1) 和 (2) 之间的滞后期为 i 的相关系数可以通过下式计算，对所有因子和所有最大滞后期 q 以内的 i 计算就可以求出类似于本文中 &lt;b&gt;Γ&lt;/b&gt;_i 的相关系数矩阵，然后就可以运用 Newey-West 调整得到相关系数矩阵的相合估计。&lt;/p&gt;&lt;p&gt;&lt;equation&gt;r_i^{(1)(2)}=\frac{\displaystyle\sum_{t=1}^{T-i}f_t^{(1)}f_{t+i}^{(2)}}{\sqrt{\displaystyle\sum_{t=1}^T\left(f_t^{(1)}\right)^2}\sqrt{\displaystyle\sum_{t=1}^{T-i}\left(f_{t+i}^{(2)}\right)^2}}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;我自己尚未对 Newey-West 调整在 A 股上的有效性进行验证，但是国内一些券商的金工团队在这方面已经有了不少的探索。在这方面，天风证券应该算是走在了前列（天风直接对协方差矩阵调整，类似 EUE3 模型）。它应该是我最早看到将 Barra 这一套系统应用于国内 A 股市场上的（至少是 1 年以前），并且还非常有创造性的利用了最优化的手段配合 Barra 的体系来进行选股。进行最优化的前提条件当然是各种输入要尽可能准确，这就能体现出 Newey-West 调整的重要性了。在今后我们进行实证之后，如果有新的发现，也会及时和各位分享。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Briner, B. G., R. C. Smith, and P. Ward (2009). &lt;i&gt;The Barra Europe Equity Model (EUE3).&lt;/i&gt;MSCI Barra Research Notes.&lt;/li&gt;&lt;li&gt;Menchero, J., D. J. Orr, and J. Wang (2011). &lt;i&gt;The Barra US Equity Model (USE4). &lt;/i&gt;MSCI Barra Research Notes.&lt;/li&gt;&lt;li&gt;Newey, W. K. and K. D. West (1987). A simple, positive semi-definite, heteroskedasticity and autocorrelation consistent covariance matrix. &lt;i&gt;Econometrica&lt;/i&gt;, Vol. 55(3), 703 – 708.&lt;/li&gt;&lt;li&gt;https://zhuanlan.zhihu.com/p/27197117&lt;/li&gt;&lt;li&gt;https://www.zhihu.com/question/57352186/answer/273603448&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-26-38506157</guid>
<pubDate>Tue, 26 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>追求卓越，但接受交易中的不完美</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-23-38417800.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38417800&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-062a671fb6cafb22d738364eebd400ad_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 交易中最大的敌人&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;当把一个经过测试的交易系统用于实盘交易时，最大的敌人是什么？是回测中各种数据偏差（如前视偏差、幸存者偏差）？是模型在样本内的过拟合？是对交易手续费和冲击成本的不合理假设？是无法找到理论来解释这个交易想法本身？&lt;/p&gt;&lt;p&gt;都不是。&lt;/p&gt;&lt;p&gt;&lt;b&gt;一个系统投放到实盘时最大的敌人是一个人的心理关。更具体的说，这个心理关指的是交易者能否克服实盘中的心理压力从而坚持使用这个交易系统。&lt;/b&gt;面对回测中稳健的净值曲线（只有策略在回测中表现的不错我们才考虑将它投放到实盘），纵然我们深谙策略的各种指标——比如收益率、最大回撤幅度、最大回撤区间长度、夏普率、胜率、盈亏比等，我们也无法体会到实际交易中必须承受的压力。&lt;/p&gt;&lt;p&gt;对于任何一个交易系统，几乎可以确定的是它在回测中的表现是其在实盘中表现的上限。此外，当一个交易系统被用于实盘之初，亏损先于利润出现也是十分常见的。面对真金白银的亏损，你会比想象的更脆弱、更容易怀疑策略的开发中是否存在没有考虑到的问题、更容易自我动摇从而想要放弃这个系统；在实际交易中，价格时刻在波动，充斥着噪音的各路消息以远超过你能够接受的速度涌向你，你会快步踏入行为金融学中的各种认知偏差陷阱、丧失冷静、做出一系列干预交易系统的错误操作。&lt;b&gt;这些心理压力是哪怕再精细、再严格的回测也无法带给你的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;举个例子，假如你持有黄金的多头。在 2017 年 7 月 10 日黄金短线跳水时，试想一下你的压力（&lt;b&gt;事后来看，金价最终又波动了回来，但彼时彼刻，你的所见是价格的跳水、所闻全是利空消息，你对几个小时后剧情会反转一无所知！&lt;/b&gt;）。在那种压力下你可能会做出减仓或平仓止损的决定——尽管你的交易系统未发出任何信号。如果这一天仅仅是回测中的一日，它则不会带给你任何感受（除了看到这天微涨），你无法体会到实盘中的心理压力，哪怕是一点点。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a2a9e97d0cf7b4c25bd04390356e1626_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;528&quot; data-rawheight=&quot;399&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-a2a9e97d0cf7b4c25bd04390356e1626&quot; data-watermark-src=&quot;v2-6f804868e562d1a9c9413029289aedb1&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;所以，克服掉心理关是一个回测中好的交易系统能否在实盘继续有效的必要条件。要实现这个需要做到两件事：&lt;b&gt;“认识到没有完美的交易系统”&lt;/b&gt;和&lt;b&gt;“追求卓越”&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 没有完美的交易系统&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;没有完美的交易系统。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;每个人都希望找到一个每天都能挣点小钱的交易系统。然而&lt;b&gt;任何一个策略或者交易系统，都是基于对市场的某个假设。市场充满着不确定性，因此它必然会在一些时候背离这个假设，这时该交易系统就会出现亏损。一个优秀的交易系统是一个长期来看能够盈利的系统，而非一个能够每笔交易都赚钱的系统。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;交易的本质是盈亏同源，因此交易者必须学会直面亏损。只有当他能够欣然接受亏损的时候，他才能开始学会赚钱。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;随着交易的进行，你可能希望不断的改进交易系统。但此时你必须格外小心，以免步入过拟合的陷阱。也许在实盘中的每笔亏损交易后，你都试图思考什么样的改进能够避免刚刚的亏损。但我负责任的告诉你，这种想法非常危险。如果你真的这么做的了——为了每一笔的亏损都对你的系统进行了修补，你便走上了“处处精准过拟合”的快车道，你的系统将会逐渐对市场未来的变化无能为力，这无异于自掘坟墓。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;Most traders take a good system and destroy it by trying to make it into a perfect system. – Robert Prechter&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：很多交易员都有一个优秀的交易系统。然而，试图使这个系统变得完美的努力恰恰摧毁了它。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;你的交易系统就像是你的孩子，因此你必须欣然接受它的优点和缺点。&lt;/b&gt;改造一个长期来看可以赚钱的优秀系统必须要非常小心。对哪怕是一个参数的哪怕是一丁点的调节都会改变该系统的效果。这么做是以改动后的系统对最新的交易数据表现更佳为前提；但是如果不能证明它在未来的样本外更有效，那么如此 “改进”仍然是徒劳的。所以，接受你的交易系统。如果它已经是有正期望的系统，那你还有什么不满足的呢？&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 追求卓越&lt;/b&gt;&lt;/h2&gt;&lt;blockquote&gt;&lt;i&gt;Strive for Excellence, Not Perfection.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：追求卓越，而非完美。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;现在的你已经摒弃了打造完美“圣杯”的念想。那么还剩下什么呢？&lt;b&gt;追求卓越！&lt;/b&gt;&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-32c858b82d5251143714ba5210d0c8b7_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1544&quot; data-rawheight=&quot;708&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-32c858b82d5251143714ba5210d0c8b7&quot; data-watermark-src=&quot;v2-dd4300a37696fad7a27bf5e3dd572801&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;把交易系统的表现留给系统本身，而你要做的是百分之百的、严格的遵循你的系统，按它的指令来交易。&lt;b&gt;交易系统的不确定性应该仅仅来自于市场；而非来自于你的操作。如果因为你偏离了你的交易系统——哪怕是最轻微的偏离——而给系统的表现带来了额外的不确定性，那都是你的责任。&lt;/b&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;Every trade that you take outside of your trading system is an insult to yourself, to the time and effort you put into trading, and to your self-respect.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：违背自己的系统而做的每一笔交易都是你的耻辱；是对你为开发该系统所投入的时间和努力的羞辱；是对你自尊的羞辱。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;追求卓越最终归结为对自己的尊重。&lt;/b&gt;一旦你开始尊重自己，相信自己的能力和系统，你就可以更容易地遵循它。&lt;b&gt;如果你遭遇连续的亏损，首先要问问自己是否严格的按照交易系统执行了所有的交易。&lt;/b&gt;如果是，那么恭喜，至少在这方面你问心无愧。你可以继而看看是否是市场状态发生了改变导致系统失效和亏损。如果没有，那么再次恭喜，你的交易系统仍然是可靠的，虽然它产生了几笔连续的亏损，但你仍然可以继续相信它。&lt;/p&gt;&lt;p&gt;如果你无法百分之百的严格执行你的交易系统，那么你的交易将缺乏一致性，在一些交易中你或多或少的带入了人为的扰动。&lt;b&gt;在这样的情况下，你根本无法正确的评价这个交易系统&lt;/b&gt;——你有什么资格这么做呢？你根本没有给这个系统产生一致性交易结果的机会。&lt;/p&gt;&lt;p&gt;&lt;b&gt;一致性是追求卓越的核心。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 做到一致性&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;什么是一致性？如果把这个问题抛给交易员，他们也许会说“稳定的盈利，日复一日、年复一年；净值没有太大和太长的回撤”。诚然，这是交易者的（终极）目标——谁不想要呢？但是，&lt;b&gt;一致性产生的好结果止于此，而一致性非始于此。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;一般交易者的学习曲线大概如下面图中的黑色曲线：他们无法做到严格遵循一个交易系统，总是带着个人情感进行交易，将自己行为带来的不确定性错误地强加于系统的表现之上，从而误认为系统本身出了问题。这导致交易者无法持之以恒、三天两头更换系统。伴随着这个发生的是交易结果的不稳定性——当然是亏损远大于收益。最终，本金输光，无奈退出市场。与之相反的，一个优秀的交易者会专注于一致性，这会让他在通往盈利的进程中越走越远，最终到达胜利的彼岸。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fb39ce46977507b58fe0af783c9de244_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;749&quot; data-rawheight=&quot;333&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-fb39ce46977507b58fe0af783c9de244&quot; data-watermark-src=&quot;v2-5f88c5e741ef786a3320a57c98925f41&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;那么，如何做到一致性呢？三步走。&lt;/p&gt;&lt;p&gt;&lt;b&gt;虽然用了“简单”这个词，但这并不意味着它很容易。&lt;/b&gt;交易成功和很多我们日常想要达到的目标——如减肥、成为一个好学生、做一个好父亲——并无区别，然而&lt;b&gt;知道该做什么是一回事儿，真正做到它又是另外一回事儿。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;第一步：使用一个交易系统&lt;/b&gt;&lt;/p&gt;&lt;p&gt;首先，你需要使用一个交易系统，这将有助于你实现交易的一致性。前文说过，任何交易系统都是基于对市场的某种假设，并严格按照那个假设来交易。因此，在这一步，你需要选择适合自己的系统——比如趋势追踪系统、均值回归系统、价值投资系统、小市值系统，you name it ——不管是什么，一旦选择，就请坚持下去。也许一开始你并不能马上赚钱，但这绝对是一个好的起点。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;No man ever reached to excellence in any profession without having passed through the slow and painful process of study and preparation. – Mark Douglas&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：在任何职业中想要到达卓越，都必须历经缓慢而痛苦的学习和准备过程。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;你不会在还没有摸过篮球时就妄图成为 NBA 的巨星；你不会在还没有学过计算机时就想在 BAT 找一份编程的工作；同样，你也不会在刚上了一节极限课后就声称掌握了微积分的全部内容。那么，你为什么会幻想着一开始交易就马上赚钱呢？&lt;/p&gt;&lt;p&gt;道理很清楚，但很多交易员就是无法做到。人们总幻想更换一个技术指标，或者找到 K 线的另外一个形态，从而一步到位、走向人生巅峰。但不要忘记，“即便是最顶级的耳机也不会让你一步成为一个优秀的 DJ”、“一支再昂贵的钢笔也不能使你一跃成为畅销书的作家”。想要取得成功终须经过漫长的努力，交易也不例外。&lt;/p&gt;&lt;p&gt;严格遵守交易系统将带给你一致性的交易结果，这就是第二步。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;第二步：获得一致性的交易结果&lt;/b&gt;&lt;/p&gt;&lt;p&gt;相对于主观投资，我最喜欢量化投资的一点是，&lt;b&gt;它能够保证交易结果的一致性——无论是盈利还是亏损——结果都来自于严格执行交易系统。&lt;/b&gt;反观主观投资（并不是说它的坏话），由于每次都加入了不同的人为的判断，因此无论交易结果好坏，都很难客观的评判其结果。&lt;/p&gt;&lt;p&gt;&lt;b&gt;获取一致性的第二步就是每次交易中都遵循你的交易系统，从而获得一致性的交易结果。&lt;/b&gt;也许一开始你会亏损，但你仍然可以拍着胸脯的说&lt;b&gt;交易结果中的波动都是来自市场的不确定性，而没有半点人工干预的成分。&lt;/b&gt;这将使你处于非常有利的位置——能够客观的评价这个交易系统在实盘中的表现。唯有如此，你才能正确的辨别出一个交易系统是否足够优秀；才能去伪存真，剔除差的、留下好的。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;I fear not the man who has practiced 10,000 kicks once, but I fear the man who has practiced one kick 10,000 times. – Bruce Lee&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：我不害怕那个虽然学了一万个招式但每个招式只练习了一次的人；但我畏惧那个虽然只学了一个招式但是却反复练习了一万次的人。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;持之以恒地执行你的交易系统，得到一致性的交易结果；只要这个系统在长期是盈利的，那么时间最终会变成你的朋友。&lt;/p&gt;&lt;p&gt;&lt;b&gt;第三步：变成更好的交易者&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;卓越不是一个技能；而是一个态度。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果你在每个交易中都坚持使用系统，排除人为干预，那么日复一日年复一年，当你进行了成百上千次交易后，你就能完全摸透这个系统——它的优点、它的劣势。&lt;/p&gt;&lt;p&gt;当一个系统产生亏损时，人们本能的反应是换一个新的。但现在你已经知道那么做百害而无一利，它只能把你拽回学习曲线的起点。所以，欣然接受它并坚持使用它。&lt;b&gt;不要总是在当事情变得棘手时就尝试新的事物。&lt;/b&gt;好奇害死猫。&lt;/p&gt;&lt;p&gt;我们都钦佩那些坚持多年并最终成为领域专家的人。始终信任你的系统（当然前提是你排除了市场状态变化导致的策略失效），在你对系统建立信任的不懈努力中，你已经成为了一位更好的交易者，你也最终会成为让别人钦佩的人。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d3b974b3f59dee6f42db9b460fd75640_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;788&quot; data-rawheight=&quot;523&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-d3b974b3f59dee6f42db9b460fd75640&quot; data-watermark-src=&quot;v2-69c912cb39f4600156ec19526be75ab8&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;世上没有完美的系统，因此不要在交易中追求完美；但是你应努力做到追求卓越——无论是在交易中，还是在生活的其他方面。不要贪心，放弃做一个完美主义者。一个优秀的交易者知道亏损仅仅是游戏的一部分。&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-23-38417800</guid>
<pubDate>Sat, 23 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>究竟何为量化投资？</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-22-38368044.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38368044&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-bbe37e32fc8ee2c50ba4d8c3a6c4b92b_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;本文作者：高嵩，量信投资联合创始人、CTO&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;量化投资的概念最初由西蒙斯的文艺复兴基金引入公众视野，却始终蒙着一层神秘的面纱。究竟什么是量化投资？如今，若还将量化投资简单的理解为基于数学模型由计算机程序控制的投资，未免太过狭隘。事实上随着近几十年投资学作为一门独立学科高速发展，从定性研究到定量研究是学科发展的必然趋势，数量化的触角已经渗透到投资流程的方方面面，如今可以说是无投资不量化，&lt;b&gt;无量化不投资&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;时至今日，&lt;b&gt;广义的量化投资已经发展成为基于现代科学方法的理论体系、研究方式以及工程系统的总和。&lt;/b&gt;放弃量化投资，无异于放弃了现代科学千百年来积累形成的行之有效的方法论。&lt;/p&gt;&lt;p&gt;早期的科学都是经验的集合。到了近现代，人们对实证经验进行抽象，再辅之以数理推演以及形式逻辑推演，逐步构建了一个相对完整自洽的体系，也就是现代科学。&lt;b&gt;现代科学相较于早期科学，其核心优势就是经过对实证经验的抽象与综合，形成的体系能够去伪存真，获取世界更为本质的规律，对于没有直接观测到的事物进行准确的预测。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;整个投资的历史远较量化投资为长。人们在投资活动中积累了大量的经验，但是直到近几十年，这些经验才被逐渐的抽象归纳，形成可以称之为科学的投资学。基于各种数学模型的量化投资也正是出现在这个阶段。&lt;b&gt;长于各种精确计量的量化投资的兴起只不过是一个学科变得更为成熟的必由之路。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;对于投资实践经验的抽象与归纳，程序化思维是重要核心。程序化思维并非狭义的“如何把投资方法编写为程序”；而是对于各种投资的实践经验，将其一层层梳理拨开，精准确定每个条件每个环节，确定各个机巧所在，设计各种实验一一验证。这本质是一个思维的过程，是将经验抽象提炼转化为知识的过程。投资经验经过了这个过程，才真正上得了台面，能够指导未来投资实践。&lt;/p&gt;&lt;p&gt;投资经验一旦升华成了知识，就意味着其可检验、可重复，如日升月恒，运转不息。&lt;b&gt;不知疲倦的机器能够最有效的发挥知识的力量，以极低的成本快速扩大规模，遵循由人类长期投资经验抽象而成的知识，不折不扣的进行投资活动。这种投资领域的“工业化大生产”时代正在来临。&lt;/b&gt;&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-22-38368044</guid>
<pubDate>Fri, 22 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>机器学习能否助力风险投资？</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-21-38348236.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38348236&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-9376471333ef292e3eb0ac6b57921ffd_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 引言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;近几年，以机器学习、特别是深度学习为代表的人工智能（AI）得到了长足的发展，机器学习和人工智能也成为出现在街头巷尾的高频词汇。在&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38348112&quot;&gt;《AI 投资言过其实》&lt;/a&gt;这篇文章中，我们理性的分析了机器学习在二级市场中面对的困难。今天我们把目光放在风险投资（venture capital），看看机器学习能否在一级市场有所作为。&lt;/p&gt;&lt;p&gt;写本文的动机源自我最近读到的一篇来自麻省理工的论文 Hunter and Zaman (2017)。&lt;b&gt;该文提出了一个挑选优秀早期创业公司的量化分析框架，利用机器学习算法进行参数估计以及最优投资组合的构建，从而挑出那些最有可能成功的初创公司（成功的标准是风险投资人因该公司上市或者被收购而退出）。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;因为文章很新（2017 年的），而且将机器学习应用于了一个比较新的场景，读来让人耳目一新，因此希望把它介绍给关注公众号的小伙伴，开阔大家的视野。&lt;b&gt;最重要的是，它在样本外挑出的创业公司的退出成功率高达惊人的 60%！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文本身非常 technical，因为一些建模的细节问题，我还和作者进行了邮件沟通，确保正确的领会了文章传达的内容。本文将避免涉及太多大数学公式（会有少量必要的），但会不吝篇幅、力争把该分析框架的重点 —— 包括如何构建特征、如何对参数建模求解、以及选取什么样的目标函数 —— 解释清楚。文章最后是关于这个话题的思考。&lt;/p&gt;&lt;p&gt;在介绍这个框架之前，首先来看看相较于二级市场，风险投资为什么更适合机器学习。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 风险投资更适合机器学习&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;2016 年，AlphaGo 以无可争议的优势战胜了李世石；2017 年它的升级版更是风卷残云一般战胜了以柯洁为代表的中方各路围棋高手。AI 在围棋领域的大获全胜给了我们很大的启发，一个适合使用机器学习来解决的问题应该包括以下三个性质：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;信息边界明确，状态有限；&lt;/li&gt;&lt;li&gt;所有信息完全公开透明；&lt;/li&gt;&lt;li&gt;有明确的胜负判断标准。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;我们来看看风险投资是否满足这三个条件。根据百度百科，风险投资的定义如下：&lt;/p&gt;&lt;p&gt;&lt;b&gt;风险投资&lt;/b&gt;主要是指向初创企业提供资金支持并取得该公司股份的一种融资方式。风险投资公司为一专业的投资公司，由一群具有科技及财务相关知识与经验的人所组合而成的，经由直接投资被投资公司股权的方式，提供资金给需要资金者（被投资公司）。风投公司的资金大多用于投资新创事业或是未上市企业，并不以经营被投资公司为目的，仅是提供资金及专业上的知识与经验，以协助被投资公司获取更大的利润为目的，所以是一追求长期利润的高风险高报酬事业。&lt;/p&gt;&lt;p&gt;在一个创业公司融资的过程中，通常分为种子轮（seed）、A 轮、B 轮、……、F 轮（一般 IPO 前不超过 F 轮）、最后是 IPO。以 IPO 上市退出无疑会带给投资人最大的收益；在上市无望的情况下，被收购也是一种比较好的退出方式。根据上面的定义，&lt;b&gt;风投的手段是投资有希望的早期创业公司，目的是在退出时为投资人牟取超高额收益。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;从机器学习问题的角度来说，我们需要挖掘初创公司具备的特征与该公司最终能否为投资人带来了丰厚的报酬之间的关系：Y = f(&lt;b&gt;X&lt;/b&gt;)，即回答&lt;b&gt;“什么样的公司能在未来成为独角兽”&lt;/b&gt;这个问题（&lt;b&gt;X&lt;/b&gt; 代表特征向量，Y 代表是否带来了丰厚回报这件事儿）。训练这个模型是一个典型的&lt;b&gt;有监督学习问题&lt;/b&gt;。更重要的是，风险投资比较好的满足上面提到的三个条件：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;一个初创公司是否能够成功大概率受以下几方面的影响：所处的行业是否是风口行业、产品是否有核心竞争力、创始团队是否出色、是否有知名早期投资者扶持。与二级市场投资相比，风险投资问题的边界相对明确且状态有限。&lt;/li&gt;&lt;li&gt;关于初创公司的团队和融资路径数据，虽然还远非尽善尽美，但是也有足够多的数据（包括公开的和可花钱购买的）来建模。在美国，初创公司这方面数据的可得性（availability）可能更高一些，但是在国内也有像鲸准、IT 桔子、铅笔道这样的关于创业团队相关数据的提供方。&lt;/li&gt;&lt;li&gt;对于风投来说，成功的标准比较明确，就是成功退出（包括 IPO 退出或者被收购退出）。更加发散一步，在建模和参数估计时，也可以使用创业公司完成了哪一轮的融资作为判别的依据。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;需要明确说明一下 Hunter and Zaman (2017) 研究的样本对象。&lt;b&gt;该文的样本点仅考虑了 2000 年之后在美国创办的、且从数据库中可以获得其可靠种子轮或 A 轮融资数据的公司；作者关注的是早期融资成功的那些公司中，哪些更有可能最终脱颖而出。&lt;/b&gt;满足上述条件的公司超过 24,000 个。以它们为样本，该文作者使用机器学习算法找到了最有可能在未来成功的创业公司应具备的特质。由于样本中的公司都已完成了种子轮或 A 轮融资，因此&lt;b&gt;早期投资人的背景和能力也成为对公司建模的一个特征维度。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;下面就来说说 Hunter and Zaman (2017) 考虑的特征。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 选择特征&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上一节提到，创业公司的特征可以从以下四个方面考虑：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;行业&lt;/li&gt;&lt;li&gt;产品&lt;/li&gt;&lt;li&gt;领导团队（包括高管和顾问）&lt;/li&gt;&lt;li&gt;早期投资者（首轮融资）的资源和经验&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Hunter and Zaman (2017) 在构建特征时并没有独立考虑产品这个维度（也没有过多的加以说明）。我的猜想可能是行业已经是产品的一个有效代理指标，话句话说，产品和行业维度比较相关。另外的原因就是在产品初期，能客观定量评价它的指标可能非常有限；产品本身太过细分，难以横向比较。事实上，马上我们将看到，Hunter and Zaman (2017) 考虑的行业已经非常细致，这也暗示了无需再进一步考虑产品这个维度了。接下来，分别从行业、领导团队以及早期投资者三个维度介绍特征。这些数据来自 Crunchbase 数据库以及 Linkedin（领英）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.1 行业&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Hunter and Zaman (2017) 考虑了如下这些行业。当一个创业公司所属于某个行业时，它对应的行业特征取 1，否则为 0。这些行业包括：3D 打印、广告、分析、动画、Apps 应用程序开发、人工智能、汽车、无人驾驶汽车、大数据、生物信息、生物技术、比特币、商业智能、云计算、计算机、计算机视觉、约会交友、开发者 API、电子商务、线上学习、教育、线上虚拟体育、时尚、金融、金融服务、金融科技，健身、GPU、硬件、保健、健康诊断、医院、保险业、互联网、物联网、iOS 开发、生活方式、物流、机器学习、医疗、医疗设备、信息派送、移动通讯、纳米技术、网络安全、开放源码、个人健康、宠物、照片共享、可再生能源、共享出行、机器人、搜索引擎、社交媒体、社交网络、软件、太阳能、体育、交通、视频游戏、虚拟现实和虚拟化。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.2 领导团队&lt;/b&gt;&lt;/p&gt;&lt;p&gt;领导团队笼统的包括高管（含创始人）以及顾问。主要考虑的角度包括，团队成员在过去是否有成功的创业经验、团队成员之间工作和教育背景的相似性和互补性、团队和公司所处行业的符合度、以及团队的平均年龄。下面分别说明。&lt;/p&gt;&lt;p&gt;首先，团队成员过去的创业经验包括如下六个指标。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6604bc07d8f69ab2a05cffc5b5edb56a_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;720&quot; data-rawheight=&quot;289&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-6604bc07d8f69ab2a05cffc5b5edb56a&quot; data-watermark-src=&quot;v2-72e330e156abc00f530535de3c442e7d&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;其次，利用 Linkedin 的数据，Hunter and Zaman (2017) 抓取了所有领导团队成员在成立/加入本公司之前的工作经历，并从中计算出了如下代表他们工作经验和背景的特征。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-20ea7d6ae2dc7abf29aea82a19c149f6_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;705&quot; data-rawheight=&quot;256&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-20ea7d6ae2dc7abf29aea82a19c149f6&quot; data-watermark-src=&quot;v2-19257f04ada4b76bbf21be096bd59453&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在计算工作重合度时，Hunter and Zaman (2017) 采用了 Jaccard Index（一种评价两个集合中元素相似度的常见方法）。具体方法为，领导团队成员两两配对，找出他们之前工作单位的交集和并集，用交集中成员的数量除以并集中成员的数量求出 Jaccard Index。这个指标的取值在 0 到 1 之间，是工作重合度的度量，越高说明重合度越高。对于每个配对，都能得到一个 Jaccard Index，然后计算这些 Jaccard Index 的均值和标准差，作为工作重合度的均值和标准差。&lt;/p&gt;&lt;p&gt;在领导团队的教育背景方面，Hunter and Zaman (2017) 考虑了最高学历、是否毕业于名校、以及教育背景重合度等特征。这些特征包括：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-51f1934f47c407022a92a30f1d344fe4_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;703&quot; data-rawheight=&quot;357&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-51f1934f47c407022a92a30f1d344fe4&quot; data-watermark-src=&quot;v2-abe4c46fc2c59771a375291055458c6c&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在名校的表单中，Hunter and Zaman (2017) 仅考虑了美国的学校（这是个不足？），它们包括：伯克利、布朗大学、加州理工、卡耐基梅隆、哥伦比亚、康奈尔、达特茅斯、杜克大学、哈佛大学、约翰霍普金斯、麻省理工、西北大学、普林斯顿、斯坦福、芝加哥大学、宾夕法尼亚大学、以及耶鲁大学。在计算教育背景重合度时，同样采用的是 Jaccard Index，不再赘述。&lt;/p&gt;&lt;p&gt;对于团队教育背景和公司所处行业的相似性，Hunter and Zaman (2017) 使用了 WordNet 词汇数据库，计算每个领导团队成员学术专业和公司所处行业之间的语义相似度（具体方法是 Palmer-Wu 相似度分数，见 Wu and Palmer 1994）。得到由每个成员计算出的相似度后，取它们的均值作为团队教育背景和公司行业的相似性的度量。&lt;/p&gt;&lt;p&gt;最后一个关于创始团队的指标是在成立该公司时，团队的平均年龄。出于年龄数据不全的考量，作者假设团队成员 18 岁高中毕业、22 岁本科毕业，然后根据他们获得相应学位的年份和公司创办的年份计算出目标年龄。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.3 早期投资者&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在早期投资者这个维度，Hunter and Zaman (2017) 着实花了一番功夫，使用约 83,000 个公司和 48,000 个投资者数据构建了一个公司和投资者关系的动态知识图谱。该图谱随时间变化，对于任意给定的时间点，图谱中的给定节点表示在那个时刻某个投资者投资了某个公司。通过这个图谱，作者计算了两个评价早期投资者能力的指标：&lt;b&gt;投资人的参与度&lt;/b&gt;和&lt;b&gt;投资人的成功率&lt;/b&gt;。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-3ceb89aba4196c32013c047644455c24_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;696&quot; data-rawheight=&quot;429&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-3ceb89aba4196c32013c047644455c24&quot; data-watermark-src=&quot;v2-8dc0f3f2f2369d8009db42d1e345ca48&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;以上介绍了从行业、团队和早期投资者这三个维度如何构建创业公司的特征。&lt;b&gt;其中的难点在于数据的抓取、数据的清洗（提高数据质量）、以及投资人和公司关系图谱的构建。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 构建参数模型&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;有了特征之后，下一步就是要把特征和最终模型学习的目标联系起来。对于选择优秀的初创公司这件事儿，目标应该是什么呢？&lt;/p&gt;&lt;p&gt;我们最终的目标是找到最有希望 IPO 的公司。&lt;b&gt;但是使用上述特征直接映射到创业公司能否 IPO （比如使用逻辑回归）太过简单粗暴了。&lt;/b&gt;下图显示了在 Hunter and Zaman (2017) 的样本中，自 2000 年以来每年新成立的公司的数量以及每年处于各轮融资的公司的数量（从种子轮、A 轮、一直到被收购或者 IPO）。&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-158bff9eb19a924296cefb999aae15a3_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;860&quot; data-rawheight=&quot;346&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-158bff9eb19a924296cefb999aae15a3&quot; data-watermark-src=&quot;v2-add24f3b269fc8267a9a4e5e42f51192&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;从上面的右图可见，能够最终 IPO 的独角兽公司凤毛麟角。&lt;b&gt;如果仅仅以一个公司是否 IPO 作为标签的话，这样的样本数据是非常不均衡的。&lt;/b&gt;以此来训练分类模型的话，常规的方法会过度的考虑对非 IPO 公司（占绝大多数）分类的准确性，而忽视对少数 IPO 公司的准确性。&lt;/p&gt;&lt;p&gt;从直觉上来看，我们似乎应关心对 IPO 公司预测的准确率，并为此可以牺牲对该类预测的召回率，以及对非 IPO 公司预测的精度。但是不要忘记，IPO 的回报是非常高的 —— 不夸张的说，早期 VC 投 100 个公司，有一个能够最终 IPO 就足够覆盖其他 99 个失败造成的损失并给他带来丰厚的收益了。这样的收益特性称为 top-heavy payoff structure。基于此，我们似乎更应该关注对 IPO 公司分类的召回率。&lt;/p&gt;&lt;p&gt;无论如何，直接以是否 IPO 作为标签来训练一个有监督分类问题是过于简化了。更合理的建模思路应该是什么呢？从业务上来考虑，一个创业公司在成功的历经各轮融资后，它的估值是在逐步提升的。因此，&lt;b&gt;使用创业公司的特征来对它估值的变化建模似乎是一条可行并合理的路径。&lt;/b&gt;Hunter and Zaman (2017) 正是这么做的。&lt;/p&gt;&lt;p&gt;Hunter and Zaman (2017) 假设&lt;b&gt;一个公司的估值&lt;/b&gt; V(t) &lt;b&gt;随时间的变化可以由一个布朗运动描述&lt;/b&gt;，该布朗运动的漂移率和扩散率同样为时间 t 的函数，分别为 μ(t) 和 σ(t)。假设在成立时，公司的估值为 0，即 V(0) = 0，随着时间的推移，V(t) 按布朗运动波动。进一步假设不同的融资轮对应不同的估值阈值，当 V(t) 超过某轮阈值就意味着该公司成功完成该轮融资。&lt;b&gt;经过这样的假设，一个公司每完成新一轮融资所需要的时间就是这个布朗运动的 first passage time（首达时间）。&lt;/b&gt;在进一步的数学假设下，作者给出了布朗运动首达时间的概率分布函数 f 以及累计分布函数 F（公式本身太“感人”了，因此我们仅仅给出它们的数学符号，具体表达式就不列出来了，感兴趣的读者请参考原文）：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-82e4e3bf72e63d88052302a2feffad3b_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;439&quot; data-rawheight=&quot;94&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-82e4e3bf72e63d88052302a2feffad3b&quot; data-watermark-src=&quot;v2-a5c45041ede57e2ac57dd78c3df46bb7&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;其中 t_0 表示下一轮融资的起始时间、α 表示估值 V(t) 需要达到的阈值。结合创业公司的融资数据，作者观察到了如下特征，并将它们用于对 μ(t) 和 σ(t) 的建模中：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;大多数成功的创业公司在早期几轮融资中的间隔时间大致相同，这说明我们可以假设在一段时间内，μ(t) 和 σ(t) 保持不变；&lt;/li&gt;&lt;li&gt;很多公司虽然在前几轮融资成功，但是随着时间的推移，越来越多的不免走向失败，无法继续获得融资。这意味着当过一个公司发展了几年后，布朗运动的漂移率开始下降；&lt;/li&gt;&lt;li&gt;随着时间进一步推移，一个公司能够成功（IPO 或者被收购）的可能性越来越低（说明其估值 V(t) 到达某个极限，很难继续增长），这意味着 μ(t) 和 σ(t) 将随着 t 的增大趋近于 0。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;考虑到这些特性，Hunter and Zaman (2017) 对 μ(t) 和 σ(t) 的表达式总结如下：&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-2f99ced0be7c40558d6d3ef8291ea130_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;581&quot; data-rawheight=&quot;134&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-2f99ced0be7c40558d6d3ef8291ea130&quot; data-watermark-src=&quot;v2-3650fb7e7589a2fec6268ff25274189f&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;这表明当 t ≤ ν 时，μ(t) 和 σ(t) 为常数；而当 t ＞ ν 时，μ(t) 和 σ(t) 按指数衰减。ν、τ、μ_0 及 σ_0 需要根据训练集数据得到，其中 ν 和 τ 的取值对所有公司相同，而 μ_0 及 σ_0 是每个公司特有的参数。&lt;b&gt;用什么来决定每个公司的&lt;/b&gt; μ_0 &lt;b&gt;和&lt;/b&gt; σ_0 &lt;b&gt;呢？你一定已经猜到了：公司的特征！&lt;/b&gt;如此一来，公司特征就和上述布朗运动有机的结合起来了。&lt;/p&gt;&lt;p&gt;对于 μ_0 和 σ_0，分别考虑两组参数向量 &lt;b&gt;β&lt;/b&gt; 和 &lt;b&gt;γ&lt;/b&gt;，并令 μ_0 和 σ_0 是特征向量 &lt;b&gt;X&lt;/b&gt;以 &lt;b&gt;β&lt;/b&gt; 和 &lt;b&gt;γ&lt;/b&gt; 分别为权重的线性组合：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7341b56b6c9933ba95a138bb74ed46ad_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;478&quot; data-rawheight=&quot;118&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-7341b56b6c9933ba95a138bb74ed46ad&quot; data-watermark-src=&quot;v2-def05cf8587e73f5703de2a3aaf3d873&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;此外，Hunter and Zaman (2017) 认为&lt;b&gt;外部环境的改变会影响公司特征对于公司能否成功的重要性。&lt;/b&gt;为此，他们假设同年成立的公司共享一组 &lt;b&gt;β&lt;/b&gt;，但不同年份之间 &lt;b&gt;β&lt;/b&gt;向量是不同的（当然不同年的 &lt;b&gt;β&lt;/b&gt; 之间是不独立的）。对于给定年份，所有在该年成立的创业公司使用该年的 &lt;b&gt;β&lt;/b&gt; 向量和自身的特征向量 &lt;b&gt;X&lt;/b&gt; 来求解漂移率 μ_0。&lt;/p&gt;&lt;p&gt;&lt;b&gt;最终需要根据训练集来估计的参数包括 β 和 γ，以及用来描述漂移率和扩散率随时间变化结构的&lt;/b&gt; ν &lt;b&gt;和&lt;/b&gt; τ。对于给定的参数，可以求出描述公司估值变化的布朗运动的漂移率和扩散率，即 μ(t) 和 σ(t)，从而计算出估值 V(t) 到达各轮融资阈值的首达时间的概率分布；有了这个概率分布便能求出每个创业公司在个给定的时间内是否能成功完成指定轮融资的概率。&lt;b&gt;在参数估计中，目标函数就是最大化所有训练集样本点各轮融资发生的概率。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;为了计算概率，需要给定各轮融资的阈值。Hunter and Zaman (2017) 将这些阈值作为模型的超参数直接给定，但他们也强调模型对融资阈值的选择并不敏感。由于在模型中融资阈值对所有公司都一样，因此它们仅对 &lt;b&gt;β&lt;/b&gt; 和 &lt;b&gt;γ&lt;/b&gt; 参数的大小起缩放（scaling）作用，并不影响特征和目标函数之间的内在关系。&lt;/p&gt;&lt;p&gt;由于目标函数太复杂，作者采用了 Broyden-Fletcher-Goldfarb-Shanno 算法（一种求解无约束非线性优化问题的迭代算法，见 Yuan 1991），它能比传统的梯度法更快的找到最优解。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 构建最优投资组合&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通过上述参数模型，作者构建了公司特征和公司估值 V 变化之间的关系。但到了这一步还没结束，仅仅有了这个关系，我们只能大致知道哪个公司可能更有希望获得融资。&lt;b&gt;为了从成千上万的创业公司中找出独角兽，我们最关心的是每个创业公司最终能够在有限时间内实现 IPO 的概率。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;有了首达时间的概率分布函数 F 和模型的参数，很容易通过下式求出任何公司 i 最终 IPO 的概率，记为 p_i（其中 H 为实现 IPO 所需要的阈值）：&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f164ae1be5a0e786908dc2625e7c3db8_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;445&quot; data-rawheight=&quot;51&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;有了每个公司成功的概率 p_i，那么 VC 是不是只需要将有限的资金投入给成功概率最高的那些公司就可以了呢？答案并非那么简单。假设一共有 m 个创业公司，由于资金有限制，VC 需要从中选出 k 个，&lt;b&gt;目标是这 k 个里面至少有一个最终会 IPO。&lt;/b&gt;这个问题类似背包问题（knapsack problem）或集合覆盖问题（set covering problem），其目标函数可以写成：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b715c3247c622f5be51860e817bc152d_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;477&quot; data-rawheight=&quot;89&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-b715c3247c622f5be51860e817bc152d&quot; data-watermark-src=&quot;v2-f15369f2653469a6ddd59a68cc22fa59&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;其中 [m] = {1, 2, …, m} 构成了所有公司的集合，S 是 [m] 的子集、大小为 k，E_i 代表公司 i 成功 IPO（其概率为 p_i）。由于我们希望至少有一个 IPO 成功，因此只需要将不同的 E_i 求交集。U(S) 就是选出的 k 个公司中，至少有一个 IPO 成功的概率，所以我们希望最大化 U(S)。&lt;/p&gt;&lt;p&gt;这个问题是 HP-hard，难以求解。但是，该问题具备一些不错的数学性质使得贪心算法（greedy）可以找到不错的次优解。&lt;b&gt;使用贪心算法，每一轮从所有剩余公司中选择一个，选出来的应该是能够最大化目标函数的边际增长，直到&lt;/b&gt; k &lt;b&gt;轮后，一共选择&lt;/b&gt; k &lt;b&gt;个公司构成&lt;/b&gt; S&lt;b&gt;。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果令 S_G 和 S_W 分别表示贪心算法的解和全局最优解，那么可以证明，目标函数的准确性是有&lt;b&gt;下界&lt;/b&gt;的：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-1122d775890e8f78828cfbf6b3511b7e_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;426&quot; data-rawheight=&quot;76&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-1122d775890e8f78828cfbf6b3511b7e&quot; data-watermark-src=&quot;v2-c6e5022bcaf90b7daa6ca5d856220a70&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;当 E_i 之间独立时 S_G 和 S_W 完全一致。在实际的求解中，Hunter and Zaman (2017) 假设公司之间能否 IPO 是独立的。利用独立性可以把目标函数表示成 p_i 的形式（p_i 是公司 i 成功 IPO 的概率）：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2594b8bebee93f6a233f9b8bef3d656a_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;473&quot; data-rawheight=&quot;167&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-2594b8bebee93f6a233f9b8bef3d656a&quot; data-watermark-src=&quot;v2-6668e21798164e5c97caafabfaf188c1&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;最后需要指出的一点是，在上一节的建模中，作者令系数 &lt;b&gt;β&lt;/b&gt; 随时间变化。因此在计算目标函数 U(S) 的时候必须考虑 &lt;b&gt;β&lt;/b&gt; 的变化引入的随机性。这意味着 U(S) 实际是关于 &lt;b&gt;β&lt;/b&gt; 的期望，即我们最终要最大化的是&lt;b&gt;按照 β 的概率分布计算出来的至少有一家创业公司成功 IPO 的期望概率&lt;/b&gt;：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b671fd2cd8d9d10e3b8d3894e10fbc94_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;703&quot; data-rawheight=&quot;321&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-b671fd2cd8d9d10e3b8d3894e10fbc94&quot; data-watermark-src=&quot;v2-0a2de732be7343a7ecfe47256ae382bf&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;这个期望可以使用蒙特卡洛积分求解。这就是这个量化风投框架的全部内容。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 量化效果&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;Hunter and Zaman (2017) 使用 2000 到 2010 年的数据作为训练集，之后的数据作为测试集，检验了他们提出的量化框架。通过在训练集上训练模型，他们得到了每个公司估值布朗运动的漂移率 μ_0 和扩散率 σ_0。将所有公司按照其最高的融资轮次分组，并考察每组中公司的 μ_0 和 σ_0 的中位数有：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-dc1ed1467198cf1ad6bf38124137c5dd_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;611&quot; data-rawheight=&quot;456&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-dc1ed1467198cf1ad6bf38124137c5dd&quot; data-watermark-src=&quot;v2-496b06bd76ff320b9c0e064441d834bd&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;观察这张图可以得到如下启发：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;表现较差的创业公司（最高融资轮止步于种子轮或者 A 轮）通常有较低的漂移率；&lt;/li&gt;&lt;li&gt;表现一般的创业公司（最高融资轮为 B 到 F 轮）通常有较高的漂移率，但是较低的扩散率；&lt;/li&gt;&lt;li&gt;表现最好的公司（以 IPO 或者被收购退出）的漂移率仅仅是一般水平，但是却有很大的扩散率。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;b&gt;这似乎说明足够大的扩散率是成功的必要条件。&lt;/b&gt;这让我们自然的提出下一个问题：什么样的公司特征可能带来比较大的扩散率（和漂移率）？&lt;/p&gt;&lt;p&gt;作者给出了 2010 年对漂移率产生最大影响的五个行业和非行业特征及它们的系数（别忘了 &lt;b&gt;β&lt;/b&gt; 每年是变的），以及对扩散率产生最大影响的五个行业和非行业特征及它们的系数：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-28c9a6294bc1bdc8b1b83e0c9af6102e_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;673&quot; data-rawheight=&quot;414&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-28c9a6294bc1bdc8b1b83e0c9af6102e&quot; data-watermark-src=&quot;v2-fa62465a20bf3e785275f4e11ffd68b3&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;从行业的角度来说，在 2010 年，影响漂移率的五大行业是线上学习、共享出行、开源、云计算以及生物信息学；影响扩散率的五大行业是社交媒体、信息派送、社交网络、APPs 应用程序开发以及云计算。这意味着这些行业的想象空间（波动）比较大。&lt;/p&gt;&lt;p&gt;从非行业特征角度来说，无论是对于漂移率还是扩散率，&lt;b&gt;最重要的特征就是创始团队的经验，特别是管理团队成员是否在成立本公司之前有过成功的创业经历。&lt;/b&gt;除此之外，&lt;b&gt;教育背景（是否毕业于名校），和早期投资者过往的成功率（maximum acquisition fraction）也尤为重要。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;根据训练模型和最优投资组合的优化函数，作者分别在 2011 年和 2012 年构建了两个投资组合，每个里面包含 10 个创业公司。这两个组合如下表所示，其中第二列为到 2016 年底每个公司最终的融资或退出情况，第三列为模型预测的退出概率 p_i，第四列为组合中依次加入每个公司之后目标函数 U(S) 的变化。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-46af32068f5d7256d0ff570bd15ff7a8_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1030&quot; data-rawheight=&quot;663&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-46af32068f5d7256d0ff570bd15ff7a8&quot; data-watermark-src=&quot;v2-edaac68097da19ee7e83ed568fd6fa87&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;结果显示，在 2011 年选出来的 10 个公司中，有 6 个如今已经成功退出了（包括 1 个 IPO 和 5 个被收购）；在 2012 年选出的 10 个公司中，有 4 个已经退出了（均是被收购）。这可以说是&lt;b&gt;令人称奇&lt;/b&gt;的结果了。&lt;/p&gt;&lt;p&gt;为了横向比较，Hunter and Zaman (2017) 把他们的模型和顶级 VC 以及一个基准模型比较。基准模型采用了 ordered logistic regression 算法，它使用每个公司最高的融资轮作为标签，进行有监督分类。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f8781f46298bcecda715244970b3aa89_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;458&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-f8781f46298bcecda715244970b3aa89&quot; data-watermark-src=&quot;v2-ac5307b86c99554f7aa36e6b80a6a928&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;上图中，左侧的为 2011 年的结果，右侧为 2012 年的结果。横坐标表示所投公司数量，纵坐标为成功退出公司的数量。其中红线和蓝线为基于 Hunter and Zaman (2017) 框架的两个版本的模型的结果，它们的成功率远超基准模型以及顶级 VC；在 2011 年的组合中，当投资个数增加时，基准模型 ordered logistic regression 也取得了不错的效果，但是当投资的创业公司较少时，Hunter and Zaman (2017) 的框架仍然是最出色的。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;7 启发与思考&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;终于把这个框架介绍完了，首先的感受是“给跪了”。Hunter 和 Zaman 在这个量化风险投资框架中集成了大量的机器学习和数学优化算法。对它们的梳理如下：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;从创业公司数据库（如作者采用的 Crunchbase）和 Linkedin 抓取创业公司和创业者、投资人的数据；从行业、团队、早期投资人三个维度构建特征；这其中运用了知识图谱的构建以及语义分析等技术；&lt;/li&gt;&lt;li&gt;使用带漂移率和扩散率的布朗运动来建模创业公司估值的变化，以最大化训练集中所有公司各轮融资发生的概率为目标训练模型参数，这是一个有监督学习问题，求解时采用了 BFGS 算法；&lt;/li&gt;&lt;li&gt;根据模型的参数，使用布朗运动首达时间的概率分布计算出每个公司实现 IPO 的概率。&lt;/li&gt;&lt;li&gt;使用贪心算法和蒙特卡洛积分求解公司选取最优化问题，最优化的目标是最大化选出来的公司中至少有一个能够实现 IPO 的概率。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;b&gt;一个优秀的风险投资公司必备的两点是一套科学的方法论（来洞察投资热点和评估创业团队），和丰富的资源（无论是募资能力还是社会资源）。&lt;/b&gt;没有前者，它找不到好的项目；没有后者，好的项目不找它。&lt;b&gt;本文介绍的这个量化框架可以是这套科学方法论的有利助力。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;为什么这么说呢？因为哪怕是抛开该框架在样本外的预测效果而言，它通过训练集建模得到的参数就能给 VC 们带来很多非常有帮助的启发，这其中包括&lt;b&gt;对热点行业的追踪&lt;/b&gt;以及&lt;b&gt;对优秀创业公司必备的特征的精准定位&lt;/b&gt;。比如，通过模型的参数可以找出时下最热门的行业，并指出一个创业公司想要成功必备的特质是创始人的工作经历和教育背景 —— 资本尤其青睐连续创业者。这些发现和国内很多顶级 VC 的“投的是人，而不是项目”的理念不谋而合。&lt;/p&gt;&lt;p&gt;当然在现阶段，纯量化的风投框架无法解决一个风投公司的资源问题。换句话说，一个量化型风投基金如果没人脉没资源、没有足够的募资能力，那即便是它找到了最具成功潜质的公司，也很难得到股权投资的机会。但是对于那些已在市场中站稳脚跟的 VC 们，掌握一套量化的科学评估体系（无论是对行业还是对创业公司） —— 即便该体系没有本文介绍的这么复杂 —— 也都是大有裨益的。&lt;b&gt;该体系一定会在当下的风投界为这些 VC 们赢得一定的 edge。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果有一天，机器学习（或更广义的，人工智能）真的在投资界大有作为，那么一级市场的 VC 们恐怕会比二级市场的基金经理们率先“沦陷”，而“干掉”他们的正是他们扶持起来的这些人工智能领域的独角兽们。&lt;/p&gt;&lt;p&gt;犹未可知。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Hunter, D. and T. Zaman (2017). &lt;i&gt;Picking winners: a framework for venture capital investment.&lt;/i&gt; Working paper, Sloan School of Management, Massachusetts Institute of Technology.&lt;/li&gt;&lt;li&gt;Wu, Z. and M. Palmer (1994). Verbs semantics and lexical selection. In &lt;i&gt;Proceedings of the 32th annual meeting on association for computational linguistics&lt;/i&gt;, 133 – 138.&lt;/li&gt;&lt;li&gt;Yuan, Y.X. (1991). A modified BFGS algorithm for unconstrained optimization. &lt;i&gt;IMA Journal of Numerical Analysis&lt;/i&gt;, Vol. 11(3), 325 – 332.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;http://weixin.qq.com/r/LkQ6IjTE02msrXBB9xE8 (二维码自动识别)&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-21-38348236</guid>
<pubDate>Thu, 21 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>AI 投资言过其实</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-21-38348112.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38348112&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a31b89ae9d91c70faa557b52b9ac23ee_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;转一篇我的合伙人高老板关于 AI 投资的文章。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;1 狂热的 AI 浪潮&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;近几年随着深度学习算法的出现，人工智能（AI）技术的热潮在全球各领域铺展开来。之前一些计算机处理起来非常困难的任务，依赖深度学习算法，得到了很好的解决。在很多特定数据集、特定任务中，计算机已经达到甚至超过了人类的水平。AlphaGo 在围棋上击败人类把这波浪潮推向了一个新的高峰，人们纷纷对于 AI 的发展无比乐观，似乎很快 AI 就要全面取代人类。&lt;/p&gt;&lt;p&gt;这狂热的一幕在 AI 历史上已经出现过几次，早在上世纪 60 年代，AI 刚刚被提出时，乐观的从业者就认为 AI 将很快在国际象棋和语言翻译中击败人类。90 年代深蓝在国际象棋中击败了人类，日前 AlphaGo 又拿下了更为复杂的围棋，但语言翻译到目前为止 AI 仍然与人类有较大差距。&lt;/p&gt;&lt;p&gt;现在 AI 的旋风又刮到了投资领域，AI 投资进入市场，颇有联合收割机进场割韭菜之势。AI 是否真的如此神奇？事实上目前以深度学习为代表的 AI 技术还有着非常大的局限性，AI 的一些核心问题仍未解决，AI 未来的路还很长。而&lt;b&gt;投资任务的复杂性远远超出了目前 AI 能够很好处理的范围。&lt;/b&gt;现阶段说 AI 投资将要甚至已经击败了人类，有些言过其实了。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 AI 擅长的任务&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;为什么棋类游戏最先被 AI 攻克？我们来看&lt;b&gt;棋类游戏&lt;/b&gt;的特点：&lt;b&gt;1、信息边界明确，状态有限；2、所有信息完全公开透明；3、游戏在有限步内结束，有明确的胜负判断标准。&lt;/b&gt;这几点造成了棋类游戏的的整个状态空间是有限确定的。以围棋为例，每个交叉点上无非就是黑子/白子/空三种状态，再加上整个局面轮黑棋或白棋先行，满打满算一共也就 3^361 × 2 种局面，之外的任何信息都对策略没有影响。就是一只猪，把每个局面最优着法记下来，也成了围棋之神。当然，以目前的技术列出围棋的全部局面是不可想象的，但是计算机相较于人的长处正是海量数据的存储与高速运算。因此计算机在棋类游戏中击败人类就不足为奇了。&lt;/p&gt;&lt;p&gt;再看&lt;b&gt;投资领域&lt;/b&gt;，与围棋相比在上述几个特点上都显著的更为复杂。与围棋的全部信息都在棋盘之中相比，对于投资你&lt;b&gt;很难预先确定整个问题的信息边界&lt;/b&gt;。这对于现阶段的 AI 已经构成了天大的挑战。现在的 AI 从技术以及形态上显然无法像人类一样主动去现实世界探索信息，那么如果让 AI 去投资，整个系统的输入是什么？哪些信息是相关的哪些信息是无关的？对于投资这种开放性问题，大千世界的任何信息都有可能会对决策产生影响，信息量巨大而信噪比极低。AI 不可能获取到一切有可能有意义的信息，从目前常见的做法来看，除了各类报表数据，无非就是接入互联网，从新闻以及舆论中挖掘一些有意义的信息。但这远非投资需要了解的全部，反而引入了大量的垃圾噪音。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f290aed03e8c4a62c1bbe2cc77f90e93_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;570&quot; data-rawheight=&quot;210&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-f290aed03e8c4a62c1bbe2cc77f90e93&quot; data-watermark-src=&quot;v2-e147f1df61bcfa82f55f707ddef1cfb3&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;图 1 投资任务的信息范围&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如上图所示，&lt;b&gt;AI 能够使用的信息实际只是现实世界全部信息一小部分，其中还包含了大量的无用噪音甚至是虚假、错误信息&lt;/b&gt;。在这样的数据基础上，无论使用多么先进的算法，也无异于盲人摸象，难以获得令人满意的结果。&lt;/p&gt;&lt;p&gt;另外棋类游戏有确定的结束标志，存在明确的胜负标准，这也对 AI 的学习提供了极大的便利。最新的 AlphaGo Zero 版本正是依赖于此，让程序从 0 开始，不断的自我对弈以提升棋力。其背后唯一的逻辑很简单：一盘下完了，赢棋方的着法总是比输棋方走得好。这其实是一类非常特殊的问题。深入分析一下，围棋 AI 希望尽可能的提高棋力，而对弈胜负正是棋力真实客观的外在量化标准，可以直接测量、反馈。作为 AI 只需要不断地追求胜利即可，这个量化目标与根本目的是完全一致的。同样的事情放在投资上就不那么显然了。选出中国平安的策略比较厉害？还是选出贵州茅台的策略比较厉害？我们希望尽可能的提高 AI 的投资能力，但是这个&lt;b&gt;投资能力缺乏一个明确的可量化评测标准&lt;/b&gt;。我们只能利用唯一的历史数据，使用类似“近十年的投资信息比率”、“近五年的收益率”等代理指标。但是我们应当清醒的认识到，这些简单指标均无法完全准确的代表投资能力。过于片面的追求这些指标的优化，还容易陷入过拟合的风险。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 深度学习算法的局限&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;目前取得重大进展的以深度学习为代表的 AI 技术，本质上还是基于数据的统计，是一种高维空间的模式识别。&lt;/b&gt;这使得 AI 无法“理解”任务内容，在 AI 看来所有的任务都是寻找 f 使得 f(X) -&amp;gt; Y 的过程。这样AI的效果将极其依赖于给定的输入 X 与输出 Y。前面两节已经提到，在投资任务中，输入 X 中包含了大量的垃圾信息，又将很多真正有意义的信息排除在外；输出 Y 又不易准确量化评价。&lt;b&gt;对于人类来说，存在大量的领域背景知识，可以轻松的滤掉“显而易见”的无用或错误信息。但是现阶段技术下，这种领域背景知识很难迁移到 AI 中&lt;/b&gt;。AI 将对所有信息一视同仁，努力在其中发现模式，而这种模式将完全不同于人类的思维和理解方式，对于人类来说几乎是一个黑箱。这等于 AI 放弃了人类文明千百年来的持续积淀，仅通过目前人类给他划定的一部分信息，采用不同于人类的方式自学成才。对于围棋来说，棋盘上的信息是完全的，人类的所有领域知识积累都可以从棋盘上推演得到，人类的知识显得“多余”了。但&lt;b&gt;对于投资来说，涉及的信息无法穷尽，此时放弃人类知识就是非常危险的。&lt;/b&gt;那些人类闭着眼都不会踩到、甚至根本无法意识到其存在的坑，都很可能就会让 AI 阴沟里翻船。更何况现在的 AI 对于针对性构建的恶意样本还非常脆弱，一旦被人恶意利用，后果不堪设想。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d72995d86f84f847db2eca8d42784670_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;730&quot; data-rawheight=&quot;306&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-d72995d86f84f847db2eca8d42784670&quot; data-watermark-src=&quot;v2-491e0ca99f88f1c5ab48ff1a65ea643c&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;图 2 针对性构建的恶意样本&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;同时，现阶段的 AI 投资还面临一个重大挑战就是数据匮乏。&lt;/b&gt;从基于统计的机器学习开始，到现在的深度卷积神经网络，对于复杂的问题采取了使用海量数据学习以暴制暴的方式。AlphaGo 对弈了数百万盘围棋，达到了人类的水平。而一个人类棋手从学棋开始至达到职业水平的对弈数连 AlphaGo 的零头都不到。在这一点上，目前的 AI 与人类的思维方式还有着显著的差别。AlphaGo 击败了人类也不意味着机器就比人更聪明。&lt;/p&gt;&lt;p&gt;&lt;b&gt;人类的优势是对复杂数据进行高层次的抽象，大道至简；而深度学习算法则是充分发挥机器的优势，以量取胜。&lt;/b&gt;这使得人类能够从少量的样本中总结出深层次的简单规律，并利用这些规律做出各种预测；而 AI 在目前阶段无法做到这一点。观察到苹果落地，牛顿总结出是因为地球的引力，据此发展出万有引力定律；爱因斯坦总结出是因为地球质量造成时空弯曲，据此发展出广义相对论。他们都通过少量（相对 AI 的训练数据规模）的观察准确的抽象出了高层次的一些规律。&lt;/p&gt;&lt;p&gt;&lt;b&gt;在小样本上的学习能力、深层次规律的抽象泛化能力，人类远远强过 AI。&lt;/b&gt;如果巴菲特是 AI，他可能需要看过 100 万家“可口可乐”公司的成功，才能在实际中选出可口可乐。但很可惜，可口可乐公司只有一个，历史也只有一次。对于 AI 来说，这样的学习数据实在是太少了。现阶段的 AI 算法，如果学习数据太少，会非常轻易的陷入过拟合的陷阱 —— AI 记住了所有的学习数据，而非其中真正能够持久生效的一些深层规律。&lt;b&gt;从投资到计量经济学，都注定了只有唯一的历史数据可以学习，时间持续流逝，环境不断变化，你也无法控制同样的环境反复的实验验证。&lt;/b&gt;此时就要求必须能够从这少量的甚至是唯一的样本中总结规律。现在 AI 言必称大数据，而爱因斯坦 100 年前没有任何实际的观测，通过“零数据”就预言了引力波的存在，直到 100 年后的今天才被实际观测到，这种能力现阶段的 AI 是无法企及的。专家们早已注意到了机器学习过于依赖样本的局限性，小样本学习的问题已经被推到 AI 领域前沿，但迄今未出现像深度学习算法这样的重大突破。目前 AI 仍然无法脱离模式识别的范畴，我们离实现真正的智能还有很长的路要走。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 AI 投资路在何方&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;目前 AI 在投资上也并非无用武之地。尽管整个投资任务对于 AI 来说过于宽泛复杂了，但 AI 在一些特定的具体领域任务上足以与人类媲美，已经证明了其巨大价值。&lt;b&gt;AI 的长处在于大量繁杂数据的高速处理，而人类的长处在于化繁为简，达到更高的抽象层次。人类和机器具备各自独特的优势而又能够有效互补。&lt;/b&gt;对于投资来说，AI 可以作为工具，帮助人类去高效的完成一些特定环节。我们仍然应当以人类投资的成功经验为基础，在其中一些特定环节上由 AI 替代人类高效完成。目前我们关注研究的重点不应当是 AI 如何替代人类做投资，而是如何作为工具帮助人类更高效更好的进行投资。将 AI 引入投资领域的商业本质仍然是效率的优化，是时间、成本、质量之间的平衡。&lt;b&gt;AI 的引入能够大幅降低低端人力成本，提高企业投资业务处理能力，从而获得更高的边际效益。&lt;/b&gt;作为专业投资者应当拥抱这种变革，但不应对 AI 有不切实际的期望，更不应当把 AI 作为噱头，勉强蹭热度。只有深入的理解 AI 技术，才能了解 AI 的优势与局限，让 AI 为投资发挥其最大的效能。&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-21-38348112</guid>
<pubDate>Thu, 21 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>因子投资指数化实证</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-21-38340466.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38340466&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b69cc06f353e7c2874c7f15876232355_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 前言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38281562&quot;&gt;《因子投资——“被动的”主动投资》&lt;/a&gt;系统阐述了如何基于能在长期获得溢价的风险因子来构建投资组合，即因子投资的概念。因子投资的核心是在给定的市场中构建具有可投资性的投资组合。如果不能做到这一点，那么因子投资仅仅是经济学家们的数学游戏，而无法（从获取超额收益的角度）为投资实践带来真正的作用。&lt;/p&gt;&lt;p&gt;&lt;b&gt;可投资性是指投资组合中股票的仓位是否合理，该组合的换手率和交易成本是否实际，进入该组合的股票是否有足够的流动性、该投资组合能承担的资金量（即投资组合的容量）是否足够大等。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;因子投资的实践者需通过排序或者优化，来从备选的股票中选出股票并构建出满足可投资性约束的投资组合。投资者通过持有该投资组合并在有新的基本面数据出现后按照同样的规则调仓，以期获得该因子对应的风险溢价。&lt;/p&gt;&lt;p&gt;今天，我们就以成长因子为例，来看看因子投资在我国股市是否有落地的可能。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 实验准备&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们的股票候选池为中证 500 的成分股。构建因子投资组合的频率为月频，即每月月底使用当时最新的因子暴露，来构建成长因子的投资组合。换句话说，在实证中，我们按月进行调仓。在时间维度上，我们使用从 2013 年 6 月到 2016 年 11 月三年半的月频数据。&lt;/p&gt;&lt;p&gt;在构建具有可投资性的投资组合时，我们采取求解如下形式的带约束条件的最优化问题：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-9484a44453457733dc5ebd657f149b4d_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;406&quot; data-rawheight=&quot;225&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-9484a44453457733dc5ebd657f149b4d&quot; data-watermark-src=&quot;v2-ebb8f18032d49338e48af3e86343a91c&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;其中，w 是待求的股票权重的向量；X 是股票在目标因子，即成长因子上当期的暴露；V 是股票收益率之间的协方差矩阵；a 是一个给定的系数。&lt;b&gt;约束条件方面，我们考虑了虑纯多头组合（这是因为个股无法做空）；满额投资；单只股票的权重上限 2%（这保证我们的组合中至少会有 50 支股票，这么做的目的是尽量分散个股的特异性风险，即个股无法被因子解释的风险）；涨跌停股票的买卖限制；以及对其他行业和风格因子的暴露尽量低（这是因为我们想捕捉的是成长因子本身带来的风险溢价）。该优化问题的目标函数为最大化投资组合在成长因子上的暴露，以此来捕捉该因子带来的超额收益。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;实证中考虑的其他因子包括 28 个申万一级行业和除成长因子外的其他 10 类风格因子。这些风格因子是： EP 因子、BP 因子、流动性因子、规模因子、非线性规模因子、Beta 因子、残差波动率因子、动量因子、反转因子和杠杆因子。&lt;/p&gt;&lt;p&gt;此外，为求解这个优化问题，一个核心的输入数据是个股的协方差矩阵。由于股票池有 500 支成分股，因此它们的协方差矩阵有约 125000 个参数需要估计。&lt;b&gt;直接通过个股的收益率历史样本数据直接求该协方差矩阵会造成极大的误差。为此，我们采用多因子模型来求解该协方差矩阵。&lt;/b&gt;在我们的多因子模型中，我们考虑了上述 28 个行业因子，11 个风格因子以及 1 个国家因子。具体的方法不在本文的介绍范围之内，故略去。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 结果分析&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在我们之前的实证中，曾经使用 Barra 的纯因子模型构建过成长因子投资组合。该组合在回测期内获得持续的超额收益的（下图）。在本次实证中，我们想看看加入各种可投资性的约束后，获得的成长因子投资组合是否仍然给我们带来超额收益。&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-39d50e17ea59ac1a060188707cfe1008_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;786&quot; data-rawheight=&quot;284&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-39d50e17ea59ac1a060188707cfe1008&quot; data-watermark-src=&quot;v2-1b0d5f578a6cff3535ac60d533be0f9e&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;下图显示了回测期内中证 500 指数和我们的成长因子投资组合的净值走势比较。不出意外，围绕成长因子构建的投资组合大幅跑赢了市场。&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-618784903d254b88535e83669b6cdfac_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;550&quot; data-rawheight=&quot;404&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-618784903d254b88535e83669b6cdfac&quot; data-watermark-src=&quot;v2-a19beadce81b9aa43d916e80a9bdc1cf&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;b&gt;由于我们构建的额是纯多头组合，因此该组合显然对市场有不可避免的暴露，这便解释了为什么成长因子的投资组合也随市场有着同步的上下波动。&lt;/b&gt;为了更好的衡量该投资组合捕捉超额收益的能力，我们来看看它相对市场的净值走势（下图）。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-2d278906b09f48a4078af7d5c97b295f_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;555&quot; data-rawheight=&quot;407&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-2d278906b09f48a4078af7d5c97b295f&quot; data-watermark-src=&quot;v2-e124c1d54ef62bfe0c676ccb46fa8881&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;b&gt;成长因子投资组合相对于市场有着稳健的超额收益。其累计净值在回测期内穿越市场的牛熊，稳健向上。这条相对收益的净值曲线可以获得 9.1% 的年化超额收益；以月收益率计算的最大回撤为 3%。&lt;/b&gt;这说明如果能够通过做空中证 500 指数来对冲市场风险，那么依靠成长因子便可以获得如上图所示的稳定收益。&lt;/p&gt;&lt;p&gt;当然，现在股指期货的交易量有着非常严格的限制，因此能靠卖空股指期货来对冲的资金量非常有限。如果未来股指期货限制放宽的政策可以继续出台，那么必将为因子投资在国内的发展带来积极的影响。&lt;/p&gt;&lt;p&gt;最后，我们想说明的是，本次实证是我们将因子投资从理论转化为实践的初探。在实验中，我们并没有考虑所有可投资性的约束条件，比如我们就没有特别限制相邻两次调仓之间的换手率（从结果来看，回测期内每次调仓的平均单边换手率为 31%）。&lt;/p&gt;&lt;p&gt;此外，一旦在实践中尝试按照数学优化的结果来建仓，势必也会遇到不同的问题，造成一定的误差，这些也会影响投资组合的收益率。这是在实践中必须考虑的问题。&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-21-38340466</guid>
<pubDate>Thu, 21 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>多个因子配置实证</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-21-38340204.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38340204&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-1331b06d10258675d59775bcbec531dd_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 多个优秀的风险因子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;因子投资（factor investing）是近几年来的发达市场的新趋势。而随着国内股指期货的松绑和投资者逐渐变得理性和成熟，因子投资在 A 股一定也会有更美好的前景。我们之前对 A 股市场做了一些多因子实证。本文将重点讨论&lt;b&gt;如何有效的将多个优秀的风险因子配置在一起&lt;/b&gt;，使它们优势互补、得到收益风险比更佳的投资组合。本文假设读者已经熟悉我们之前的文章&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38281562&quot;&gt;《因子投资——“被动的”主动投资》&lt;/a&gt;以及&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38340466&quot;&gt;《因子投资指数化实证》&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;我们的研究发现存在五类风险因子，围绕它们构建的具备可投资性的纯多头投资组合在回测中可以获得相对于基准指数的超额收益。&lt;b&gt;这五类因子是：流动性因子、规模因子、成长因子、估值因子以及反转因子。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;以中证 500 指数为基准，使用其成分股构建的这五类风险因子的投资组合的超额收益在过去近 7 年的净值曲线如下图所示，它们都取得了比基准指数本身更高的回报。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-164c867db26b4be6f4ea632ae155ea47_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;548&quot; data-rawheight=&quot;404&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-164c867db26b4be6f4ea632ae155ea47&quot; data-watermark-src=&quot;v2-e0340bc18e55024365cde71b9cf0c379&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;更具体的，针对这五类风险因子相对于基准指数的&lt;b&gt;超额收益&lt;/b&gt;，计算它们的年化收益率、最大回撤、平均回撤、以及夏普率。结果总结于下表。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4c5d1c257ee43d849d0022398c816646_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;527&quot; data-rawheight=&quot;191&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-4c5d1c257ee43d849d0022398c816646&quot; data-watermark-src=&quot;v2-60b17824dcbde2dd6eade10738126f3b&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;虽然上述每一个风险因子本身都有着跑赢基准指数的不俗表现，但它们的投资组合的收益率之间&lt;b&gt;相关性较低&lt;/b&gt;（下图）。&lt;b&gt;这说明因子的表现存在周期性，在不同的时期有些因子会比其他因子更出众。&lt;/b&gt;这使我们不禁发问：&lt;b&gt;能否把这五类因子的投资组合通过某种策略配置在一起，得到一个收益风险比更优的多因子配置组合呢（如更高的夏普率）？&lt;/b&gt;&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-6189657122e5689dc0bdd3d592be79fb_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;508&quot; data-rawheight=&quot;390&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-6189657122e5689dc0bdd3d592be79fb&quot; data-watermark-src=&quot;v2-b912adcec2ebc36892add8b5b9e9ba43&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;本期数据解码投资就来研究研究如何将不同的风险因子配置在一起。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 实验准备&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们以中证 500 指数的成分股作为候选池构建这五类风险因子的&lt;b&gt;纯多头&lt;/b&gt;因子投资组合，按月调仓，回测区间为 2009 年 6 月到 2017 年 2 月。在回测期间内的每一个月，我们都有这五类因子的绝对收益率以及相对中证 500 的相对收益率。&lt;b&gt;在构建单因子的投资组合时采用数学优化的方法，既注重投资组合在目标因子上的暴露又强调投资组合的可投资性&lt;/b&gt;，具体的介绍可以参阅&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38340466&quot;&gt;《因子投资指数化实证》&lt;/a&gt;。有了单一因子的收益率序列后，就可以使用不同的策略把它们配置在一起了。&lt;/p&gt;&lt;p&gt;在实证中，考虑五种策略来将这五些因子配置在一起。&lt;b&gt;这五个策略包括：简单多样化、波动率倒数、跟踪误差倒数、风险平价以及趋势追踪。&lt;/b&gt;它们的业务含义、实现方法以及相应的数学公式总结于下表。&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6059a41f099049f9e5250dd1520f063f_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;701&quot; data-rawheight=&quot;668&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-6059a41f099049f9e5250dd1520f063f&quot; data-watermark-src=&quot;v2-6f564c35ccef7b367930ad7b1e1c2fc0&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;显然，简单多样化是将多个因子组合在一起的最简单、直接的方法。它不对因子未来的表现做预期，在任何时候都以等权来配置这些因子。因此它是一个&lt;b&gt;被动的且静态的&lt;/b&gt;配置方法。&lt;/p&gt;&lt;p&gt;相比于简单多样化，其他四种配置方法都需要结合使用者的&lt;b&gt;主观判断&lt;/b&gt;。它们都是从不同方面考虑因子在过去一段时间的表现，从而对未来产生判断，并以此来&lt;b&gt;动态的&lt;/b&gt;配置因子在下一个配置周期的权重。在实证中，用于评判因子过去表现的策略包括：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;b&gt;波动率倒数：&lt;/b&gt;这里关注的是因子&lt;b&gt;绝对收益率&lt;/b&gt;（而非对基准指数的相对收益率）的波动率，认为在过去波动率低的在将来会有更高的收益风险比。&lt;/li&gt;&lt;li&gt;&lt;b&gt;追踪误差倒数：&lt;/b&gt;跟踪误差是因子相对于基准指数的&lt;b&gt;相对收益&lt;/b&gt;的波动率，认为在过去跟踪误差低的在将来会有更高的收益风险比。&lt;/li&gt;&lt;li&gt;&lt;b&gt;风险平价：&lt;/b&gt;从风险的角度来实现多样化，要求单一因子对最终投资组合的边际风险贡献相同。在考虑风险时，我们考虑的是因子的&lt;b&gt;绝对收益率&lt;/b&gt;的波动，而非其相对基准指数的相对收益率的波动。&lt;/li&gt;&lt;li&gt;&lt;b&gt;趋势追踪：&lt;/b&gt;考察因子近期风险收益的综合表现，认为因子表现的趋势会延续，即过去好的在未来也会好。计算风险和收益时，使用因子相对基准指数的&lt;b&gt;相对收益率&lt;/b&gt;。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;对所有这些需要通过计算过去一段时间表现而决定当期因子权重的策略，考察当前时点之前 12 个月内因子的表现。因此，这五种配置策略的实际回测区间要晚于构建因子收益率的回测区间 12 个月；配置策略的回测区间从 2010 年 6 月到 2017 年 2 月。&lt;/p&gt;&lt;p&gt;通过实证想要回答以下几个问题：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;将相关性的因子配置在一起到底能否得到收益风险比更高的投资组合；&lt;/li&gt;&lt;li&gt;纯粹被动的简单多样化策略是否足够优秀；&lt;/li&gt;&lt;li&gt;加入主观判断的另外四种策略相对于被动的简单多样化到底能否取得更好的配置结果。&lt;/li&gt;&lt;/ol&gt;&lt;h2&gt;&lt;b&gt;3 结果分析&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;使用这五种策略分别把这些风险因子相对中证 500 指数的相对收益进行配置，以此构建出五个策略的净值曲线，如下图所示。令人意外的而是，它们的效果非常接近。&lt;b&gt;进一步考察可以发现，简单多样化、波动率倒数、以及风险平价三种方法的效果很类似；而追踪误差倒数和因子趋势这两种方法的效果接近，但它们较另外三种方法稍差一些。&lt;/b&gt;&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-07af3bb8b328206863152f57eef3db09_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;546&quot; data-rawheight=&quot;403&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-07af3bb8b328206863152f57eef3db09&quot; data-watermark-src=&quot;v2-19162c29b88ccb4f6098d6ab962bef44&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;为了解释这种结果，&lt;b&gt;一个合理的猜测是这五种配置策略对因子配置的权重十分接近&lt;/b&gt;。下面是这些策略下，因子权重在回测期间变化的堆积图（stack plots）。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-7cf39d72896c44b344cf13daf8755921_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;538&quot; data-rawheight=&quot;397&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-7cf39d72896c44b344cf13daf8755921&quot; data-watermark-src=&quot;v2-ad0568b1d1b0722fa18f097c06c48b6d&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-37189b997147f067a9db6d6067e96579_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;542&quot; data-rawheight=&quot;393&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-37189b997147f067a9db6d6067e96579&quot; data-watermark-src=&quot;v2-897f65f04cc81bf10bfd688219f7bc66&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-23e843d1e80f8d208a65f445fc9aea0f_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;541&quot; data-rawheight=&quot;397&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-23e843d1e80f8d208a65f445fc9aea0f&quot; data-watermark-src=&quot;v2-7dd79118019eb99d306b17dd750ffb7b&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-394f0484bb46183f1a8073be2ebd7f03_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;543&quot; data-rawheight=&quot;394&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-394f0484bb46183f1a8073be2ebd7f03&quot; data-watermark-src=&quot;v2-d869aa74d14db7733f9be4275be25ff6&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-dcdfad0c9b66c55660ef68106cb9b985_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;536&quot; data-rawheight=&quot;395&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-dcdfad0c9b66c55660ef68106cb9b985&quot; data-watermark-src=&quot;v2-cd635772a82cc68ab0b37e74b0e1a43b&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;简单多样化策略无需多言。所有因子在回测期间等权配置，每个因子的权重为 0.2 恒定。其次，再来看看按照绝对收益率波动率的倒数以及风险平价这两种策略得到的权重。在这两种方法下，因子的权重虽然随时间略有波动，但波动幅度非常小，整体效果与简单多样化非常接近，这解释了为什么它们的净值曲线和简单多样化策略的净值曲线非常接近。&lt;/p&gt;&lt;p&gt;最后来看看根据相对收益率的追踪误差倒数以及趋势追踪策略得到的因子权重。乍一看，在这两种策略中因子的权重随时间变化的非常剧烈。但从本文第一节所示的五种因子的相对收益率表现来看，绿色代表的规模因子以及红色代表的成长因子效果最好。这两个因子在组合中的总权重一定程度上决定了组合的收益情况。对于这两个策略，这两个因子的总权重在整个回测区间基本也都在 40% 到 50% 之间，因此它们的净值走势和其它三种也非常接近。&lt;/p&gt;&lt;p&gt;&lt;b&gt;说完了表象，我们来谈谈本质。上面的结果到底意味着什么？&lt;/b&gt;&lt;/p&gt;&lt;p&gt;波动率的倒数配置策略与风险平价策略关注的都是因子&lt;b&gt;绝对收益率&lt;/b&gt;的波动。反观跟踪误差倒数策略以及趋势追踪策略，它们考量的均为因子&lt;b&gt;相对收益率&lt;/b&gt;的相关指标。&lt;b&gt;在构建单因子的投资组合时，我们在满足可投资性的前提下尽量的追逐投资组合在目标因子上的暴露；高的因子暴露意味着高的主动管理波动，即较大的跟踪误差。&lt;/b&gt;此外，&lt;b&gt;因子的表现存在周期性&lt;/b&gt;，在过去一段时间表现优秀的因子可能在未来就不那么突出。&lt;b&gt;基于相对收益率波动计算权重进行配置在自身波动较大的基础上又引入了因子表现不稳定这方面的误差&lt;/b&gt;，造成因子权重的变化非常剧烈，以及净值表现不敌基于因子绝对收益率波动配置的效果。&lt;/p&gt;&lt;p&gt;再来看看将多个因子配置在一起是否能够获得比单因子的收益风险比更高的组合。如下图所示，&lt;b&gt;五种配置方法都有效的较低了最大回撤，并显著提高了夏普率&lt;/b&gt;。很显然，&lt;b&gt;将多个因子配置在一起获得了更高的收益风险比&lt;/b&gt;。这个结果回答了本文第二节提出的第一个问题。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-c12c6f2097e7c50ca99375fd1c299d25_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;562&quot; data-rawheight=&quot;382&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-c12c6f2097e7c50ca99375fd1c299d25&quot; data-watermark-src=&quot;v2-b21b132dca331e30997677061c5e33eb&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;我们来回答文本第二节提出的后两个问题。首先可以看到，&lt;b&gt;纯粹被动的、静态的、不带有任何主观判断的简单多样化策略取得了非常好的配置效果&lt;/b&gt;。它的年化收益率在五种策略中排名第二，且最大回撤和平均回撤均最小，夏普率较波动率倒数和风险平价策略不相上下。这两种方法虽然通过主动判断提高了夏普率，但是改观非常有限。需要指出的是，在本实验中，我们没有特别重点的考察不同配置策略下换手率的差异程度。经验表明，带有主观判断的配置策略会造成因子权重的波动，这是不利于降低换手率的。从这个角度来看，&lt;b&gt;波动率倒数和风险平价策略对于夏普率的提高不一定能覆盖潜在的更高的交易成本&lt;/b&gt;。综合考虑我们认为简单多样化策略就足够优秀，可以胜任配置多个因子的重任。&lt;/p&gt;&lt;p&gt;最后，下图比较了简单多样化策略的净值曲线和五个风险因子净值曲线，通过将多个因子配置在一起，净值曲线变得更加平滑。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-91eda40b77ce4c8d4767dcaeffb811e4_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;556&quot; data-rawheight=&quot;406&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-91eda40b77ce4c8d4767dcaeffb811e4&quot; data-watermark-src=&quot;v2-6290019679da778c8c9b7cc8036d1451&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;h2&gt;&lt;b&gt;4 结语&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;本文以中证 500 指数的成分股为例，通过近 7 年的回测数据，比较了五种将多个风险因子配置在一起的策略。结果发现简单多样化是一种非常简单有效的策略，可以取得优秀的配置效果。当然，一些更复杂的动态配置方法，如风险平价以及基于波动率倒数的配置策略对于进一步提高夏普率有帮助，但是能否覆盖潜在高换手率带来的额外交易成本还有待进一步考察。&lt;/p&gt;&lt;p&gt;在投资实践中，如何配置多个因子完全取决于投资经理的自身判断。简单多样化策略赋予所有因子相同的权重且保持不变，它是一个纯被动且静态策略。其他策略则都加入了投资经理对因子效果的主观判断。如果投资经理对自己的判断和能力有信心，那么完全有可能通过动态配置取得更好的结果。当然，这绝不会很容易；至少从实证来看，四种常用的主观动态配置策略都无法有效的击败简单多样化。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-21-38340204</guid>
<pubDate>Thu, 21 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>写给你的金融时间序列分析：应用篇</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-21-38322638.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38322638&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b6857d5c1547296ce043d03ec060d3d1_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;1 书接前文&lt;/b&gt;&lt;/p&gt;&lt;p&gt;《写给你的金融时间序列分析》系列想通过一系列文章使读者&lt;b&gt;了解金融时间序列的特点、熟悉金融时间序列分析的目的、并使用线性但实用的时间序列分析模型对投资品收益率进行预测并以此制定量化投资策略。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在本系列之前的三篇文章中，我们以对收益率建模为目标，按部就班的解释了为实现这个目标所需要的每一块“积木”。作为回顾，这三篇文章的结构为：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38320827&quot;&gt;基础篇&lt;/a&gt;：&lt;/b&gt;介绍金融时间序列的特性和进行金融时间序列分析的目的；解释时间序列分析中的核心概念：自相关性。&lt;/li&gt;&lt;li&gt;&lt;b&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38321845&quot;&gt;初级篇&lt;/a&gt;：&lt;/b&gt;说明时间序列建模的过程；介绍时间序列分析中的最基本模型：白噪声和随机游走。&lt;/li&gt;&lt;li&gt;&lt;b&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38322333&quot;&gt;进阶篇&lt;/a&gt;：&lt;/b&gt;介绍时间序列分析中常用的线性模型：自回归模型、滑动平均模型、以及自回归滑动平均模型。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;本文是系列的最后一篇：应用篇。我们将利用 ARMA 对上证指数收益率序列建模，并以此产生交易信号、构建投资策略，以此展示时间序列分析在量化投资领域的应用。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 对时间序列模型预测的正确预期&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通过本系列之前的文章的介绍，我们已经知道，时间序列建模的目的是挖掘收益率序列的内在“特性”（自相关性），并在“该特性可以在未来重复”的假设下，对未来的收益率做判断。&lt;b&gt;如果我们想要根据这个收益率预测来构建交易信号&lt;/b&gt;——比如如果预测的收益率为正则买入；如果预测的收益率为负则空仓（因为不容易做空）——&lt;b&gt;那么就必须要对时间序列模型的预测效果有正确的认识。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;来看一个例子。下图是上证指数在 2017 年 4 月 24 日（含）之前 20 个交易日的收益率（注：为了建模，我们当然可以也应该使用更长的历史数据；这里为了绘图清晰仅显示 20 个历史交易日的数据）。那么一个时间序列模型对下一个交易日，即 2017 年 4 月 25 日，的收益率预测会是多少呢？该预测值会接近图中的点 1、2、3 或者 4 吗？&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-086cf99f06989d368312b9557555a1a2_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;693&quot; data-rawheight=&quot;539&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-086cf99f06989d368312b9557555a1a2&quot; data-watermark-src=&quot;v2-9ff8e7bb9f4a38e653bf05809a14230f&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;也许你已经注意到了，我故意挑选的这 4 个点都满足一个条件，就是她们的绝对值都大于 0.5%（其中 1 和 4 两个点的绝对值都高于 1%）。&lt;b&gt;±0.5% 或者 ±1% 的日收益率对于上证指数可以算是正常的取值，因此我们是否应该预期时间序列模型的预测值也有类似的量级呢？&lt;/b&gt;&lt;/p&gt;&lt;p&gt;事实上，如果我们用 1 年的历史数据来构建 ARMA 模型，并对 2017 年 4 月 25 日的收益率预测时，得到的预测值和它的 95% 的置信区间如下图所示（下图中，模型同时对 2017 年 4 月 25 日之后的 5 个交易日进行预测）。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ffdfadb0a15cd85c0670bc89f74d62a0_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;747&quot; data-rawheight=&quot;592&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-ffdfadb0a15cd85c0670bc89f74d62a0&quot; data-watermark-src=&quot;v2-12c4a295335a4e7c2b679278713d42f6&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;可以看到，收益率的预测值实际上非常接近 0%，远没有到达 ±0.5% 或者 ±1% 的量级。且它的 95% 的置信区间非常宽。这样的结果说明：&lt;/p&gt;&lt;p&gt;&lt;b&gt;当我们用较长的一段历史数据来对时间序列建模时，序列的内在自相关性相对于随机噪声来说非常微弱。模型能够解释的收益率的波动较随机噪声的波动来说微乎其微（上图中绿色的样本内拟合收益率和蓝色的实际收益率之间的残差很大很好的说明了这一点）。这样的结果就是，模型对于收益率的预测的绝对值将会非常接近 0，且该预测值的标准差会很大，造成很宽的置信区间。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果用白话来解释上面这一大段话那就是：&lt;b&gt;如果使用太长的历史数据建模，则序列中表现出来的自相关性非常微弱，时间序列建模“然并卵”。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;既然太长不行，那我们来看看少用点数据建模又如何。假如我们仅仅使用 10 个历史收益率数据建模，则预测结果如下：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-008743f844d1f655f7a863d9d80b413b_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;773&quot; data-rawheight=&quot;567&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-008743f844d1f655f7a863d9d80b413b&quot; data-watermark-src=&quot;v2-879f90aebf8ac1f648a69d47ec0b0dbb&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;这会我们看到，数据少了以后，拟合收益率和实际收益率更加接近；而预测出来的收益率似乎在量级上也更加符合我们 ±0.5% 或者 ±1% 的预期。但是，&lt;b&gt;对于这种预测结果我们敢相信吗？&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;当我们用很短的一段历史数据来对时间序列建模时，几乎“确定、一定以及肯定”的会发生过拟合。事实上，上面的模型是一个带有常数项的 AR(4) 模型，相当于用 10 个历史数据来确定 5 个模型的参数。过拟合的结果是，模型过分解读了样本内的随机扰动，以至于它对样本外数据的预测准确性会非常差（该模型在样本外有很大的方差）。我们无法肯定该模型捕捉到了多少收益率内在的特征，但可以肯定的是它刻画了样本内的很多无效噪声。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果用白话来解释上面这一大段话那就是：&lt;b&gt;如果使用太短的历史数据建模，则模型会过度关注样本内的随机扰动，因此时间序列建模依然“然并卵”。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;归根结底，ARMA 模型是一个统计建模的方法。因此和所有统计模型一样，它在预测的时候既有偏差又有方差。此外，收益率序列中含有大量的随机扰动，且频率越高扰动越强&lt;/b&gt;（比如日内高频数据比日数据的噪声更大；日数据比周数据的噪声更大）。这也为预测本身带来了巨大的困难。因此，在使用时有正确的预期就非常重要。&lt;/p&gt;&lt;p&gt;上面的分析说明，由于收益率的特殊性（特别是我们研究的 A 股收益率的特殊性），使用太长或者太短的数据建模都没什么太大的作用。但是，只要预期正确，这些困难仍然不妨碍我们来尝试一下。下面我们就用 ARMA 模型来为上证指数构建一个投资策略。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 基于 ARMA 模型的投资策略&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们的投资标的为上证指数。回测期为 2013 年 7 月 19 日到 2017 年 4 月 24 日。基于时间序列建模的交易策略如下：&lt;/p&gt;&lt;p&gt;&lt;b&gt;对于每一个交易日，使用之前的 60 个历史日收益率（相当于 3 个月）滚动构建 ARMA 模型，并对该日的收益率预测。在选择模型参数时，ARMA 的阶数 p 和 q 的取值范围均为 1 到 4，并根据 AIC 准则确定最优参数。如果收益率预测为正则在下一个交易日持仓；反之则空仓。不考虑交易成本。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;上述策略在回测期的净值和上证指数自身的净值比较如下图所示：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-41b7f28c127f773a0b6b8fc089570139_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;605&quot; data-rawheight=&quot;438&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-41b7f28c127f773a0b6b8fc089570139&quot; data-watermark-src=&quot;v2-0d0af20481e487383029092925362661&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;净值曲线的具体参数如下：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7ab4bbccdc7a634df727f3fa56ff9d44_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;502&quot; data-rawheight=&quot;273&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-7ab4bbccdc7a634df727f3fa56ff9d44&quot; data-watermark-src=&quot;v2-f0391d17106f49c7186c0a34dc0d3fa8&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;从结果上看，基于 ARMA 建模的策略似乎还不错：它较上证指数本身取得了更高的收益和更低的回撤，因此有更高的夏普率（当然，这部分“得益于”我们没有考虑交易成本）。从净值曲线图上不难发现 ARMA 模型对收益率的预测满足以下几点：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;预测较好的捕捉到了 2014 年底到 2015 年中旬的大牛市；&lt;/li&gt;&lt;li&gt;预测一定程度的躲过了 2015 年下半年开始到 2016 年初的几波下跌；&lt;/li&gt;&lt;li&gt;从 2016 年 3 月份开始，ARMA 模型的走势和基准指数接近。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;从 ARMA 的参数上不难解释出现上面结果的原因。下图是 ARMA 模型中的常数项随时间的变化。较 AR 或者 MA 部分的贡献，常数项（收益率的漂移率）的量级对收益率的预测贡献更大。显然，ARMA 模型在牛市时有显著为正的常数项，而在熊市的时候有显著为负的常数项。而自 2016 年 3 月开始，常数项接近 0 但是大部分时间仍然为证，这样的结果就是策略在大比例的时间中会持有上证指数，因此策略在这个时期的走势和指数接近。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-53788e6b31a22b7b0ccaef167388b55e_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;608&quot; data-rawheight=&quot;438&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-53788e6b31a22b7b0ccaef167388b55e&quot; data-watermark-src=&quot;v2-9bf09a9cb22d7298c855c3074ec689b3&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;b&gt;股灾 n.0 之后，随着监管的加强，除去随机扰动之后的收益率再难呈现大牛大熊市时的那种大幅波动。具有中国特色的 A 股生生变成了具有美国特色的美股（长期有一个正的小幅漂移率，此外就是随机扰动）。由于监管的变化，我国的股市已经悄然发生了结构性变化（regime change）。如果 A 股以后维持这种走势，那么最好的策略也许就是（量化）选股，即便是没有对冲的纯多头选股也大有可为。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 充满希望？长回测期内再看 ARMA 模型&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上面的结果也许让人感到时间序列分析在量化投资中是充满希望的。但正如本文第二节说明的那样，时间序列分析有其自身存在的问题，且股票的收益率（尤其是高频的收益率）预测这件事本身几乎没有什么规律可循。&lt;/p&gt;&lt;p&gt;如果我们将回测期从过去 4 年拉长到过去 11 年（即考虑过去的两个牛熊周期），结果会怎样的？下图是策略和基准指数的净值曲线。策略可谓令人大跌眼镜。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-c87fde736af4a2e4cae911c8e78c2f60_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;598&quot; data-rawheight=&quot;416&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-c87fde736af4a2e4cae911c8e78c2f60&quot; data-watermark-src=&quot;v2-c70e5bce77cf875cb80ffed7238fca6d&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在回测期内，在尚未考虑交易成本的前提下，策略就远远地跑输了指数。我们当然不能草草的下结论说 ARMA 模型没有用。但是这个结果也清楚的告诉我们，&lt;b&gt;如果想使用模型对收益率建模，我们必须对投资品和模型本身都非常了解，这样才能将二者较好的结合在一起、使模型尽可能的反应投资品的特点。如果仅仅是胡乱的尝试参数，结果往往是徒劳的。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 结语&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;作为系列的最终章，本文介绍了如何应用 ARMA 模型对上证指数收益率进行预测，并以此产生交易信号、构建交易策略。在上一篇最后，我们提出了这样一个问题：&lt;/p&gt;&lt;p&gt;&lt;b&gt;时间序列分析到底是纸上谈兵还是实战利器？&lt;/b&gt;&lt;/p&gt;&lt;p&gt;也许通过本文中简单的实证我们仍然无法确切的回答这个问题。但是，相信通过今天的文章，你能对时间序列建模的预测效果有一个正确的预期，这对于进一步使用预测结果至关重要。我们看到，在过去 4 年的回测期内，ARMA 模型还是取得了不错的结果。更进一步的，即便时间序列模型的预测的准确性不足以使它被独立的用于产生交易信号，它所传达的信息也能够为我们理解投资品本身提供一些启发。&lt;/p&gt;&lt;p&gt;此外，我们当然可以尝试使用更高级的时间序列分析模型，比如用 ARMA 模型预测收益率并结合 GARCH 模型预测收益率波动率。这会取得比单纯的使用 ARMA 模型更加优异的效果。在海外，有人使用 ARMA + GARCH 模型对标普 500 建模并取得了不错的效果（当然那和美股自身的长期慢牛且在股灾时又可以做空有一定关系）。虽然困难重重，但是新模型的提出为我们对收益率建模提供了更广阔的空间和前所未有的可能。&lt;/p&gt;&lt;p&gt;正如这世上没有完美的模型一样，交易中也没有常胜的策略。我们要做的是找到适合自己投资标的以及符合自己交易风格的策略。努力提升交易水平的过程，也正是我们拓宽知识面、历练心性、提高人生修为的过程。&lt;/p&gt;&lt;p&gt;（全系列完）&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-21-38322638</guid>
<pubDate>Thu, 21 Jun 2018 00:00:00 +0800</pubDate>
</item>
</channel>
</rss>
