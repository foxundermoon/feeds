<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
<title>川流不息</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/</link>
<description>北京量信投资管理有限公司是一家在中国基金业协会备案登记的专业私募基金管理人。本专栏作者石川是量信投资的联合创始人。希望通过这个平台和各位小伙伴分享我们在量化投资领域的知识和心得。原创不易，请保护版权，请在获得授权后转载。已委托“维权骑士”(http://rightknights.com) 为进行维权行动。</description>
<language>zh-cn</language>
<lastBuildDate>Fri, 29 Jun 2018 23:38:45 +0800</lastBuildDate>
<item>
<title>在追逐 p-value 的道路上狂奔，却在科学的道路上渐行渐远</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-29-38663777.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38663777&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a15c5ecc3970eb5bc0db7535205acb93_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;我之前读了美国金融协会（AFA，American Finance Association）前主席 Campbell Harvey 于 2017 年协会年会上做的题为《The Scientific Outlook in Financial Economics》的主席报告，感触颇深，醍醐灌顶。&lt;/p&gt;&lt;p&gt;以一个学者应有的科学态度和操守，Dr. Harvey 深刻剖析了近年来西方学术界在&lt;b&gt;收益率风险多因子模型&lt;/b&gt;研究中的一个错误趋势：&lt;/p&gt;&lt;p&gt;&lt;b&gt;为了竞逐在顶级期刊上发表文章，学者们过度追求因子在原假设下的低 p-value 值（即统计意义上“显著”）；不幸的是，由于有意或无意的数据操纵、使用不严谨的统计检验手段、错误地解释 p-value 传达的意义、以及忽视因子本身的业务含义，很多在功利心驱使下被创造出来的收益率因子在实际投资中根本站不住脚。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;学者们在追逐 p-value 的道路上狂奔，却在科学的道路上渐行渐远。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;我看完之后产生了深深的共鸣：难怪我在顶级期刊上以及卖方的研究报告中看到的很多因子，仅仅是在报告中“看起来有效”。在这个急功近利的时代，Dr. Harvey 大声呼吁学术界应该后退一步（take a step back），重新审视一下学术氛围和文化，真正做到以推动人们对金融经济学的正确认知为己任。这无疑是量化投资领域的福音。此外，Dr. Harvey 还提出了贝叶斯 p-value 的概念，它可以正确地评价因子的有效性。&lt;/p&gt;&lt;p&gt;本文就把这篇主席报告中的要点分享给大家。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;1 何为 p-value？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;先来看看什么是 p-value，以及它在因子分析中的作用。（本节内容是我加的。）&lt;/p&gt;&lt;p&gt;假设我们有一个因子 A，在学术界研究预测收益率的风险多因子模型时，一般的流程如下：&lt;/p&gt;&lt;p&gt;1. 首先提出&lt;b&gt;原假设（null hypothesis）：因子 A 对于解释股票（或者其他投资品）的超额收益没有作用。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;2. 使用因子 A 对股票的超额收益率进行统计分析，这时通常有两种做法：&lt;/p&gt;&lt;p&gt;  2a. 按照股票在因子 A 上的暴露大小把它们分成 10 份，然后统计每份中股票的平均收益率是否显著不为 0，显著性用 p-value 表示。&lt;/p&gt;&lt;p&gt;  2b. 使用历史数据对因子 A 和股票的超额收益进行回归分析，统计因子的系数（即线性回归的斜率）是否显著不为 0，显著性用 p-value 表示。&lt;/p&gt;&lt;p&gt;3. 比较上面分析得到的 p-value 是否小于给定的显著性水平，从而决定是否拒绝原假设。拒绝原假设意味着拒绝“因子 A 对解释股票的超额收益没有作用”。&lt;/p&gt;&lt;p&gt;可见，p-value 在上述过程中至关重要。p-value 是 probability value 的简称。&lt;b&gt;在统计检验中，假设统计模型对应的原假设是 H，该模型观测到的随机变量 X 的取值为 x，则 p-value 代表着在原假设 H 下随机变量 X 取到比 x 更加极端的数值的条件概率，即：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;对于右尾极端事件：p-value = prob(X ≥ x|H)；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;对于左尾极端事件：p-value = prob(X ≤ x|H)；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;对于双尾极端事件：p-value = 2 × min{ prob(X ≥ x|H), prob(X ≤ x|H)}。&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;&lt;i&gt;The null hypothesis is usually a statement of no relation between variables or no effect of an experimental manipulation. The p-value is the probability of observing an outcome or a more extreme outcome if the null hypothesis is true (Fisher 1925).&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;对于股票收益率因子模型领域，因为我们希望找到可以带来超额正收益的因子，所以 p-value 一般指的是上面第一种定义，即 p-value = prob(X ≥ x|H)。例如，当 p-value = 0.05 时，我们说在原假设 H 下观测到不小于 x 的超额收益的条件概率为 5%；当 p-value = 0.01 时，我们说在原假设 H 下观测到不小于 x 的超额收益的条件概率仅有 1%。&lt;b&gt;显然，p-value 越小说明在原假设 H 下观测到不小于 x 的超额收益的可能性越低，即发生“不小于 x 超额收益”这个事件和原假设 H 越不相符，我们越倾向于拒绝原假设。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;当“因子 A 对解释股票超额收益没有作用”这个原假设被拒绝时，人们便会推论出“因子 A 能够解释一部分股票的超额收益”。如此，&lt;b&gt;人们习惯把“p-value 越低”和“因子 A 在解释超额收益上越有效”等价起来了。这就是为什么我们都喜欢低的 p-value。但它们俩真的等价吗？&lt;/b&gt;别急，看完本文你自会有答案。&lt;/p&gt;&lt;p&gt;&lt;b&gt;低的 p-value 仅仅是某个因子有效的必要条件；但是它远不是充分条件。有意或者无意的数据操纵（data manipulation）以及不完善的统计检验所得到的低的 p-value 在说明因子是否有效方面毫无作用。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 在追逐 p-value 的道路上狂奔&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;好了，现在我们已经知道了 p-value 在因子模型中的作用：要想说明某个因子有效，最起码得有个低的 p-value；否则免谈。&lt;b&gt;在这种暗示下，学术界便自上而下的刮起了一股追求超低 p-value 之风。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;以下就是因子模型 p-value 在学术界的因果关系链：&lt;/p&gt;&lt;p&gt;&lt;b&gt;“p-value 越低意味着因子越显著。&quot; -&amp;gt; “因子越显著，研究成果越吸引眼球。” -&amp;gt; “成果越吸引眼球越有可能得到更高的引用。” -&amp;gt; “高引用的文章越多，期刊的影响因子越高。” -&amp;gt; “期刊的影响因子越高，期刊的学术声望越高。”&lt;/b&gt;&lt;/p&gt;&lt;p&gt;为了提升期刊的声望，编辑们都更倾向于录用低 p-value 因子的文章；为了在更高水平的期刊上发文，学者们更倾向于找到低 p-value 的因子。在美国绝大多数学校里，如果能在 Journal of Finance 发表一篇文章，一个教授就有可能得到终身教职（tenure）。&lt;/p&gt;&lt;p&gt;在如今的金融经济学领域，这样的做法无奈的导致了一种&lt;b&gt;发表偏差（publication bias）&lt;/b&gt;：学者们更愿意把时间和精力花到可以利用各种手段来找到低 p-value 的因子上，只愿意发表“看上去最显著”的研究成果。他们不愿意冒险来研究“无效的因子”。&lt;/p&gt;&lt;p&gt;&lt;b&gt;从推动学科发展的角度，“无效的因子”和“有效的因子”同样重要。&lt;/b&gt;如果我们能够确切的证明某个因子就是无法带来超额收益，那么它对实际中选股也是非常有价值的（我们可以放心的避开该因子）。然而，在追求超低 p-value 之风下，学者不愿意进行这样的研究，因为顶级期刊上鲜有它们的容身之处。&lt;/p&gt;&lt;p&gt;下图出自 Harvey, Liu, and Zhu (2016)。他们分析了 1963 年到 2012 年间发表在金融领域最顶级期刊上的 300 多个因子模型的 t-statistic（可以简单的理解为 p-value 越低，其对应的 t-statistic 越高）的分布情况。这个分布清晰地说明了学术界的发表偏差。比如，t-statistic 取值在 2 到 2.57 的文章数和 t-statistic 取值在 2.57 到 3.14 的文章数十分接近。要知道，t-statistic = 2.57 对应的 p-value 大概是 0.005；而 t-statistic = 3 对应的 p-value 则是 0.001！显然，找到 p-value = 0.001 的因子要比找到 p-value = 0.005 的因子要困难得多，但它们的文章数量却大致相当。这只能说明在顶级期刊发表文章时，学者们倾向于更低的 p-value。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-187a8f736cdfb1dd0125bb80a2f10481_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;921&quot; data-rawheight=&quot;691&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-187a8f736cdfb1dd0125bb80a2f10481&quot; data-watermark-src=&quot;v2-e66ce387ccf6bd618b96ddf9faa56c2a&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;h2&gt;&lt;b&gt;3 “硬科学”与“软科学”&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;看到这里，人们不禁要问怎么会有这么多低 p-value 的因子？这可以从“硬科学”和“软科学”的角度来解释。&lt;/p&gt;&lt;p&gt;法国著名的哲学家奥古斯特 • 孔德将科学分成不同的等级（Comte 1856）。像数学、物理这类的“硬科学”位于等级的上方，而社会学（包括今天所说的经济学或者哲学）这类“软科学”位于等级的下方。&lt;b&gt;千万不要误解，这里“硬”和“软”并不是“好”与“坏”之分。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;在“硬科学”中，人的痕迹几乎可以不存在，从数据可以直接得到结论、无需任何人工解释，且结论是高度可归纳的。&lt;/b&gt;比如数学上的四色问题，一旦证明成立那就是成立；又如物理上的引力波，一旦发现那就是说明它的存在，这些都是确切的。&lt;b&gt;反观“软科学”中，人的痕迹便会更加明显，研究成果依赖于提出怎样的假设，如何处理数据，以及如何分析、解释结果。这些都和研究者自身的声望、利益、个人偏好有关，因此结果往往是无法归纳的。&lt;/b&gt;金融学中的多因子模型无疑是软科学，因子选取、原假设的构建、以及数据分析都会因人而异。&lt;/p&gt;&lt;p&gt;比如“使用过去 50 年的数据还是过去 30 年的数据？”“使用美股还是其他国家的股票？”“使用日收益率还是周收益率？”“使用百分比收益率还是对数收益率？”“是否以及如何剔除异常值？”“使用线性回归还是逻辑回归？”“使用截面回归还是时间序列回归？”“因子对 500 个公司有效但是对 1000 个公司无效，因此发文时仅提及那 500 个公司。”……在追逐超低 p-value 的背景下，学者在面临这些选择做决定时会“非常微妙”，一切阻碍超低 p-value 诞生的数据都会被巧妙的避开。&lt;b&gt;Dr. Harvey 将为了追求超低 p-value 而在因子研究中刻意选取的数据处理方法称为 p-hacking。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在科学研究中，我们往往先观察事物是如何运作的，然后提出一个假设并通过数据来验证其是否成立，可谓“先有假设再有结果”。&lt;b&gt;然而，p-hacking 却可能使我们本末倒置，“先有结果再有假设！”（Hypothesizing after the results are known，称为 HARKing）。&lt;/b&gt;比如我们的假设是变量 Y 和 X1 相关。为此我们设计了一个实验，并控制了 X2 到 X10 其他 9 个变量，来考察 Y 和 X1 的关系。但是实验结果表明 Y 却和 X7 相关。因此，我们就会&lt;b&gt;轻易地（不负责任地）&lt;/b&gt;把假设改为“Y 和 X7 相关”，而忘记了研究的初衷。由于数据分析的成本很低，HARKing 在因子模型研究中非常普遍。&lt;/p&gt;&lt;p&gt;所有这一切对超低 p-value 的追逐都源于人们的一个&lt;b&gt;误解：“p-value 越低”等价于“因子 A 在解释超额收益上越有效”。&lt;/b&gt;下面来看看 p-value 到底意味着什么。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 正确认识 p-value 的含义&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;人们对 p-value 的正确含义充满了误解。&lt;/b&gt;为了说明这一点，Dr. Harvey 给出了一个假想的例子。假设一个选股因子为董事会的规模。由此我们把上市公司分为两类：小型董事会的公司和大型董事会的公司。原假设 H 是：董事会规模与超额收益无关。比较这两类股票的收益率均值，我们得到该因子的 p-value 小于 0.01。那么，下面 4 种关于 p-value 的陈述哪些是正确的呢（原文中是 6 个陈述，为了简化讨论这里只包含其中 4 个）？&lt;/p&gt;&lt;ol&gt;&lt;li&gt;我们证明了原假设是错误的。&lt;/li&gt;&lt;li&gt;我们找到了原假设为真的概率，即 prob(H|D)。&lt;/li&gt;&lt;li&gt;我们证明了小型董事会的公司比大型董事会的公司有更高的超额收益。&lt;/li&gt;&lt;li&gt;我们可以推断出“小型董事会的公司比大型董事会的公司有更高的超额收益”为真的概率，即 prob(H^c|D)。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;怎么样？你觉着上面四个陈述中有几个是正确的？答案是：&lt;b&gt;它们都是错的&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;p-value 代表着原假设下观测到某（极端）事件的条件概率。以 D 代表极端事件，则 p-value = prob(D|H)。&lt;b&gt;从它的定义出发，p-value 不代表原假设或者备择假设是否为真实的。&lt;/b&gt;因此，上述中的 1 和 3 都是错的。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;P-value is a statement about data in relation to a specified hypothetical explanation, and is not a statement about the explanation itself.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：P-value 是关于数据和指定假设之间关系的陈述；而非关于假设本身的陈述。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;再强调一遍：p-value 是原假设 H 成立下，D 发生的条件概率，即 prob(D|H)；它不是 prob(H|D)，即 D 发生时 H 为真的条件概率。&lt;/b&gt;因此 2 也是错的。同理，p-value 也和 p(H^c|D)——H^c 代表备择假设——没有任何关系，因此 4 也是错的。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;prob(D|H) ≠ prob(H|D)&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;prob(D|H) ≠ prob(H|D)&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;prob(D|H) ≠ prob(H|D)&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;在这个例子中，最重要的信息就是 p-value 等于 prob(D|H)；而人们往往把它和 prob(H|D) 混淆，这是因为我们太想知道 prob(H|D) 了，因为它告诉我们原假设 H 在 D 发生时为真的条件概率。然而 p-value 不等于它。把 prob(D|H) 当成 prob(H|D) 是一个非常严重的错误。&lt;/b&gt;来看一个形象的例子（出自 Carver 1978）：&lt;/p&gt;&lt;p&gt;定义两个事件：人死了，记为 D；人上吊，记为 H。那么，prob(D|H) 表示人因为上吊而死的概率。这个概率可能是很高的，比如 0.97。让我们把 D 和 H 的位置调换一下，即 prob(H|D)，则问题变成了在人死了的前提下，他是因为上吊而死的条件概率。怎么样？在这个问题中，因为我们知道人的死法有很多种，比如上吊、跳楼、服毒、割腕……我们不会将 prob(D|H) 的取值等价于 prob(H|D) 而脱口而出 0.97。在这个问题中，&lt;b&gt;prob(D|H) ≠ prob(H|D)&lt;/b&gt; 显而易见。然而当我们解释因子分析的 p-value 时，却总绕不过弯，总将它俩混为一谈。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-9344cff2f08451fb1a1fc400950f5d68_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;532&quot; data-rawheight=&quot;512&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-9344cff2f08451fb1a1fc400950f5d68&quot; data-watermark-src=&quot;v2-828329dbb587abeb72925d6a0dbc8ea4&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;最后，来看美国统计协会（American Statistical Association）关于 p-value 的 6 个准则（Wasserstein and Lazar 2016）：&lt;/p&gt;&lt;blockquote&gt;&lt;b&gt;&lt;i&gt;1. P-values can indicate how incompatible the data are with a specified statistical model.&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;i&gt;译：P-value 可以表示数据和给定统计模型的不兼容程度。&lt;/i&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;2. P-values do not measure the probability that the studied hypothesis is true, or the probability that the data were produced by random chance alone.&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;i&gt;译：P-value 不表示所研究的假设为真的概率；同时，它也不表示数据仅由随机因素产生的概率。&lt;/i&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;3. Scientific conclusions and business or policy decisions should not be based only on whether a p-value passes a specific threshold.&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;i&gt;译：科学结论和商业或政策决策不应只根据 P-value 是否通过给定的阈值而确定。&lt;/i&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;4. Proper inference requires full reporting and transparency.&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;i&gt;译：全面的分析报告和完全的透明度是适当的统计推断的必要前提。（这说的就是要摒除 p-hacking 的问题。）&lt;/i&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;5. A p-value, or statistical significance, does not measure the size of an effect or the importance of a result.&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;i&gt;译：P-value 或统计上的重要性并不能衡量效用的大小或结果的重要性。（这是我们通常说的统计上显著未必具有重要的经济意义——economic significance）&lt;/i&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;6. By itself, a p-value does not provide a good measure of evidence regarding a model or hypothesis.&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;i&gt;译：关于模型或者假设是否有效，p-value 本身并不提供足够的证据。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;相信上面这 6 点一定会帮助我们更好的理解 p-value 的意义。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 失真的 p-value&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;如前所述，p-value 用来说明某种效用（effect）是否在统计上显著（因子可以解释股票的超额收益率就可以理解为一种效用）。&lt;b&gt;当待检验的效用非常罕见时，统计检验得到的 p-value 往往是失真的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在医学中，这样的例子屡见不鲜。假设我们要测试一种罕见的疾病（疾病就是效用，罕见说明它本身出现的概率非常低）。原假设就是病人没有得病。&lt;/p&gt;&lt;p&gt;假设这种疾病的发病率为 1%。我们使用某种测试手段对 1000 名志愿者进行筛查。该测试手段的正确率为 90%（即对于确实患病的患者，该测试结果为阳性的概率为 90%）；此外，该测试手段的误诊率为 10%（即，对于没有得病的志愿者，它误诊为阳性的概率为 10%）。&lt;/p&gt;&lt;p&gt;根据 1% 的发病率和 1000 名志愿者，我们假设他们中间有 10 名真正患者和 990 名正常。对于这 10 名患者，该检测手段成功的找到 9 名患者；而对于剩下 990 名非患者，它误诊了 99 名。因此，一共有 108 名志愿者被诊断为患病，但其中仅有 9 名是真正的患者。换句话说，这个测试的 false discovery rate 高达 92% (= 99 / 108)，远高于该测试手段 10% 的误诊率。&lt;/p&gt;&lt;p&gt;&lt;b&gt;在统计检验中，false discovery rate 是伪发现率，其意义为错误拒绝（拒绝真的原假设）的个数占所有被拒绝的原假设个数的比例的期望值。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;上述讨论对金融经济学有什么启示？&lt;b&gt;这里的核心是，如果一个效用本身越不可能发生，我们越要小心，因为会有大量的 false discoveries。&lt;/b&gt;令 π 代表在现实中我们找到一个真实因果关系的概率（即一个真实的因子），α 代表原假设为真时的显著性水平，β 表示备择假设为真时检验正确的拒绝原假设的概率。从上面这个例子中可以归纳出，由于效用的罕见性，我们能够预期的 false discovery rate 等于：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\frac{\alpha}{\frac{\pi}{1-\pi}\beta+\alpha}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;当 β = 1 时，上述 false discovery rate 有理论的最小值。当找到真实因子的概率很低时，π 相对于 α 很低，该 false discovery rate 近似为 1。&lt;b&gt;因此，如果发现有效因子本身这件事是一个极小概率事件，则无论我们得到了多低的 p-value，我们的伪发现率（false discovery rate）也是非常高的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;不幸的是，发现真实有效的因子本身就是一个极小概率事件。因此，大量发表于顶级期刊上的收益率因子都会在将来被证伪。&lt;/b&gt;Bartsch et. al. (2017) 就提供了这样的证据。他们采用了一个多重检验框架，检验了学术界的 100 个收益率预测模型，得到的结论是&lt;b&gt;模型中的预测能力全部来自数据迁就（data snooping，即 p-hacking），这些模型在新测试框架下的预测准确性均无法战胜历史均值。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 先验的重要性，做贝叶斯的信徒&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上一节的论述传递出一个重要的观点：&lt;b&gt;我们需要对效用本身发生的概率（例如找到真实收益率因子的概率）有一个正确的先验判断，并用它和 p-value 一起计算出一个后验概率，并以此判断是否应该拒绝原假设。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在生活中，先验概率对于我们判断一个效用是否真的有效至关重要。来看下面三个例子。&lt;/p&gt;&lt;p&gt;第一个例子：有一个音乐家声称可以完美的区分莫扎特和海顿的乐谱。我们将 10 张乐谱给他辨识，他全部正确。第二个例子：有一个常年喝茶的老妇人，她声称可以说出一杯加了奶的热茶中，奶是先于茶还是后于茶加入杯中的。同样，我们将 10 杯请她辨识，她全部正确。第三个例子：有一个酒馆老板，号称酒精赐予他预测未来的神力。我们让他猜扔硬币的正反面，结果他也是 10 次全对。&lt;/p&gt;&lt;p&gt;在这三个实验中，p-value 都远低于 0.001（ 2 的 -10 次方）。&lt;b&gt;然而同样的 p-value 在这三个例子中带给我们的认知却截然不同。&lt;/b&gt;在第一个例子中，我们知道对方是一个音乐家，他分辨乐谱应该易如反掌。我们的先验信仰就是他能够成功，实验的结果只不过确认了这一点。在第二个例子中，我们也许心存怀疑（先验），不相信老妇人能够成功（原假设是她没有分辨奶加入茶杯顺序的能力），然而 10 次全对（超低 p-value）的结果让我们倾向于推翻自己的先验认知，即拒绝原假设，并认为她确实有这个能力。在第三个例子中，我们会认为这个人就是骗子（酒精能够预测未来？），因此打从心底完全不屑（原假设是酒精不能预测未来），在这种情况下，即便他猜对了 10 次，我们也不会推翻原假设（因为“酒精能够预测未来”这件事的先验概率太低了），而仅仅认为他是运气好罢了。&lt;/p&gt;&lt;p&gt;怎么样，从这三个例子中看出先验在解读 p-value 时起到的作用了吗？这就是贝叶斯框架的强大之处。&lt;/p&gt;&lt;p&gt;&lt;b&gt;Dr. Harvey 将传统的 p-value 嵌入到贝叶斯框架中，提出了贝叶斯化 p-value（Bayesianized p-value）的概念，它是一个后验概率。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;贝叶斯化 p-value 由最小贝叶斯因子（minimum Bayes factor，MBF）和先验概率（prior odds）构成。&lt;/b&gt;贝叶斯因子是在原假设下观测到效用的似然性与在备择假设下观测到效用的似然性之间的比值。由于备择假设中，效用的概率分布未知，因此贝叶斯因子的取值有个范围。这个范围的下限就称为最小贝叶斯因子。&lt;b&gt;它代表着贝叶斯框架下，我们拒绝原假设的倾向性（MBF 越小，我们越倾向拒绝原假设）。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;具体的，后验贝叶斯化 p-value 的表达式如下：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\mbox{Bayesianized $p$-value}=\frac{\mbox{MBF}\times\mbox{prior odds}}{1+\mbox{MBF}\times\mbox{prior odds}}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中，MBF 的计算方法有两种，分别根据统计检验中的原始 p-value 和其对应的 t-statistic 求出。以下仅给出具体表达式，而不去探讨具体数学细节。&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rll} \mbox{MBF}&amp;amp;=&amp;amp;-\exp(1)\times \mbox{$p$-value}\times\ln(\mbox{$p$-value})\\ \mbox{MBF}&amp;amp;=&amp;amp;\exp(\mbox{$-t$-statistic}^2/2) \end{array}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;贝叶斯 p-value 的强大之处在于，它是一个后验概率，它回答了那个我们真正关心的问题：&lt;b&gt;在（极端）事件发生的前提下，原假设为真的条件概率是多少，即我们梦寐以求的&lt;/b&gt; &lt;b&gt;prob(H|D)。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;使用后验贝叶斯 p-value，Dr. Harvey 对学术界的一些知名因子进行了分析（下表）。具体的，他考虑了三类不同的先验情况：a stretch（罕见的，假设因子有效的先验概率为 2%），perhaps（有可能，假设因子有效的先验概率为 20%），solid footing（业务基础扎实，假设因子有效的先验概率为 50%）。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ea6f9f04501282377174952cb0cb65b8_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;928&quot; data-rawheight=&quot;460&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-ea6f9f04501282377174952cb0cb65b8&quot; data-watermark-src=&quot;v2-edfbe41458ab37d94d71b677088b532f&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在第一类（a stretch）中，考察的因子叫 clever tickers（可以理解为聪明的股票代码），即有些股票代码比另一些更让投资人喜欢，因此这些股票有超额收益（这一听就不靠谱）。在贝叶斯框架下，其后验贝叶斯 p-value 为 0.836，这意味着该因子对解释超额收益完全没有作用。值得一提的是，在研究出该因子的文章中，它的 p-value 可是仅有 0.0079，暗示着 clever tickers 用来选股能获得超额收益。&lt;b&gt;贝叶斯框架完美的逆转了这个错误的结论。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在第二类（perhaps）中，考察的因子是 Fama 和 French 提出的盈利因子和规模因子。在原著中， Fama 和 French 的研究显示这两个因子都有超低的 p-value。然而，它们的后验 p-value 分别为 0.117 和 0.332。其中，盈利因子的后验 p-value 仍然比较低（虽然比原著中的高很多），但是规模因子的后验 p-value 却很大，说明它不能很好的解释超额收益。&lt;/p&gt;&lt;p&gt;在第三类（solid footing）中，考察的因子是市场因子。它的后验 p-value 为 0.111（在另一种 MBF 的计算方式下，其后验 p-value 更是仅有 0.035）。这说明市场因子确实是一个能够解释股票超额收益的因子。这也完全符合人们的预期。&lt;/p&gt;&lt;p&gt;这三个例子完美的说明了当我们有一个手段来回答正确的问题时（即 prob(H|D)），我们能够得到更加有效的结论。&lt;b&gt;解释股票超额收益率的因子不是不存在，但他们应该非常稀有，数量远远少于顶级期刊上刊登的那些伪因子。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;7 科学的愿景，研究应该能被复现&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在过去的 10 年、20 年里，金融经济学领域的学者们都在追逐 p-value 的道路上狂奔。然而，这么做的结果是人类在科学的道路上渐行渐远。&lt;/p&gt;&lt;p&gt;科学研究的目标是为了推动人们对该学科的理解。&lt;b&gt;为了实现它，我们应该确保所有的发现——不管是有效因子还是无效因子——都是可以复现的，成果应该是可以被其他学者复制的。&lt;/b&gt;这意味着，在摒除了所有 p-hacking 的数据操纵之后，一个因子的效用仍然经得起考验，并且它在样本外也同样有效（或同样无效）。&lt;/p&gt;&lt;p&gt;在顶级期刊中，只有 Journal of Finance 要求被录用的文章提供计算机代码；没有任何一个期刊要求作者提供数据（所以很多 p-hacking 的行为根本无法被发现）。可喜的是，最近一个新的期刊 Critical Finance Review 做了很多工作，正逐渐使成果能够被复现成为学术界的主流。&lt;/p&gt;&lt;p&gt;&lt;b&gt;不论是什么领域，如果一篇学术论文提出的模型和得出的结论不能被其他学者或业界复现，那发表这样的文章就无异于耍流氓。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;我曾经联系过多篇文章的作者，提及被他们文章中因子的表现所震撼、想要自己在样本外复现他们的发现，因此询问一些数据和程序上的细节。但是这样的文章几乎全部石沉大海。唯一良心的回复是“当年的代码写的很乱，可读性已经很差了”。我想，大概这些作者也根本无法再现它们当时取得的神奇结果吧。&lt;/p&gt;&lt;p&gt;&lt;b&gt;除此之外，学术界和顶级期刊应该鼓励学者们尝试“高风险”的研究项目。&lt;/b&gt;“高风险”意味着学者需要费时费力费金钱以收集和处理数据，且得到的结论不一定显著（没有令人称奇的 p-value）。但是，这样的研究成果才是最根本的，才是真正能够推动金融经济学阔步向前的创造性工作。&lt;/p&gt;&lt;p&gt;金融经济学的科学前景深深的植根于学术界的研究和发表环境中。不可否认，如今学术界的研究质量仍然是很高的。但是本文提出的问题不关乎当下，而是着眼于未来。为了保证金融经济学的发展，学者们应该时刻保持学者的操守，并创造一个健康的研究氛围。不要试图寻找捷径，而是脚踏实地的走曲折的道路，无论荆棘与坎坷。不忘初心，砥砺前行，金融经济学的科学前景势必一片光明。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Bartsch, Dichtl, Drobetz, and Neuhierl (2017). Data Snooping in Equity Premium Prediction. Available at SSRN: &lt;a href=&quot;https://ssrn.com/abstract=2972011&quot;&gt;https://ssrn.com/abstract=2972011&lt;/a&gt;&lt;/li&gt;&lt;li&gt;C. R. Harvey (2017). Presidential Address: The Scientific Outlook in Financial Economics. &lt;i&gt;AFA 2017 Annual Meeting&lt;/i&gt;.&lt;/li&gt;&lt;li&gt;Carver (1978). The case against statistical significance testing. &lt;i&gt;Harvard Educational Review&lt;/i&gt;, 48, 378 – 399.&lt;/li&gt;&lt;li&gt;Comte (1856). The Positive Philosophy of Auguste Comte, translated by Harriett Marineau (Calvin Blanchard, New York). Vol. II.&lt;/li&gt;&lt;li&gt;Fisher (1925). Statistical Methods for Research Workers. Oliver and Boyd Ltd, Edinburgh.&lt;/li&gt;&lt;li&gt;Harvey, Liu, and Zhu (2016). … and the cross-section of expected returns. &lt;i&gt;Review of Financial Studies&lt;/i&gt;, 29(1), 5 – 68.&lt;/li&gt;&lt;li&gt;Wasserstein and Lazar (2016). The ASA&#39;s Statement on p-Values: Context, Process, and Purpose. &lt;i&gt;The American Statistician&lt;/i&gt;, 70(2): 129 – 133&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;原创不易，请保护版权。如需转载，请联系获得授权，并注明出处，谢谢。已委托“维权骑士”(&lt;a href=&quot;http://rightknights.com&quot;&gt;维权骑士_领先的原创内容监测、保护及快速授权平台&lt;/a&gt;) 为进行维权行动。&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-29-38663777</guid>
<pubDate>Fri, 29 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>收益率预测的贝叶斯收缩</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-28-38614373.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38614373&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-ab0b3c0550215bdc0dc49a31af764ddf_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;从微信公众号到知乎专栏的搬砖还在继续，这是一篇我在 2016 年写的老文。。。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;1 预测收益率&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;投资品的收益率预测在资产配置中格外重要。马科维茨的现代资产配置理论之所以在实际中被专业投资机构诟病就是因为它虽然简单，但却是建立在非常“严苛”的假设下：即待配置的投资品的收益率的期望和方差是已知的（即可以预测的）。&lt;b&gt;一旦预测的数值非常离谱，那么资产配置效用的最大化就变成误差的最大化。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在收益率期望和方差中，期望的预测比方差（以及不同投资品之间的协方差）的预测更加重要。&lt;b&gt;Chopra and Ziemba（1993）的研究表明，收益率期望的误差对资产配置的影响比收益率方差（以及协方差）的影响高一个数量级。&lt;/b&gt;可见，收益率期望的预测是最关键的。然而，欧美大量学术界和业界的研究表明，收益率期望的预测是非常困难的。但是，前赴后继的学术研究也逐渐证明，使用贝叶斯框架来进行收益率期望的预测能取得不错的效果。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 天平的两端&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;2.1 多因子模型&lt;/b&gt;&lt;/p&gt;&lt;p&gt;多因子模型的核心就是选择一些合适的因子、并把投资品的收益率看成这些因子的线性函数。然后利用线性回归确定因子的参数。这样当因子有了最新的数值后，就可以利用得到的线性方程得到投资品收益率的预测。&lt;/p&gt;&lt;p&gt;最简单的多因子模型就是夏普的资本资产定价模型 CAPM（Sharpe 1964）。该模型以市场组合的（超额）收益率为因子，把单个投资品的（超额）收益率描绘为该因子的线性方程，单个投资品对该因子的暴露就是众人皆知的 beta，即系统风险系数。这个模型由于只有一个因子，因此是个单因子模型（多因子模型的特例）。而在 CAPM 之后，最著名的多因子模型就是法玛-佛伦奇三因子模型（Fama and French 1992），该模型在 CAPM 的基础上引入市值和市净率两个因子对投资品的收益率进行建模。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-e23336022936da54e5aa49ab4891bb17_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;531&quot; data-rawheight=&quot;325&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-e23336022936da54e5aa49ab4891bb17&quot; data-watermark-src=&quot;v2-fc019b53902662abaeca5f42744143a9&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;多因子模型的优点是每个因子都有很强的业务解释。由于它们从业务出发，因此有一定的预测性。此外，由于所有的投资品都通过相同的业务因子进行预测，&lt;b&gt;因此多因子模型具有很强的结构性。&lt;/b&gt;然而，多因子模型的缺点是，模型中的有限个因子无法解释投资品收益率面对的所有风险；它们只能解释自身业务对应的风险。因此，多因子模型的预测是&lt;b&gt;有偏的（biased）&lt;/b&gt;，是以忽略一部分无法解释的风险为代价的。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;多因子模型对收益率期望的预测有一定的预测性以及很强的结构性、但它是有偏的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;2.2 基于历史数据的统计模型&lt;/b&gt;&lt;/p&gt;&lt;p&gt;顾名思义，基于历史的统计模型就是利用投资品的历史数据求出样本均值，并以该均值作为未来收益率均值的预测。例如，我们可以用过去 26 期周收益率数据的均值当做下周周收益率均值的预测。由于每个投资品的预测只用到自己过去的历史数据，因此这个模型是无结构性的（它相当于每个投资品自成一个因子）。此外，&lt;b&gt;基于历史数据的预测是无偏的（unbiased）&lt;/b&gt;，它可以反应每个投资品所暴露的所有风险。但是，大量的研究和投资实践证明，投资品的历史收益率和未来收益率之间没有太多必然的联系。换句话说，历史数据均值对未来收益率均值的预测性较差。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;基于历史数据的统计模型对于收益率期望的预测有如下特点：无偏性、无结构性、低预测性。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;这两个模型的优缺点总结如下。可见它们优劣势互补，相当于站在天平的两端。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d2b36687613645275944415a560d2df6_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;671&quot; data-rawheight=&quot;343&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-d2b36687613645275944415a560d2df6&quot; data-watermark-src=&quot;v2-ed1f6f6367a8576399801a068557faaf&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;h2&gt;&lt;b&gt;3 贝叶斯收缩&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;既然这两种方法各有千秋，一个自然的想法就是能否把它们结合一下，得到更加有效的收益率期望预测。在这方面，&lt;b&gt;贝叶斯收缩（Bayes shrinkage）&lt;/b&gt;是一个强有力的工具（Jorion 1986，Harvey et. al. 2008）。&lt;/p&gt;&lt;p&gt;贝叶斯收缩以多因子模型得出的收益率作为&lt;b&gt;先验（prior）&lt;/b&gt;，以实际收益率（历史数据）作为&lt;b&gt;新的观测值（observation）&lt;/b&gt;，计算出收益率均值的&lt;b&gt;后验（posterior）&lt;/b&gt;作为最终预测。&lt;/p&gt;&lt;p&gt;形象的说，该方法结合了两种方法，&lt;b&gt;以最优的比例使基于历史数据的预测向基于多因子模型的预测“收缩”&lt;/b&gt;。这个最优的比例使得预测的期望误差最小。&lt;b&gt;贝叶斯收缩相当于给历史收益率数据提供了多因子模型能提供的额外有效信息&lt;/b&gt;，从而得到更加有效的预测。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ab0b3c0550215bdc0dc49a31af764ddf_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;499&quot; data-rawheight=&quot;300&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-ab0b3c0550215bdc0dc49a31af764ddf&quot; data-watermark-src=&quot;v2-23868113b9d2e564b931f54acde405ae&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;当然，我们也不一定非要用多因子模型的预测做先验，可以通过其他的方法，比如 Black-Littlerman 模型，其本质也是一个收益率的贝叶斯收缩（见&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38282835&quot;&gt;Black-Litterman 模型 —— 贝叶斯框架下的资产配置利器&lt;/a&gt;）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;最后，这个“收缩”的思路也可以推广到投资品协方差矩阵的预测（Ledoit and Wolf 2003）。&lt;/b&gt;此外，无论是单一投资品自己收缩还是多个投资品一起收缩，学术界都有非常多的研究、取得了丰富的成果。下一次我再找个机会介绍一下协方差矩阵的贝叶斯收缩。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Chopra, V. K. and W. T. Ziemba (1993). The effort of errors in means, variances, and covariances on optimal portfolio choice. &lt;i&gt;Journal of Portfolio Management&lt;/i&gt;, 19(2), 6 – 11&lt;/li&gt;&lt;li&gt;Fama, E. F. and K. R. French (1992). The cross-section of expected stock returns. &lt;i&gt;Journal of Finance&lt;/i&gt;, 47(2), 427 – 465&lt;/li&gt;&lt;li&gt;Harvey, C. R., J. C. Liechty, M. W. Liechty (2008). Bayes vs. resampling: a rematch. &lt;i&gt;Journal of Investment Management&lt;/i&gt;, 6(1), 1 – 17&lt;/li&gt;&lt;li&gt;Jorion, P. (1986). Bayes-Stein estimation for portfolio analysis. &lt;i&gt;The Journal of Financial and Quantitative Analysis&lt;/i&gt;, 21(3), 279 – 292&lt;/li&gt;&lt;li&gt;Ledoit, O. and M. Wolf (2003). Improved estimation of the covariance matrix of stock returns with an application to portfolio selection. &lt;i&gt;Journal of Empirical Finance&lt;/i&gt;, 10, 603 – 621&lt;/li&gt;&lt;li&gt;Sharpe, W. F. (1964). A theory of market equilibrium under conditions of risk. &lt;i&gt;Journal of Finance&lt;/i&gt;, 19(3), 425 – 442&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-28-38614373</guid>
<pubDate>Thu, 28 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>塞勒和他的心理账户理论</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-28-38610013.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38610013&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ee4591d374694d5e53649adadee98af0_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;i&gt;I will try and spend it as irrationally as possible.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：我将会尽量将它[诺贝尔奖金]非理性地花掉。&lt;/i&gt;&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;1 引言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上面这句话是 2017 年新科诺贝尔经济学奖获得者理查德 • 塞勒（Richard H. Thaler）被记者问到将会如何花掉诺贝尔奖金时给出的答复。这句不起眼的回答是塞勒式幽默的充分体现，更是对他的心理账户理论的完美诠释。&lt;/p&gt;&lt;p&gt;塞勒因其的对行为经济学的杰出贡献获得 2017 年的诺贝尔经济学奖，而心理账户理论就是他几大贡献中最卓越的一个。在人们的消费决策中，有很多行为无法被传统的经济学理论解释。这些行为激发了塞勒的研究并提出心理账户理论，它可以有效的解释人们在消费决策中那些“非理性”的行为。&lt;/p&gt;&lt;p&gt;哪些是传统经济学无法解释的行为呢？来看两个例子（出自 Thaler 1985）：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;例子一：&lt;/b&gt;L 夫妇和 H 夫妇在一次钓鱼之旅中捕捉了一些三文鱼。他们把鱼打包后空运回家。航空公司弄丢了鱼，因此赔偿给他们 300 美元。这两对夫妻非常高兴，一起去一家豪华餐厅吃了一顿价值 225 美元的大餐——他们从来没有花过这么多钱在外吃饭。&lt;/li&gt;&lt;li&gt;&lt;b&gt;例子二：&lt;/b&gt;X 和 Y 两个玩家在德州扑克比赛中。X 在之前的回合中已经获得了 50 美元，他现在手里有一把以 Q 为最大的同花牌，他叫了 10 美元（calls a $10 bet）。Y 在之前的回合中没赢没亏，但是他的股票账户中所持有的 IBM 股票在今天赚了 50 美元。他现在手里有一把以 K 为最大的同花牌，但是他却扣牌放弃（folds）。最终当看到 X 在本局获胜时，Y 对自己说“如果我在之前的回合中赚了 50 块的话，我也会叫牌的。”&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在第一个例子中，航空公司赔付的 300 美元对这两对夫妻来说是笔意外之财。在他们的认知中，这笔钱和靠上班辛苦挣来的血汗钱显然不一样。如果这 300 美元是他们辛辛苦苦挣来的，他们一定不会花 225 美元吃一顿大餐。&lt;/p&gt;&lt;p&gt;在第二个例子中，玩家的决策是由他们在当前牌局中的盈亏决定的，而不受到他们其他财富账户中盈亏的影响——比如股票账户中 50 元的浮盈。否则玩家 Y 就不应该扣牌（因为从总财富来说，他持有的 IBM 股票为他挣了 50 —— 和玩家 X 一样），但他并没有那么做。&lt;/p&gt;&lt;p&gt;&lt;b&gt;为什么“意外之财”和“辛苦工作的血汗钱”在人的认知中完全不同、因此使用方式不同？为什么“扑克游戏账户的钱”和“股票账户的钱”完全不同？&lt;/b&gt;从传统经济学的&lt;b&gt;可替代性原则（the principle of fungibility）&lt;/b&gt;来说，钱是不应该被贴上标签的，而上面两个例子中的夫妇和玩家 Y 的决策都是非理性的。然而，这些都可以被塞勒的心理账户理论完美的解释。&lt;/p&gt;&lt;p&gt;&lt;b&gt;掌握心理账户理论可以帮助我们了解人如何在非确定性做消费以及投资决策。&lt;/b&gt;本文将粗浅的介绍塞勒的心理账户理论。行文中涉及的心理学实验除特别说明外均出自塞勒关于心理账户理论的两篇经典文献 Thaler (1985) 以及 Thaler (1999)。&lt;b&gt;在文章的最后，我会从心理账户理论的模型出发，解释双十一背后的营销逻辑，以及当下流行的面对中产阶级的各种有情怀、有工匠精神的新兴网络电商背后的营销逻辑。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 心理账户理论——框架&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;塞勒于 1985 年在研究人们的“非理性”消费行为时，提出了 &lt;b&gt;Mental Accounting Theory（心理账户理论）&lt;/b&gt;。他给出的 mental accounting 的定义如下：&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;Mental accounting is the set of cognitive operations used by individuals and households to organize, evaluate, and keep track of financial activates.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：心理账户理论是个人和家庭用来组织、评估和跟踪财务活动的一系列认知操作。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;用白话来说，&lt;b&gt;mental accounting 是用来分析人和家庭如何在日常消费中做各种决策的一个模型。&lt;/b&gt;它的核心包括三个部分：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;b&gt;第一部分关注的是人们如何评估消费决策的结果。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;第二部分指出无论对于资金的来源和使用，人们都会在心里将不同的资金划分到不同的账户（mental accounts）中。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;第三部分讲的是在决策过程中，一系列决策应该是被独立的对待还是被放在一起看待。&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;说句题外话，我在网上看到一些一知半解的介绍，将 mental accounting 片面的解释为第二部分，即 mental accounts，&lt;b&gt;仅仅说人们将资金和消费活动放在不同的账户中，因此消费行为不同，实在是误人子弟。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;下面就来分别介绍这三个方面。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 第一部分：决策评估&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;在研究消费决策时，最重要的就是搞清楚人是如何评估各种决策的结果。&lt;/b&gt;在这方面，塞勒继承了他的学术前辈 Daniel Kahneman 和 Amos Tversky 在他们经典的&lt;b&gt;展望理论&lt;/b&gt;（&lt;b&gt;Prospect Theory&lt;/b&gt;, Kahneman and Tversky 1979）中提出的&lt;b&gt;价值函数（value function）&lt;/b&gt;，它将决策可能出现的结果转化为被人们所感知到的主观价值。比如在一个扔硬币的游戏中，正面得到 100 元反面输掉 100 元。从数学上说，这个游戏的期望是 0，但是绝大多数人不愿意尝试。这是因为得到 100 和输掉 100 给人的主观价值是不等价的。&lt;b&gt;人们在做决策中评估各种结果带来的主观价值。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;[小贴士] Daniel Kahneman 和 Amos Tversky 是行为经济学的先驱，因研究人如何在不确定性下做决策而闻名，他们最杰出的成就是提出展望理论。Kahneman 因展望理论获得 2002 年诺贝尔经济学奖（那时 Tversky 已故，因此无缘获奖）。关于展望理论，请参加我们之前的文章&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38526672&quot;&gt;《获得诺奖的行为金融学是怎么一回事？》&lt;/a&gt;。&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.1 价值函数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;价值函数评价的是一个决策的结果 x 给人造成的主观价值 v(x) 的大小，v(x) 的形状如下图所示，有三个核心要素：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;b&gt;结果 x —— 即得与失（gains and losses）——是相对一个给定的参考点而言的，而主观价值 v(x) 是 x 的非线性函数。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;无论对于收益或者亏损，价值函数的敏感性递减。换句话说，当结果为正收益时，价值函数为凹函数；当结果为负收益时，价值函数为凸函数。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;人们厌恶风险，即亏损部分的负增长快于收益部分的正增长：&lt;/b&gt;&lt;equation&gt;v(x) &amp;lt; -v(-x)&lt;/equation&gt; &lt;b&gt;。比如，亏损 100 的痛苦高于得到 100 的快乐。风险厌恶在心理账户理论中起到非常重要的作用。&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a0e818ce68df7bf89e689aba023abc4a_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;771&quot; data-rawheight=&quot;509&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-a0e818ce68df7bf89e689aba023abc4a&quot; data-watermark-src=&quot;v2-35189cbd0cb05d95e516f0902ed912e5&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.2 多个结果&lt;/b&gt;&lt;/p&gt;&lt;p&gt;当我们有多个结果时会怎么样呢？我们应当将它们当作独立的结果分别评估（segregated），还是把它们合并在一起（integrated）作为一个复合结果来一次评估呢？怎么做才能使多个结果产生的主观价值更高呢？从价格函数的性质出发，不难找到答案。但在那之前，让我们先来看看四个心理学实验。&lt;/p&gt;&lt;p&gt;这些实验的参与者为 87 名本科生。实验中给出了 4 组场景。在每个场景中都有两个人物 A 和 B，并假设在 A 的生活中发生了两件事儿，而在 B 的生活中发生了一件事儿，且这两件事儿和那一件事儿的结果在经济上是等效（financially equivalent）的。参与实验的这 87 名学生被要求分别在这 4 组场景中判断 A 或 B 谁更加快乐或者更加痛苦，即在分别面对两个结果和一个结果时，A 和 B 之中谁感受到的主观价值更高。如果实验者认为 A 和 B 同样快乐，则选择无区别。&lt;/p&gt;&lt;p&gt;&lt;b&gt;场景一：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A 先生获得两张彩票，第一张赢得了 50 美元而第二张赢得了 25 美元。&lt;/li&gt;&lt;li&gt;B 先生获得了一张彩票，他赢得了 75 美元。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;问：A 和 B &lt;b&gt;谁更快乐&lt;/b&gt;？&lt;/p&gt;&lt;p&gt;结果：&lt;b&gt;56 人选 A&lt;/b&gt;，16 人选 B，15 人选无区别。&lt;/p&gt;&lt;p&gt;&lt;b&gt;场景二：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A 先生从国税局收到一个通知说他的退税少交了 100 美元，需要补交；同日，他从州税务局也收到一个通知说他少交了 50 美元，需要补交。&lt;/li&gt;&lt;li&gt;B 先生从国税局收到一个通知说他的退税少交了 150 美元，需要补交。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;问：A 和 B &lt;b&gt;谁更痛苦&lt;/b&gt;？&lt;/p&gt;&lt;p&gt;结果：&lt;b&gt;66 人选 A&lt;/b&gt;，14 人选 B，7 人选了无区别。&lt;/p&gt;&lt;p&gt;&lt;b&gt;场景三：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A 先生买彩票中了 100 美元；同日他损坏了房东的地毯，因此需要赔偿房东 80 美元。&lt;/li&gt;&lt;li&gt;B 先生买彩票中了 20 美元。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;问：A 和 B &lt;b&gt;谁更快乐&lt;/b&gt;？&lt;/p&gt;&lt;p&gt;结果：22 人选 A，&lt;b&gt;61 人选 B&lt;/b&gt;，4 人选无区别、&lt;/p&gt;&lt;p&gt;&lt;b&gt;场景四：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A 先生的车在停车场被划了，他需要花费 200 美元修理；同日，他在公司抽奖中得到 25 美元。&lt;/li&gt;&lt;li&gt;B 先生的车在停车场被划了，他需要花费 175 美元修理。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;问：A 和 B &lt;b&gt;谁更痛苦&lt;/b&gt;？&lt;/p&gt;&lt;p&gt;结果：19 人选 A，&lt;b&gt;63 人选 B&lt;/b&gt;，5 人选无区别。&lt;/p&gt;&lt;p&gt;在上述四个心理学实验中，占大多数的那个选项都完美符合价值函数的性质（参考下图）：&lt;/p&gt;&lt;p&gt;&lt;b&gt;1. 多重收益（multiple gains）：&lt;/b&gt;令 x &amp;gt; 0 和 y &amp;gt; 0 为两个正收益的结果。由 v(x) 在 x ＞ 0 时的凹函数特性可知，v(x) + v(y) &amp;gt; v(x+y)，因此将多个正收益的结果分别考虑更好（如上面的场景一）。&lt;i&gt;不要把圣诞礼物都放在一个盒子里！&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;2. 多重亏损（multiple losses）：&lt;/b&gt;令 -x 和 -y 表示两个负收益结果。由 v(x) 在 x ＜ 0 时的凸函数特性可知，v(-x) + v(-y) &amp;lt; v(-(x+y))，因此将多个负收益结果一起考虑更好（如上面的场景二）。信用卡就是利用了这点，每一笔小的支出加在一起给人的痛苦感小于一笔大支出给人的痛苦感，所以平时人们习惯刷刷刷，到了账单日再说！&lt;/p&gt;&lt;p&gt;&lt;b&gt;3. 混合收益（mixed gain）：&lt;/b&gt;假设有一个正收益结果 x 和一个负收益 -y，其中 x ＞ y，因此总的结果是正收益。由于 v(x) + v(-y) &amp;lt; v(x-y)，因此将这两个结果一起考虑更好（如上面的场景三）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;4. 混合亏损（mixed loss）：&lt;/b&gt;假设有一个正收益结果 x 和一个负收益 -y，其中 x ＜ y，因此总的结果是负收益。在这种情况下，v(x) + v(-y) 与 v(x-y) 的大小关系不确定。当 x 相对于 y 很小的时候有 v(x) + v(-y) &amp;gt; v(x-y)，因此分开考虑是更有利的（如上面的场景四）。这种组合也有一个很诗意的名字，叫“一线希望（silver lining）”。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f15467ad4df0921ff58efc3542fa70ea_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;852&quot; data-rawheight=&quot;403&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-f15467ad4df0921ff58efc3542fa70ea&quot; data-watermark-src=&quot;v2-3ce437c96da339f438c734d030b1e03d&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;b&gt;3.3 参照结果&lt;/b&gt;&lt;/p&gt;&lt;p&gt;下面来考虑一个与多个结果类似的问题 —— &lt;b&gt;参照结果（reference outcomes）&lt;/b&gt;。假设一个人期待这结果  &lt;equation&gt;x&lt;/equation&gt; ，但是却得到了 &lt;equation&gt;x+\Delta x&lt;/equation&gt; 。塞勒定义参照结果为  &lt;equation&gt;(x + \Delta x : x)&lt;/equation&gt; 。在这个符号中，冒号“：”表示相对于参照点。它给人们的主观价值为 &lt;equation&gt;v(x + \Delta x : x)&lt;/equation&gt; 。如何刻画它呢？显然，当 &lt;equation&gt;\Delta x = 0&lt;/equation&gt; 时， &lt;equation&gt;v(x : x)&lt;/equation&gt;  必须为 0。我们每个月看到工资条上的数字和预期一致时是不会有任何额外感受的。但是，当  &lt;equation&gt;\Delta x \ne 0&lt;/equation&gt;  时又会怎样呢？我们在评估该结果的时候，是应该将非预期的 &lt;equation&gt;\Delta x&lt;/equation&gt; 部分独立对待（segregation）呢？还是把它和 &lt;equation&gt;x&lt;/equation&gt; 放在一起（integration）看待呢？&lt;/p&gt;&lt;p&gt;塞勒指出，在处理  &lt;equation&gt;\Delta x&lt;/equation&gt;  时，可以得到和 3.2 节中处理多个结果时相似的结论：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;b&gt;收益的增加&lt;/b&gt; &lt;equation&gt;(x &amp;gt; 0, \Delta x &amp;gt; 0)&lt;/equation&gt; &lt;b&gt;应该被独立考虑。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;亏损的增加&lt;/b&gt; &lt;equation&gt;(x &amp;lt; 0, \Delta x &amp;lt; 0)&lt;/equation&gt; &lt;b&gt;应该和原始亏损放在一起考虑。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;收益的减少&lt;/b&gt; &lt;equation&gt;(x &amp;gt; 0, \Delta x &amp;lt; 0)&lt;/equation&gt; &lt;b&gt;应该和原始收益放在一起考虑。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;亏损的减少&lt;/b&gt; &lt;equation&gt;(x &amp;lt; 0, \Delta x &amp;gt; 0)&lt;/equation&gt; &lt;b&gt;应该被独立考虑。&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;下一节将会看到，在消费时如果一个东西的市场价格和我们的心理预期不同时，如何感知市场价格与心理预期价格之间的这个 &lt;equation&gt;\Delta x&lt;/equation&gt; 将会影响我们做决策。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.4 交易效用理论&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果说前面关于价值函数 v(x) 及其在多结果以及参照结果上的扩展仅仅是塞勒继承了 Kahneman 和 Tversky 的理论，那么本节的&lt;b&gt;交易效用理论（Transaction Utility Theory）&lt;/b&gt;可谓塞勒的独创。&lt;/p&gt;&lt;p&gt;让我们仍然从一个例子讲起（来自 1983 年 2 月 21 日 &lt;i&gt;Cornell Daily Sun&lt;/i&gt; 刊登的一条评论）：&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;我的姐姐和一个二房东合租一间公寓，租金 235 美元。但是她发现她需要支付 185 而二房东仅支付 50！二房东对此的解释是，考虑到纽约市的租房形式，她能把公寓的一部分转租给我姐姐已经是大善之举了。另外，换成别人，只会比她收取更多的租金。&lt;b&gt;无可否认，她说都是事实，但这只能令人更加作呕。&lt;/b&gt;&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;这个例子说明，这位贴主的姐姐花费了 185 美元得到了一个物有所值房间，但心里仍然非常不高兴。为了解释这一点，塞勒提出，&lt;b&gt;在决定一笔交易的效用时，必须考虑两个方面：获取效用（acquisition utility）和交易效用（transaction utility）。前者取决于收到的物品或服务相对于支出的价值，而后者仅仅取决于人们对这比交易的感知价值。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这个模型使用到了三个价格。首先，p 表示为了获得某商品或者服务 z 必须支付的价格。其次，定义 &lt;equation&gt;\bar p&lt;/equation&gt; 为 z 的价值当量，即对于我们来说得到商品或服务 z 与得到 &lt;equation&gt;\bar p&lt;/equation&gt; 这么多的钱是等效的。最后，定义 &lt;equation&gt;p^*&lt;/equation&gt; 为 z 的参考价格，它是我们认为的合理价格。&lt;/p&gt;&lt;p&gt;使用这三个价格，定义获取效用和交易效用如下：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;获取效用是组合结果 &lt;/b&gt;&lt;equation&gt;(z, -p)&lt;/equation&gt;&lt;b&gt; 的主观价值，即 &lt;/b&gt;&lt;equation&gt;v(z, -p) = v(\bar p, -p)&lt;/equation&gt; &lt;b&gt;，它衡量了当我们花费了 p 并得到 z 后，我们获得的主观价值（收到的物品或服务相对于支出的价值）。&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;交易效用 p 相对于参照价格 &lt;/b&gt;&lt;equation&gt;p^*&lt;/equation&gt;&lt;b&gt; 的主观价值，即 &lt;/b&gt;&lt;equation&gt;v(-p : -p^*)&lt;/equation&gt;&lt;b&gt;，它衡量了与我们的心理预期 &lt;/b&gt;&lt;equation&gt;p^*&lt;/equation&gt;&lt;b&gt; 相比，花费 p 来购买 z 到底划不划算（人们对这比交易的感知价值）。&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;最终，一笔支出 p 换取商品或者服务 z 的交易的主观价值，记为 &lt;equation&gt;w(z,p,p^*)&lt;/equation&gt;，是上述两个效用之和：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;w(z,p,p^*)=v(\bar p,-p)+v(-p:-p^*)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;举个例子。假设你在收藏星巴克的城市杯；你已经拥有了绝大多数，就差一个东京的。现在，某人要价 1000 转卖（即 p = 1000）。那么你买不买呢？在评估这个决策时，获得效用和交易效用各自起了作用。从收藏的角度来说，这支杯子对你的价值是无限的，因此 &lt;equation&gt;\bar p&lt;/equation&gt; 很大，所以获取效用 &lt;equation&gt;v(\bar p, -p)&lt;/equation&gt; 很大；但是从交易的角度，你知道这个杯子的成本很低，而推出时星巴克的零售价也就是 150（即参考价 &lt;equation&gt;p^*&lt;/equation&gt; 相对于 p 很低），因此交易效用 &lt;equation&gt;v(-p : -p^*)&lt;/equation&gt; 是负的。最终，你必须综合考虑这两部分效用 &lt;equation&gt;v(\bar p, -p) + v(-p : -p^*)&lt;/equation&gt; 来决定是否买下它。&lt;/p&gt;&lt;p&gt;再回到“姐姐租房”的例子。贴主的姐姐花了 185 美元租到了一个物有所值的房子，因此这笔交易的获取效用很好。但是，从她内心来说，两个人合租租金 235 的房子，人均应该是不到 120（ &lt;equation&gt;p^*&lt;/equation&gt; ），这远低于她支付的 185，因此这比交易的交易效用为负。这就是让她不爽的原因。&lt;/p&gt;&lt;p&gt;很多时候，由于参考价格不同，交易效用将会影响我们的消费决策。来看一个测试（出自 Thaler 1985，参与者高管培训班成员）：&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;在一个大热天你躺在沙滩上，十分口渴。你很想来一瓶你最爱喝的啤酒。这时，一个朋友提出要去附近的一个卖啤酒的地方看看，问你愿意出多少钱买一瓶冰镇啤酒。假如卖酒的地方是一个豪华大酒店，你的回答是？假如卖酒的地方是一个落魄的杂货铺，你的回答又是？&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;在这个问答中，当卖酒地点是豪华大酒店时，参与者回答的中位数是 2.65 美元，而当地点为落魄杂货铺时，回答的中位数仅为 1.50 美元。&lt;b&gt;显然，对于酒店卖的啤酒，人们愿意付出更高的价格，这是因为在这种设定下，人们心里对啤酒的参照价格更高。&lt;/b&gt;然而，这种现象无法被传统经济学来解释，因为无论从哪里购买，喝酒的体验都是一样的，因此按照传统理论，价格应该和购买地点无关。可惜事实并非如此。&lt;/p&gt;&lt;p&gt;这个例子说明，参考价格 &lt;equation&gt;p^*&lt;/equation&gt; 对于决定交易效用的大小至关重要。&lt;b&gt;决定 &lt;/b&gt;&lt;equation&gt;p^*&lt;/equation&gt;&lt;b&gt; 最重要的因素是“公平性”，而“公平性”很大程度上取决于买家对于卖家的成本的看法&lt;/b&gt;（请参考 Thaler 1985 里面的例子）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.5 购买决策——多个账户&lt;/b&gt;&lt;/p&gt;&lt;p&gt;当我们有了评价每笔交易的模型 &lt;equation&gt;w(z,p,p^*)&lt;/equation&gt; 后，消费决策问题便可以转化为一个数学优化问题：在预算范围内选择能够最大化交易效用的那些交易。最终，这个问题等价于下面这个条件：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;w(z_i,p_i,p_i^*)/p_i\ge k&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中，k 可以被认为是一个阈值。&lt;b&gt;当交易 i 的价值与支出的比值高于这个阈值时才应该进行。&lt;/b&gt;理论上，这个阈值常数对所有可能的交易应该是一致的。&lt;b&gt;但在实际中，人们将不同的资金流入和消费支出划分到不同的账户中，且按不同周期对每个账户内的预算再平衡。&lt;/b&gt;这意味着我们需要把上述条件改进为：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;w(z,p,p^*)/p\ge k_{it}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中， &lt;equation&gt;k_{it}&lt;/equation&gt; 是账户 i 在周期 t 内的阈值。这便引出了心理账户理论的第二部分，不同的 mental accounts。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 第二部分：不同的账户&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;心理账户理论的第二个核心部分是分类（categorization）或者贴标签（labeling）&lt;/b&gt;。资金从三个层面被分类：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;b&gt;消费&lt;/b&gt;被划分到不同的类别中：比如食品账户、居住开销账户等。&lt;/li&gt;&lt;li&gt;&lt;b&gt;财富&lt;/b&gt;被分配到不同的类别中：比如支票账户、储蓄账户、养老账户等。&lt;/li&gt;&lt;li&gt;&lt;b&gt;收入&lt;/b&gt;被划分到不同的类别中：比如日常的工资账户、意外之财账户中。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;根据传统经济学理论的可替代性，这些账户的划分都是毫无意义的。&lt;b&gt;然而，事实却是它们确实存在而且对人们的消费行为有着重要的影响。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;4.1 消费类别&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;人们在消费时，不同的支出类别会有不同的预算；且这些预算的周期也不同。&lt;/b&gt;比如我们会有每周的食品消费预算，以及每月或者每季度的服装消费预算；我们会有日常消费的预算，也会有双十一消费的预算。每笔消费后，我们会在对应的账户中记账。不同类别的消费只会记录在正确的心理账户中、不会跨账户记错。&lt;/p&gt;&lt;p&gt;&lt;b&gt;有趣的是，很多小额的日常消费不会被记账。&lt;/b&gt;比如，我们通常不会对在公司食堂购买的午饭或者咖啡记账。很多商家就很擅长利用这一点。比如 100 块钱的电商年费或者视频网站会费会被描述为“每天仅仅几毛钱”。这么做的好处是，它引导人们将这笔开支归类到每天小额开销账户中，而该账户中的开销一般是不记账的。而反过来，如果人们把这 100 块钱看作一个整体，那么它就是一笔不小的开支，会被记录到相应的账户中（比如休闲娱乐账户）；如果该账户的预算已经吃紧，那么很有可能这笔支出就不会发生。&lt;/p&gt;&lt;p&gt;&lt;b&gt;当不同消费账户中的预算不可替代时，我们的消费行为便受到不同账户的影响。&lt;/b&gt;Heath and Soll (1996) 中给出这么一个例子：实验中有两组人，他们被问及是否愿意花费 50 美元购买戏票。这两组人的不同之处是，第一组人在这星期早些时候已经花了 50 美元观看了篮球赛；而另一组人在这星期早些时候因为违章停车被罚了 50 美元。实验的结果是，第一组人中愿意购买戏票的人要比第二组中愿意购买戏票的人少得多。这是因为看戏和看篮球赛的消费被分到同一个娱乐消费账户中，而看戏和停车罚单则在不同的账户中。对于第一组人来说，因为这个星期已经观看了篮球赛，这个账户的预算已经用尽，因此他们就选择不再看戏了。&lt;/p&gt;&lt;p&gt;&lt;b&gt;预算系统引发的另一个问题是“自我克制与礼物馈赠”。&lt;/b&gt;一对喜欢饮酒的夫妇决定他们每顿晚餐在饮酒上的平均开销为 10 美元，因此只买平均 10 美元一瓶的红酒，且任何单瓶不能超过 20 美元。这个决定对他们来说也许不是最优的，因为偶尔一瓶 30 美元（稍稍超出他们的预算）的佳酿带给他们的主观价值将会大大超过 30 美元。然而，自我约束将他们的消费限制在每瓶酒不超过 20 美元；他们认为一旦哪次超过了这个上限，就很可能禁不住诱惑而提高预算。因此，如果有人把一瓶超出预算的红酒送给这对儿夫妻，他们一定会非常高兴的。&lt;b&gt;依照传统经济学的理论，送礼时应该选择人们经常购买的物品。然而，心理账户理论则指出，最佳礼品应该是比被赠与人平日消费的商品稍微奢侈一些的东西。&lt;/b&gt;这也恰恰符合传统习俗的建议：送一个人他自己平时不会购买的东西。事实上，&lt;b&gt;自我克制带来了更多非理性消费的可能。&lt;/b&gt;为了克制消费，该账户中的预算通常很低。人们往往采取的方式是购买每次购买很小的量。然而对于任何商品，购买的量越小就意味着它的单价越高，因此人们由于自我克制的预算控制而支出了更多的溢价。Wertenbroch (1996) 的研究就精辟的指出“为了限制消费，对于他们最中意的商品，消费者花了更多的钱买却只买到更少的东西。”&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;4.2 财富账户&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;对于一般家庭来说，财富也根据支出意愿从高到低划分在不同的账户之中。&lt;/b&gt;处于最底层的（即支出意愿最高的）是被称作流动资产的类别，这包括手里的现金以及支票账户中的钱。这个账户的钱用于家庭的日常开销。再往上一级是被称作当前财富的类别，它包含一系列流动性资产比如储蓄账户、股票以及债券、理财基金等。这个账户中的钱主要是用来储蓄升值的。再下一个层级是房屋资产，指的是家庭为了购房或者偿付购房贷款而准备的资金。最后一级账户是未来收入类别，这些资金包括将来在生活中赚取的钱和指定的退休储蓄账户中的钱。塞勒的研究（Shefrin and Thaler 1988）表明人们的支出边际倾向随着财富账户层级的增加而骤减：对于流动资产类别中的资金，人们的支出边际倾向为 1；而对于未来收入账户中的资金，人们的支出边际倾向则非常接近 0。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;4.3 收入账户&lt;/b&gt;&lt;/p&gt;&lt;p&gt;通俗的说，这可以理解为“专款专用”。人们的消费行为受到收入源的影响。举个例子，Kooreman (1997) 研究了政府发放的儿童抚养费对荷兰家庭消费的影响。他发现家庭在儿童衣服上的消费对于抚养费的变化非常敏感，而对其他收入源的变化不怎么敏感。这里面隐含的意思就是家庭把抚养费和其他家庭收入放在了不同的账户中，而给子女添置衣服的钱应该从抚养费账户里面扣除。类似的情况也会发生在公共财政中（Hines and Thaler 1995）。&lt;/p&gt;&lt;p&gt;再回到文章开头的例子。那两对夫妻将航空公司赔付得到的 300 美元放到了意外之财账户中，因此去高级餐厅吃了一顿大餐。那位玩家将扑克游戏的收入和股票投资的收入放在不同的账户中，没有因为股票的浮盈而改变打牌的决策，从而错失了一把赢牌的局面。“老顽童”塞勒在面对记者的提问时，同样指出将会非理性的花掉诺贝尔奖金。当然，对于他来说这是一句玩笑话，但它却反映了心理账户理论中不同 mental accounts 给人们的决策带来的影响。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 第三部分：决策归类&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;心理账户理论的第三部分叫做 Choice Bracketing（出自 Read et. al. 1998），讲的是在决策过程中，一系列决策应该是被独立的对待还是被放在一起看待，这将在很大程度上影响消费和投资决策。&lt;/b&gt;我姑且蹩脚的将它翻译成“决策归类”。决策的归类在心理账户理论中有很重要的作用。比如，当把一个小亏损和一个大收益放在一起考虑的时候，小亏损的痛苦就会降低（因为价值函数 v 的特性）；一个消费决策如果是出自一个仍有预算的心理账户则要比出自一个没有预算的心理账户容易的多。诸如此类的现象就是这部分的研究对象。&lt;/p&gt;&lt;p&gt;决策归类主要研究三类现象，它们是：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;之前的结果如何影响当前的风险偏好（这对股票投资很有帮助）&lt;/li&gt;&lt;li&gt;狭隘框架与短视损失厌恶&lt;/li&gt;&lt;li&gt;多样化选择&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;5.1 之前的结果如何影响当前的风险偏好&lt;/b&gt;&lt;/p&gt;&lt;p&gt;当一系列风险决策（比如打赌，或者股票投资）被放在一起考虑时，之前的结果会在很大程度上影响当前的风险偏好。Thaler and Johnson (1990) 对 MBA 研究生做了一组实验，包括如下三个问题：&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;问题一：&lt;/b&gt;你刚刚&lt;b&gt;赢了&lt;/b&gt; 30 美元。现在，从如下两个选择中选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率得到 9 美元，50% 的概率损失 9 美元&lt;/li&gt;&lt;li&gt;（b）没有进一步的收益或者损失&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;结果：&lt;b&gt;70% 的学生选了（a）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;问题二：&lt;/b&gt;你刚刚&lt;b&gt;输了&lt;/b&gt; 30 美元。现在，从如下两个选择中选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率得到 9 美元，50% 的概率损失 9 美元&lt;/li&gt;&lt;li&gt;（b）没有进一步的收益或者损失&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;结果：&lt;b&gt;60% 的学生选了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;问题三：&lt;/b&gt;你刚刚&lt;b&gt;输了&lt;/b&gt; 30 美元。现在，从如下两个选择中选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）33% 的概率得到 30 美元，67% 的概率什么都没有&lt;/li&gt;&lt;li&gt;（b）100% 的概率获得 10 美元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;结果：&lt;b&gt;60%的学生选了（a）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;问题一的结果表明，&lt;b&gt;之前的收益可以刺激同一个账户内的风险偏好&lt;/b&gt;。这个现象被称作“house money”：对于赌徒来说，他们将从赌局中赢的钱和自己的本钱放在不同的账户中，他们对待这个账户中的钱与对待自己的本金完全不同。这就好比一个人炒股，如果购买的股票赚钱了，那么他会将赚的钱和自己的本金区别对待，即便是赚来的钱出现了亏损，那种痛苦也远没有本金亏损痛苦大。这当然是一种认知偏差，它造成了非理性的风险偏好，让人容易做出错误的投资决策。&lt;/p&gt;&lt;p&gt;&lt;b&gt;问题二和问题三说明，只有当眼前的赌局有回本的可能时，之前的亏损才能激发风险偏好。&lt;/b&gt;当人们知道注定无法回本时，是可以正确、理性的对待亏损。但是在很多“赌局”中，比如股票投资，人们总有能回本的错觉。因此当面对亏损的股票时，便坚持持有，期待回本。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;5.2 狭隘框架与短视损失厌恶&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;短视损失厌恶（myopic loss aversion）说的是人们在做决策（特别是投资决策）时过度重视近期的得失而无法从全局考虑，从而导致非最优的决策。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在这方面，诺贝尔经济学奖获得者 Paul Samuelson 曾经提出一个著名的问题：他向他的经济学同事提出了一个非常有吸引力的赌局——扔硬币，如果同事猜对了他给这位同事 200 美元，猜输了同事只需要给他 100 美元。&lt;b&gt;令人诧异的是，他的同事回绝了这个游戏，不过同时指出，如果同样的赌局进行&lt;/b&gt; &lt;b&gt;100 次的话，他会毫不犹豫的接受它。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这个结果中蕴含着很多非常有意思的“非理性”决策，它们都能被心理账户理论解释。&lt;/p&gt;&lt;p&gt;从数学上说，这个游戏期望收益为正。然而，Samuelson 的同事拒绝了，因为对这位同事来说“100 块钱亏损的痛苦大于 200 块钱收益带来的快乐”。这个风险厌恶显然符合价值函数的特性。那么，为什么又会有后面那一句“同样的赌局进行 100 次，我会接受它”呢？这是因为对于风险厌恶的人来说，当多次赌局决策被放在一起考虑时，这个游戏的收益风险特征变得更加吸引人，因此他们便更倾向于接受这个游戏。可见，这里面涉及了“决策归类”。&lt;/p&gt;&lt;p&gt;话虽如此，&lt;b&gt;但是短视损失厌恶并不容易被克服&lt;/b&gt;。Thaler et al. (1997) 做了一个实验。不同的投资者被要求按照不同的频率（每年 8 次、每年 1 次，每 5 年 1 次）在股票和债券之间进行资产配置。对于调仓频率低的投资者（即每年 1 次和每 5 年 1 次的），他们将 67% 的资金配置在股票上，将 33% 的资金配置于债券；而对于调仓频率高的投资者（每年 8 次），他们仅仅将 41% 的资金配置在股票上，而将 59% 的资金配置于债券。这说明，&lt;b&gt;调仓频率的投资者容易受到股票高波动、高风险、以及近期亏损的影响，出现短视损失厌恶。&lt;/b&gt;即便他们知道，长期来看股票的收益会战胜债券，但是仍然陷入短视损失厌恶的误区。在他们的心理账户中，每一期的调仓决策更倾向是独立对待的，而非放在一起考虑，这就导致了他们更加保守，将更多的资金配置在债券上。&lt;/p&gt;&lt;p&gt;短视损失厌恶的另一个表现是&lt;b&gt;狭隘框架（narrow framing）&lt;/b&gt;，即人们更倾向于把多个决策独立看待，而非放在一个篮子里综合考虑。这么做容易造成严重的风险厌恶。塞勒在一个高管培训班上观察到这个现象。这些高管来自同一个公司，每人分属一个部门。塞勒问他们每个人是否愿意开展一个项目，该项目如果成功将获得两百万收益，如果失败将亏损一百万美元。在这 25 位高管中，仅有 3 人愿意接受这个项目。当塞勒把等价的问题抛给公司 CEO 时——即 CEO 是否愿意展开 25 个项目，每个项目如果成功会赚两百万，失败则亏一百万，CEO 的回答是照单全收。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;5.3 多样化选择&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;决策归类的第三个表现是 the diversification heuristic&lt;/b&gt;（姑且翻译成多样化选择）。它的意思是，&lt;b&gt;决策是否被独立看待会影响这消费选择的多样性&lt;/b&gt;。Simonson (1990) 做了这么一个实验。他让学生在两种不同的情况下从 6 类零食（糖果、薯片等）中选择三个。这两种情况是：（1）每周选一次，每次选一种。（2）一次性把未来三周的零食都选好。Simonson 发现，在第（2）种情况下，每个学生的选择显示出了远超过第（1）种情况下他们各自选择的多样性。&lt;b&gt;当被要求同时选出三种时，这些决策被放在一起考虑，人们的选择表现出多样化。&lt;/b&gt;而在第（1）种情况下，决策之间是相互独立的，因此学生们更多的是每次都选自己最喜欢的零食，因此每个学生的选择的多样性很低。这就好比假如你是一个宫保鸡丁的狂热爱好者，如果让你每天中午决定吃什么，你大概会在一周内吃好几次鸡丁；但是如果让你周一就决定好未来五天的菜单，你大概会觉着那么做不太好，而会尽量选一些不同种类的饭菜。&lt;/p&gt;&lt;p&gt;上述这种现象被称为&lt;b&gt;多样性偏差（diversification bias）&lt;/b&gt;。塞勒的研究发现人们在他们的退休基金账户中选择投资品时表现出了同样的行为。通常，美国的退休基金账户中会为人们提供 n 个投资品（各种不同种类）。多数人们都会将资金平均的分配到这些投资品上。当该账户为投资者提供了第 n + 1 种投资品后，人们往往会进行再平衡，从而把资金再平均的分配到这 n + 1 种投资品中。显然，在决策时，这些选择被放在一起考虑了，这大大的增加了选择的多样性。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 营销启示：双十一和各种有格调的新兴电商&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;好了，现在我们已经掌握了心理账户理论的三大核心：消费决策评估、多个账户、决策归类。让我们用所学来分析分析双十一以及最近新兴的面向中产阶级的有格调的电商背后的营销逻辑。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;6.1 双十一&lt;/b&gt;&lt;/p&gt;&lt;p&gt;毫不夸张的说，双十一的重要性已经不亚于春节了。在这场购物盛宴中，我们脑子里想的似乎就是“买买买”。为什么会这样呢？从心理账户理论来说，我们容易把双十一的购物预算和日常支出的预算放在不同的心理账户中。因此，哪怕是之前不幸得了个流感（去医院扎针吃药花了几百上千大洋）或者给孩子报了个课外班（花了成千甚至上万大洋），这些消费也不会影响双十一的购买欲望。&lt;/p&gt;&lt;p&gt;从交易效用理论（3.4 节）来说，商家在营销上也是做足了功课。首先不可否认的是，双十一的价格确实便宜，因此价格 p 就低，这导致获取效用 &lt;equation&gt;v(\bar p, -p)&lt;/equation&gt; 比平时更高。第二，各种打折神劵满天飞，什么满 199 减 100 再来个叠加再减 50，不给你弄个 3 折以下都不好意思。这就造成了价格 p 和平时的参考价格 &lt;equation&gt;p^*&lt;/equation&gt; 相比也更低，因此交易效用 &lt;equation&gt;v(-p : -p^*)&lt;/equation&gt; 也比平时高。这么一下来，购买同种商品的主观价值 ——  &lt;equation&gt;v(\bar p, -p) + v(-p : -p^*)&lt;/equation&gt;  —— 在双十一明显比平时更高。另一方面，对于憋着在双十一买一大票的小伙伴，他们双十一心理账户内的预算也比平时的消费更高，这会变相造成阈值 k 更低。此消彼长，导致 &lt;equation&gt;[v(\bar p, -p) + v(-p : -p^*)] / p&lt;/equation&gt;  轻易突破阈值 k，于是买买买就成了必然。&lt;/p&gt;&lt;p&gt;因此，如果想“防剁手”应该怎么办呢？从根本上，我们可以将双十一的消费和日常消费放在一个心理账户中，做统一的预算管理。如果我们意识到总共就这么多钱，双十一之后还要撑到春节，那么多少会“收敛”一些。其次，尽量避免购买不熟悉的商品。对于平时买的少的商品，我们对它们的参考价格不容易判断，这容易被电商利用，比如某东上经常偷摸的抬高“专柜价”。如果我们之前没买过此类产品，那么会误以为专柜价就是合理的参考价格。这这种情况下啊，一个很大的“折扣”就会显著提升交易效用 &lt;equation&gt;v(-p : -p^*)&lt;/equation&gt; ，从而使我们做出事实上是错误的消费决定。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;6.2 新兴电商&lt;/b&gt;&lt;/p&gt;&lt;p&gt;最后再来看看一些&lt;b&gt;目标中产阶级&lt;/b&gt;的新型电商。它们卖的都是一些有格调、有情怀、有工匠精神的产品。比如下面这款商品——北欧皇室御用铸铁锅，原价 1600，限时优惠 999，瑞典制造，皇室之选，你买不了吃亏买不了上当，绝对高大上。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a86102206facdf7df1f0b21aba137ebd_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1052&quot; data-rawheight=&quot;555&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-a86102206facdf7df1f0b21aba137ebd&quot; data-watermark-src=&quot;v2-4e5bb328bfcd5e9fe8e26112e9553b1c&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;这背后的营销逻辑是什么呢？首先，这些电商绝对不会卖京东、淘宝上流行的不能再流行的东西（注意，不一定是便宜的，比如这些电商不会卖佳能全幅单反相机）。为什么？因为拼不过。所以只能针对“低频分量”即小众买家，卖就要卖点别的地方没有的（京东上搜索北欧皇室御用铸铁锅没找到同款），&lt;b&gt;因为你在别的地方找不到参照，你就缺乏正确的参照价格认知。模糊参照价格 &lt;/b&gt; &lt;equation&gt;p^*&lt;/equation&gt; &lt;b&gt; 是营销的一个手段，它将大大的弱化交易效用的作用&lt;/b&gt;（如果你在别处看见这个锅卖 300，那么你肯定不会花 999 买它，对么？）。为什么电影院卖的爆米花都是巨大桶的？就是因为不让你轻易的找到参照，因为超市里没有卖那么大桶的！&lt;/p&gt;&lt;p&gt;没有 &lt;equation&gt;p^*&lt;/equation&gt; 怎么办？没关系，电商会帮助你。它会给你提供一个建议零售价，就如同上面的 1600。当我们缺乏对一个商品价格的正确认知时，一个更高的价格给我们的暗示是它质量好、品味高。加上商家的图文并茂“米其林餐厅标配”、“精湛传统手工工艺”、“北欧唯一一家”，我们下意识里就会觉着它确实是个好东西，物有所值，因此会倾向于接受它给出的参考价格。然后再和活动价 999 一比，交易效用便带来很大的满足感。&lt;/p&gt;&lt;p&gt;再来看看获取效用。不要忘了，这些电商面对的是中产阶级。中产阶级不缺钱，缺的是别人对于他们是中产阶级的认同感。因此，你送他 999 元远不如送他一个价值 999 元的米其林铸铁锅给他的主观价值高。换句话说，对于这些潜在的消费者，该款商品在他们心中的价值 &lt;equation&gt;\bar p&lt;/equation&gt; 远超 999，因此获取效用也很高。获取效用和交易效用两者叠加，带来完美的购物体验。&lt;/p&gt;&lt;p&gt;毫无疑问，上面这个商品（以及靠谱电商中的其他商品）都是好商品，但是它们的营销背后有多少情怀的成分呢？我钟爱优质商品也享受它们带来的生活品质的提高。但是对不起，我不会为情怀买单。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;7 结语&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;人们每天都需要做各种消费乃至投资决策，因此了解一些行为经济学的知识是大有裨益的。虽然更多的是偏定性的研究，但是它能帮我们深入了解人们是如何做决策的，因此也就可以更好的跳出商家的营销陷阱，真正提高购买的幸福感。&lt;/p&gt;&lt;p&gt;塞勒的心理账户理论内容广博、用例经典，远远不是本文的篇幅能够全部涵盖的。比如在消费中，提前购买、沉没成本、支付折旧、支付拆解这些现象如何影响决策，由于篇幅有限本文并没有涉及。感兴趣的读者可以阅读文章最后的参考文献。&lt;/p&gt;&lt;p&gt;每年双十一，四海八方的小伙伴都摩拳擦掌，购物车里也装的满满当当，就待 11 号凌晨开抢。无可否认，双十一绝对能买到很多物超所值的东西；然而回首以往，你的柜子里、衣橱里是否也囤下了一些双十一抢来的但却从来没有见过光的剩品呢？希望这篇文章能给你带来一些思考，能让你在这场购物的狂欢节中多一分理性。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Heath, C. and J. B. Soll (1996). Mental accounting and consumer decisions. &lt;i&gt;Journal of Consumer Research&lt;/i&gt;, Vol. 23(1), 40 – 52.&lt;/li&gt;&lt;li&gt;Hines, J. and R. H. Thaler (1995). Anomalies: the flypaper effect. &lt;i&gt;Journal of Economics Perspectives&lt;/i&gt;, Vol. 9(4), 217 – 226.&lt;/li&gt;&lt;li&gt;Kahneman, D. and A. Tversky (1979). Prospect Theory: An Analysis of Decision under Risk. &lt;i&gt;Econometrica&lt;/i&gt;, Vol. 47(2), 263 – 291.&lt;/li&gt;&lt;li&gt;Kooreman, P. (1997). The labeling effect of a child benefit system. Unpublished working paper, University of Groningen.&lt;/li&gt;&lt;li&gt;Read, D. and G. Loewenstein and M. Rabin (1998). Choice bracketing. Unpublished working paper, Carnegie Mellon University.&lt;/li&gt;&lt;li&gt;Shefrin, H. M. and R. H. Thaler (1988). The behavioral life-cycle hypothesis. &lt;i&gt;Economic Inquiry&lt;/i&gt;, Vol. 26(4), 609 – 643.&lt;/li&gt;&lt;li&gt;Simonson, I. (1990). The effect of purchase quantity and timing on variety-seeking behavior. &lt;i&gt;Journal of Marketing Research&lt;/i&gt;, Vol. 27(2), 150 – 162.&lt;/li&gt;&lt;li&gt;Thaler, R. H. (1985). Mental accounting and consumer choice. &lt;i&gt;Marketing Science&lt;/i&gt;, Vol. 4(3), 199 – 214.&lt;/li&gt;&lt;li&gt;Thaler, R. H. (1999). Mental accounting matters. &lt;i&gt;Journal of Behavioral Decision Making&lt;/i&gt;, Vol. 12(3), 183 – 206.&lt;/li&gt;&lt;li&gt;Thaler, R. H., A. Tversky, D. Kahneman and A. Schwartz (1997). The effect of myopia and loss aversion on risk taking: an experimental test. &lt;i&gt;The Quarterly Journal of Economics&lt;/i&gt;, Vol. 122(2), 647 – 661.&lt;/li&gt;&lt;li&gt;Wertenbroch, K. (1996). Consumption self-control via purchase rationing. Working paper, Yale University.&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-28-38610013</guid>
<pubDate>Thu, 28 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>贝叶斯统计</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-27-38553838.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38553838&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-f13237d43355b02d7d5c1ff98e2dc4e1_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 概率论和统计学的区别&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;简单来说，&lt;b&gt;概率论和统计学解决的问题是互逆的&lt;/b&gt;。假设有一个具有不确定性的过程（process），然后这个过程可以随机的产生不同的结果（outcomes）。则概率论和统计学的区别可以描述为：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;在&lt;b&gt;概率论（probability theory）&lt;/b&gt;中，我们已知该过程的概率模型，该模型的不确定性由相应的概率分布来描述；概率论要回答的问题是该过程产生某个结果的可能性有多大这类问题。&lt;/li&gt;&lt;li&gt;在&lt;b&gt;统计学（statistics）&lt;/b&gt;中，该过程的概率模型对我们来说是未知的，但是我们有一系列该过程产生的结果的观测值；我们希望通过这些观测值来推断出这个过程中的不确定性是什么样的。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;总结来说就是：&lt;b&gt;通过已知的概率模型来精确的计算各种结果的可能性就是概率论；根据观测的结果来推断模型的不确定性就是统计学。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果上面的描述依然晦涩，请看下面这个例子。假设桶里面有 100 个小球，小球分为白色和黑色。如果已知桶里面一共有 30 个白球和 70 个黑球，想回答随机从桶中摸出一个白球（或者黑球）的概率是多少这样的问题，这就属于概率论的范畴。而如果已知通过有放回的采样抽出了 10 个球并且其中 4 个白球 6 个黑球，想要推断的是小桶里面白球（或者黑球）的百分比（这些对我们来说是未知的），这就是统计学的范畴。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b2bb8e48fc52a6c152a327dd34bfc2f3_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;320&quot; data-rawheight=&quot;240&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-b2bb8e48fc52a6c152a327dd34bfc2f3&quot; data-watermark-src=&quot;v2-6ad401c13362fcdba904e051e228dec2&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;b&gt;对于概率论来说，每一个问题都有唯一的答案。&lt;/b&gt;通过相关计算，总可以计算出我们关心的结果发生的概率。&lt;b&gt;反观统计学，它更像是一门艺术。&lt;/b&gt;因为要推断的模型是未知的，因此很难说哪种推断方法就优于另一种方法，或者哪种推断结果就比其他结果更加正确。就拿上面的例子来说，虽然观测到的 10 个球中有 4 个白球和 6 个黑球，但我们仍不能断言桶里白球占 40% 的推断就一定比桶里白球占 50% 或者 30% 的推断更加准确。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 古典统计学和贝叶斯统计学&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;统计学领域中有两大学派：古典统计学（classical）和贝叶斯统计学（Bayesian，以英国数学家托马斯•贝叶斯命名）。古典统计学又称为频率论（frequentist）。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;关于这俩大学派孰优孰劣已有一个世纪的争论。&lt;b&gt;它们的本质区别在于对待未知模型或者参的方法是不同的：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;古典统计学&lt;/b&gt;认为，未知的模型或者参数是&lt;b&gt;确定&lt;/b&gt;的，只不过我们&lt;b&gt;不知道&lt;/b&gt;它确切的形式或者取值。&lt;/li&gt;&lt;li&gt;&lt;b&gt;贝叶斯统计学&lt;/b&gt;认为，未知的模型或者参数变量是&lt;b&gt;不确定&lt;/b&gt;的，但是这种不确定性可以&lt;b&gt;由一个概率分布来描述&lt;/b&gt;。&lt;/li&gt;&lt;/ul&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-231e40948a84ba8fd7e443f9880bcc11_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;724&quot; data-rawheight=&quot;424&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-231e40948a84ba8fd7e443f9880bcc11&quot; data-watermark-src=&quot;v2-bd2146448a366f9d4306c2073fbad9e1&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;b&gt;古典统计学通过进行大量重复实验并统计某个特定结果出现的频率作为对未知参数的估计。&lt;/b&gt;以猜桶中白球的比例为例，频率论者会进行大量的带放回的独立抽取实验（实验可以做到天荒地老海枯石烂），然后计算所有结果中白球出现的频率，以此作为对小球中白球比例的推断。古典统计学的核心在于通过大量的实验来消除模型或者参数估计中的不确定性（因为它假设未知模型或者参数是确定的）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;贝叶斯统计学则截然不同。&lt;/b&gt;贝叶斯统计学&lt;b&gt;“使用概率的方法来解决统计学问题”&lt;/b&gt;。如前所述，贝叶斯统计学认为未知的模型或者参数是不确定的、符合某个概率分布。特别的，我们会首先根据主观判断或者过去的经验，对这个概率分布有一个猜测，称为&lt;b&gt;先验分布（prior distribution）&lt;/b&gt;；然后根据越来越多的&lt;b&gt;观测值（new data 或者 new evidence）&lt;/b&gt;来修正对该概率分布的猜测，最后得到的概率分布称为&lt;b&gt;后验分布（posterior distribution）&lt;/b&gt;。&lt;b&gt;贝叶斯统计学中的“概率”的概念可以被解释为我们对未知变量不同取值的信心程度的测度（measure of confidence）。贝叶斯统计不消除未知变量的不确定性，而是通过越来越多的新的观测点来持续更新我们对于该未知变量不确定性的认知，提高我们对不确定性的判断的信心。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;对于上面这个例子，假设在观测值出现之前，我们猜测桶中有 50% 的白球和 50% 的黑球。因此 50% 是我们对白球比例的先验信仰（prior belief）。随着不断进行抽取实验，我们会根据得到的观测值更新我们的信仰。假设 10 次抽取后得到 4 个白球和 6 个黑球，那么此时我们对白球比例的信仰就会从最初的 50% 减少一些，这是因为我们结合新的证据（即观测的 10 个球中仅有 40% 是白球）更新了猜测。假设 100 次抽取后得到了 35 个白球和 65 个黑球，那么此时我们对白球比例的信仰又会继续更新。随着越来越多的观测值，我们会持续更新猜测，&lt;b&gt;并且对该猜测的信心程度也会越来越高，即未知变量（在这里是白球比例）后验分布的标准差会越来越小&lt;/b&gt;（后面会通过一个扔硬币的例子说明）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;贝叶斯统计学派被古典统计学派诟病的核心问题是对于未知变量的先验分布是非常主观的。&lt;/b&gt;显然，哪怕是一个最简单的问题，不同的人也会有不同的考虑。比如桶中白球比例这个例子。一个普通人会同意 50% 是一个合理的先验猜测。但是，极端的人也许会使用 0% 或者 100% 白球作为他的先验猜测。不过，尽管不同人可以有不同的先验分布，但是随着他们结合新的观测点来更新自己的信仰，我们会发现他们最终得到的后验分布是会逐渐收敛的。&lt;b&gt;此外，对很多生活中的实际问题，使用一个合理的猜测（educated guess）作为先验是很有好处的。&lt;/b&gt;&lt;/p&gt;&lt;b&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-e92d44381b9ddd7850dd7a6206a2789d_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;713&quot; data-rawheight=&quot;492&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-e92d44381b9ddd7850dd7a6206a2789d&quot; data-watermark-src=&quot;v2-e2c889d956ba89791d36c6ae39edb9b0&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;/b&gt;&lt;h2&gt;&lt;b&gt;3 为什么要学习贝叶斯统计&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;贝叶斯统计在生活以及量化投资中有着广泛的应用。从下面两个意义上说，相对古典统计，贝叶斯统计有明显的优势：&lt;/p&gt;&lt;p&gt;&lt;b&gt;1. 虽然在上面抽小球的例子中我们进行大量重复性的实验并计算白球的频率（古典统计学手段），但对于是在生活中的很多实际问题，大量重复实验是不现实的。&lt;/b&gt;比如我们想推断川普当选美国总统的概率。显然，我们没法让美国人进行成千上万次不同的投票选举，然后计算川普获胜的频率。即便是通过民意调查的方式，进行成千上万次也是不切实际的（简单从成本的角度考虑就不可能）。因此，对于这个问题我们只能有非常有限的几次民意调查结果。我们当然可以只通过这些有限的结果利用古典统计学对川普获胜的概率做出估计，但是可以想象的是这个估计的误差会非常大。而贝叶斯统计则提供了新的视角。&lt;/p&gt;&lt;p&gt;&lt;b&gt;2. 合理的先验分布对未知量的估计是非常有益的。&lt;/b&gt;对生活中很多实际问题的判断都和人们的学识、经验、见识有关。在这种情况下，如果我们把有限和观测数据和根据知识和经验得到的先验结合起来，会得到对未知量更好的推断。在资产配置领域，高盛著名的 Black–Litterman 收益率模型（&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38282835&quot;&gt;Black-Litterman 模型 —— 贝叶斯框架下的资产配置利器&lt;/a&gt;）就是将从市场均衡假设推出的资产收益率作为先验，将基金经理的主观判断作为观测值，通过把它们两者结合来得到后验判断。它的本质也是贝叶斯统计。&lt;/p&gt;&lt;p&gt;可见，掌握贝叶斯统计并且使用它做推断，即&lt;b&gt;贝叶斯推断（Bayesian inference）&lt;/b&gt;，十分重要。贝叶斯统计框架的核心无疑就是&lt;b&gt;贝叶斯定理（Bayes&#39; rule）&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 贝叶斯定理&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;本节简要介绍贝叶斯定理，它是贝叶斯推断的核心。（对数学不感兴趣的读者可以跳过本节，这么做不会影响对后文的理解。）&lt;/p&gt;&lt;p&gt;贝叶斯定理的推导始于条件概率。&lt;b&gt;条件概率可以定义为：在事件 B 发生的前提下，事件 A 发生的概率。数学上用 P(A|B) 来表示这个条件概率。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;生活中条件概率屡见不鲜。比如在没有赶上 8 点这趟地铁，上班迟到的概率是多少？&lt;/p&gt;&lt;p&gt;条件概率 P(A|B) 的数学定义为：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A|B)=\frac{P(A\bigcap B)}{P(B)}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;这个公式的白话解释为：&lt;b&gt;“当 B 发生前提下 A 发生的概率”等于“A 和 B 同时发生的概率”除以“B 发生的概率”。&lt;/b&gt;用我们的例子来说，那就是“在没有赶上 8 点这趟地铁的前提下，上班迟到的概率”等于“没赶上 8 点这趟地铁且上班迟到的概率”除以“没赶上 8 点这趟地铁的概率”。将这个式子左右两边同时乘以 P(B) 得到 P(B)P(A|B) = P(A∩B)。&lt;/p&gt;&lt;p&gt;类似的，我们也可以求出 P(B|A)，即在 A 发生的前提下，B 发生的概率是多少。在上面例子中，这对应着“在上班迟到的前提下，没有赶上 8 点这趟地铁的概率是多少”？（上班迟到的原因可能很多，比如没赶上这趟地铁是一个，又比如赶上地铁了但是下地铁后去办公楼咖啡馆里耽搁了 10 分钟也是一个，或者因为早上发烧先去医院了等等。）根据定义：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(B|A)=\frac{P(B\bigcap A)}{P(A)}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;同样，两边同时乘以 P(A) （并且由 P(A∩B) = P(B∩A)）得到 P(A)P(B|A) = P(A∩B)。由此可知 &lt;b&gt;P(B)P(A|B) = P(A)P(B|A)&lt;/b&gt;。这个结果也可以写作如下形式，即大名鼎鼎的&lt;b&gt;贝叶斯定理&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A|B)=\frac{P(B|A)P(A)}{P(B)}&lt;/equation&gt; &lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 贝叶斯推断&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;由贝叶斯定理可以顺其自然得到贝叶斯推断。前文提到，贝叶斯统计的核心是通过新的观测数据（或者新的证据）来不断的更新我们对未知量的认知。&lt;/p&gt;&lt;p&gt;考虑一个假想的例子。假设我们的先验认知是明天太阳不会升起（即明天太阳不会升起的概率为 1）。然而，实际观测到的证据是每天太阳都照常升起。由此，我们会不断的修正之前那个先验，由此得到的后验认知是下一天太阳不会升起的概率越来越低。通过&lt;b&gt;新证据或者数据来更新认知的过程就是贝叶斯推断。&lt;/b&gt;下面我们来正式的描述它。&lt;/p&gt;&lt;p&gt;假设我们有一个需要估计的未知量 θ，并且针对该变量有一个先验分布 P(θ)。令 D 为一系列观测值或者证据。我们希望通过 D 来修正对 θ 的分布的认知，即 P(θ|D) 是我们感兴趣的。由贝叶斯定理可得：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(\theta|D)=\frac{P(D|\theta)P(\theta)}{P(D)}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在贝叶斯推断的框架下，上面公式中的这些概率量都有约定俗成的名字：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;P(θ)：&lt;/b&gt;θ 的先验分布（prior）。它表示在没有任何观测值序列 D 时我们对于 θ 的不确定性的认知。&lt;/li&gt;&lt;li&gt;&lt;b&gt;P(θ|D)：&lt;/b&gt;θ 的后验分布（posterior）。它表示在考虑了观测值序列 D 后，我们对于θ 的不确定性的改进的认知。&lt;/li&gt;&lt;li&gt;&lt;b&gt;P(D|θ)：&lt;/b&gt;可能性、似然度（likelihood）。它是当未知变量服从 θ 的前提下，我们观察到序列 D 的条件概率。&lt;/li&gt;&lt;li&gt;&lt;b&gt;P(D)：&lt;/b&gt;观测值或证据（evidence）。这是在考虑所有可能的 θ 的分布下，所能观测到序列 D 的非条件概率。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;可见，通过使用贝叶斯推断，我们可以合理的将先验认知和实际证据结合在一起，得到一个更新的后验认知。&lt;/p&gt;&lt;p&gt;&lt;b&gt;此外，贝叶斯推断框架的强大之处在于我们可以迭代的看问题，即在每次有新观测数据后我们可以得到一个新的后验分布，然后把它作为下个新数据出现前的（新的）先验分布。换句话说，在这个过程中我们通过反复迭代使用贝叶斯定理，持续更新对未知量的分布的认知。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 一个扔硬币的例子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;下面通过一个具体的例子来说明贝叶斯推断的过程。假设我们有一枚硬币，并且想要推断出扔硬币时得到头像（正面，heads）的概率 P(H) 是多少。用 θ 来表示这个概率。通过反复扔这枚硬币便可以得到一个由正面和（或）反面结果组成的观测序列，这就是观测序列 D。&lt;/p&gt;&lt;p&gt;假设在开始扔硬币前，我们对 θ 的分布 P(θ) 有如下先验猜想：θ 可以是 0 到 1 范围内的任何取值，并且均匀分布（比如 θ 等于 0 说明该硬币两面都不是头像；θ 等于 1 说明该硬币两面都是头像；θ 等于 0.5 意味着该硬币一面头像一面非头像，且质地均匀等）。在这个假设下，θ 的先验概率密度函数为 0 到 1 之间的一条水平线（下图）。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-edfad7a045e3aeaed83de5c79e959e6d_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;365&quot; data-rawheight=&quot;171&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-edfad7a045e3aeaed83de5c79e959e6d&quot; data-watermark-src=&quot;v2-942099d585a90e76f233c69f4f1ffa78&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;下面我们开始扔硬币。假设扔了两次后，得到了两次头像。根据贝叶斯推断（具体数学计算略去，下同），我们得到关于 θ 的更新后的（后验）概率密度函数如下图所示。可见由于连续看到两次头像面的结果，我们开始倾向于认为 θ 的取值是越接近 1 越有可能。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-1347926c419d6b1bb5f598d153268d3a_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;365&quot; data-rawheight=&quot;167&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-1347926c419d6b1bb5f598d153268d3a&quot; data-watermark-src=&quot;v2-a2aacb38abb5cabe21d2762b2d71fbe1&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;让我们继续实验。假如我们扔了 10 次后得到 8 次正面，而扔了 20 次后得到了 11 次正面。根据这些结果，我们不断更新 θ 的后验分布（下图）。 当 10 次中有 8 次正面时，我们会认为这个硬币很有可能是不公平的，即正面和反面出现的概率不同。而当 20 次中出现 11 次正面时，我们的认知会再次根据新的结果得到修正，我们开始认为这个硬币可能是公平的了。&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6cb7471623caab8a202445857b19ad9b_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;429&quot; data-rawheight=&quot;407&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-6cb7471623caab8a202445857b19ad9b&quot; data-watermark-src=&quot;v2-9eb17d3335c49e6df590739ca8d9796f&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;最后，下面两张图是经过了 50 次（27 次正面）和 500 次（232 次正面）实验后的 θ 的后验分布。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a19cc331e7227fcaf67bd9fab93a3544_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;423&quot; data-rawheight=&quot;402&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-a19cc331e7227fcaf67bd9fab93a3544&quot; data-watermark-src=&quot;v2-0a3da2dcec93efdea1acb3bf961ed9bc&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;随着越来越多的新结果的出现，我们对于 θ 的不确定性的认知越来越清晰；对于 θ 的不同取值的信心越来越高。特别的，我们越来越有把握的说 θ 最有可能的取值是 0.5 附近。这体现在 500 次实验后，θ 的后验分布 P(θ|D) 已经非常狭窄（换句话说，θ 的取值的标准差越来越小），且集中在 0.46 附近。假如这枚硬币确实是一枚公平的硬币，那么如果再进行 500 此实验，会发现 P(θ|D) 会更加狭窄且 θ 的取值一定会集中在 0.5 附近。&lt;/p&gt;&lt;p&gt;这个例子完美的展示了贝叶斯推断的强大。&lt;b&gt;我们一开始对未知量 θ 的猜测有非常大的不确定性（先验是 0 到 1 的均匀分布）。随着越来越多的观测值（500 个实验结果）的出现，通过迭代使用贝叶斯定理，逐步细化、完善我们对 θ 的不确定性的认知，最终得到了关于 θ 的不确定性的非常自信的后验分布（即 θ 的分布以 0.5 为中心，标准差非常小，它最有可能的取值就是 0.5）。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;贝叶斯统计是一个强大的工具；不熟悉它的人却对其敬而远之。下面是网上关于贝叶斯统计的一个笑话。它可能代表着很多吃瓜群众对贝叶斯统计的看法，以及贝叶斯统计学派的自嘲：&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;A Bayesian is one who, vaguely expecting a horse, and catching a glimpse of a donkey, strongly believes he has seen a mule.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：一个贝叶斯学派的学者是这样的：他模糊的期待着一匹马（先验），然而却看到了一头驴（证据），于是便自信的认为那是一头骡子（后验）。&lt;/i&gt;&lt;/blockquote&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-27-38553838</guid>
<pubDate>Wed, 27 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>朴素贝叶斯分类器</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-26-38533349.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38533349&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f3dfbbfbdc4d44d8ea1d288e3137e0ce_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 引言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;有监督分类是量化投资中常见的情景之一。比如，我们希望根据上市公司财报中的各种指标特征，区分出优秀的和差劲的股票，这就是一个分类问题。在机器学习中，有监督分类的算法有很多，比如 SVM、ANN 以及基于决策树的 AdaBoost 和随机森林等。这其中自然也少不了今天的主角&lt;b&gt;朴素贝叶斯分类器（Naïve Bayes classifiers）&lt;/b&gt;。它代表着&lt;b&gt;一类&lt;/b&gt;应用&lt;b&gt;贝叶斯定理&lt;/b&gt;的分类器的总称。朴素（naive）在这里有着特殊的含义、代表着一个非常强的假设（下文会解释）。&lt;/p&gt;&lt;p&gt;朴素贝叶斯分类器虽然简单，但是用处非常广泛（尤其是在文本分类方面）。在 IEEE 协会于 2006 年列出的十大数据挖掘算法中，朴素贝叶斯分类器赫然在列（Wu et al. 2008）。捎带一提，另外九个算法是 C4.5、k-Means、SVM、Apriori、EM、PageRank、AdaBoost、kNN 和 CART（那时候深度学习还没有什么发展）。&lt;/p&gt;&lt;p&gt;朴素贝叶斯分类器以贝叶斯定理为基础。下面首先回顾一下贝叶斯定理（熟悉的朋友可以跳过第 2 节）。之后会阐释“朴素”的意义并介绍朴素贝叶斯分类器。文章的最后使用一个例子说明如何使用朴素贝叶斯分类器选股。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 贝叶斯定理&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;贝叶斯定理的推导始于条件概率。&lt;b&gt;条件概率可以定义为：在事件 B 发生的前提下，事件 A 发生的概率。&lt;/b&gt;数学上用 P(A|B) 来表示该条件概率。条件概率 P(A|B) 的数学定义为：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A|B)=\frac{P(A\bigcap B)}{P(B)}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;这个公式的白话解释为：&lt;b&gt;“当 B 发生前提下 A 发生的概率”等于“A 和 B 同时发生的概率”除以“B 发生的概率”。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;生活中条件概率屡见不鲜。比如“在没有赶上 8 点这趟地铁的前提下，上班迟到的概率是多少？”应用条件概率的定义可知“在没有赶上 8 点这趟地铁的前提下，上班迟到的&lt;b&gt;条件&lt;/b&gt;概率”等于“没赶上 8 点这趟地铁且上班迟到的概率”除以“没赶上 8 点这趟地铁的概率”。将上式左右两边同时乘以 P(B) 得到：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(B)P(A|B)=P(A\bigcap B)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;类似的，我们也可以求出 P(B|A)，即在 A 发生的前提下，B 发生的概率是多少。在上面例子中，这对应着“在上班迟到的前提下，没有赶上 8 点这趟地铁的概率是多少”？（上班迟到的原因可能很多，比如没赶上这趟地铁是一个，又比如在公司楼下的咖啡馆里耽搁了 10 分钟也是一个，或者因为早上发烧先去医院了等等。）根据定义：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(B|A)=\frac{P(B\bigcap A)}{P(A)}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;同样，两边同时乘以 P(A) ，并且由 P(A∩B) = P(B∩A)，得到：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A)P(B|A)=P(A\bigcap B)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;由此可知 P(B)P(A|B) = P(A)P(B|A)。这个结果也可以写作如下形式，即大名鼎鼎的&lt;b&gt;贝叶斯定理（Bayes rule）&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(A|B)=\frac{P(A)P(B|A)}{P(B)}&lt;/equation&gt; &lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 何为“朴素”？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;下面我们将贝叶斯定理应用于有监督的分类场景。令 &lt;b&gt;X&lt;/b&gt; 代表一个 n 维特征向量（它代表着一组特征，即 features），这些特征用来描述一个对象；C 代表该对象所属的类别。分类的目的是找到 &lt;b&gt;X&lt;/b&gt;和 C 之间的映射关系，从而计算出 P(C|&lt;b&gt;X&lt;/b&gt;)，即当待分类的对象具备 &lt;b&gt;X&lt;/b&gt; 这些特征时，它属于 C 类的条件概率。&lt;/p&gt;&lt;p&gt;具体的，假设类别的个数为 K（即 C 的取值有 K 个），那么对于每一个可能的取值（记为 c_k，k = 1, 2, …, K），我们需要根据给定的特征 &lt;b&gt;X&lt;/b&gt; 计算出概率 P(C=c_k|&lt;b&gt;X&lt;/b&gt;)。然后，&lt;b&gt;只要从所有的&lt;/b&gt;P(c_k|&lt;b&gt;X&lt;/b&gt;) &lt;b&gt;中挑出取值最大的概率对应的&lt;/b&gt; c_k &lt;b&gt;作为最有可能的分类即可。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;利用贝叶斯定理，P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 可以写作：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(C=c_k|\mathbf{X})=\frac{P(\mathbf{X}|C=c_k)P(C=c_k)}{P(\mathbf{X})}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;由于对有所的 P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 来说，上式右侧的分母都相同（和 C 的取值无关），因此我们只需要根据训练集数据来估计所有的 P(&lt;b&gt;X&lt;/b&gt;|C=c_k) 以及所有的 P(C=c_k) 即可。下面来看看为了实现这个目标，需要多大的样本空间。&lt;/p&gt;&lt;p&gt;考虑最简单的情况。假设 n 维向量 &lt;b&gt;X&lt;/b&gt; 中的每一个特征以及类别 C 都是二元的（binary）。因此，特征向量 &lt;b&gt;X&lt;/b&gt; = {X_1, X_2, …, X_n} 所有可能的取值为 2^n 个（因为每个 X_i 的取值有 2 个，而一共有 n 个 X_i）。此外，C 的取值也是 2 个。因此，仅从 P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 来说，需要估计的参数就高达 2×(2^n - 1) 个。而这仅仅是从特征空间所有取值组合可能性出发的最低要求。事实上，为了得到准确的参数估计，对于每一个 n 维特征的组合，我们都需要多个观测值来计算 P(C=c_k|&lt;b&gt;X&lt;/b&gt;) 的概率。这进一步增加了对样本空间大小的要求。举例来说，如果特征空间的维度 n = 30，那么我们需要估计超过 30 亿个参数！&lt;/p&gt;&lt;p&gt;在现实的应用场景中，n = 30 是否常见？非常常见。比如上市公司的特征就可以轻松超过 30 个。而在现实的应用场景中，我们拥有超过 30 亿个样本来估计 30 亿个参数是否常见？痴人说梦。因此，&lt;b&gt;想利用有限的样本数据估计出所有的&lt;/b&gt; P(&lt;b&gt;X&lt;/b&gt;|C=c_k) &lt;b&gt;和&lt;/b&gt; P(C=c_k) &lt;b&gt;是不切实际的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;为什么有这么多参数需要估计呢？这是因为在求解 P(&lt;b&gt;X&lt;/b&gt;|C=c_k) 时，我们考虑的是 &lt;b&gt;X&lt;/b&gt; = (x_1, x_2, …, x_n) 在 C = c_k 这个条件下的&lt;b&gt;条件联合分布&lt;/b&gt;，这大大增加了待估计的参数的个数。为了解决这个问题，“朴素”闪亮登场。&lt;/p&gt;&lt;p&gt;朴素贝叶斯在求解 P(&lt;b&gt;X&lt;/b&gt;|C=c_k) 时做了一个非常强的假设 —— &lt;b&gt;条件独立性（conditional independence）&lt;/b&gt;。&lt;b&gt;它的意思是在给定的类别&lt;/b&gt; C = c_k &lt;b&gt;下，不同维度特征的取值之间是相互独立的。&lt;/b&gt;比如令 X_1 和 X_2 代表 n 维里面的两个维度，则 P(X_1=x_1|C=c_k) 的概率与 X_2 的取值无关，即：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;P(X_1=x_1|C=c_k)=P(X_1=x_1|X_2=x_2,C=c_k)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;举个例子，下雨、打雷和闪电是三种天气。我们可以假设在闪电发生的条件下，下雨和打雷之间互为条件独立。这是因为闪电通常会伴随着打雷，而当闪电发生时，是否打雷和之后是否一定会下雨就没什么关系了。当然，打雷和下雨通常在非条件下是相关的，我们仅仅假设在闪电发生的条件下，它们满足条件独立。&lt;/p&gt;&lt;p&gt;上述例子强调了&lt;b&gt;在朴素贝叶斯中，我们仅仅假设特征之间满足条件独立性，而非一般的独立性。&lt;/b&gt;在条件独立性假设下，反复利用条件概率的定义，P(&lt;b&gt;X&lt;/b&gt; = (x_1, x_2, …, x_n)|C=c_k) 可以写成 P(X_1=x_1|C=c_k) × P(X_2=x_2|C=c_k) × … × P(X_n=x_n|C=c_k)：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rll} P(\mathbf{X}|C=c_k)&amp;amp;=&amp;amp;P(X_1=x_1,X_2=x_2,\cdots,X_n=x_n|C=c_k)\\\\ &amp;amp;=&amp;amp;P(X_1=x_1|C=c_k)\times P(X_2=x_2|X_1=x_1,C=c_k)\times\\ &amp;amp;&amp;amp;~P(X_3=x_3|X_1=x_1,X_2=x_2,C=c_k)\times\cdots\times\\ &amp;amp;&amp;amp;~P(X_n=x_n|X_1=x_1,X_2=x_2,\cdots,X_{n-1}=x_{n-1},C=c_k)\\\\ &amp;amp;=&amp;amp;P(X_1=x_1|C=c_k)\times P(X_2=x_2|C=c_k)\times\\ &amp;amp;&amp;amp;~P(X_3=x_3|C=c_k)\times\cdots\times\\ &amp;amp;&amp;amp;~P(X_n=x_n|C=c_k)\\\\ &amp;amp;=&amp;amp;\displaystyle\prod_{i=1}^n P(X_i=x_i|C=c_k) \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在前面提及的特征和类别均为 binary 的情况下，这将待估计的参数从 2×(2^n - 1) 个直接减少到 2n 个。&lt;b&gt;这大大简化了对样本空间的要求以及求解的计算量，使得朴素贝叶斯算法非常简单。条件独立性的假设便是“朴素”一词的来源。&lt;/b&gt;因此，朴素贝叶斯通常也被称为&lt;b&gt;简单贝叶斯（simple Bayes）&lt;/b&gt;或&lt;b&gt;独立贝叶斯（independence Bayes）&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 朴素贝叶斯分类器&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通过上一节对“朴素”含义的说明，朴素贝叶斯分类器的大致轮廓已经比较清晰了。本节就来正式说明其数学表达式。对于特征向量 &lt;b&gt;X&lt;/b&gt; 和类别 C，利用贝叶斯定理和条件独立性的假设，写出每个 C = c_k 的条件概率：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rll} P(C=c_k|X_1,X_2,\cdots,X_n)&amp;amp;=&amp;amp;\displaystyle\frac{P(C=c_k)P(X_1,X_2,\cdots,X_n|C=c_k)}{P(X_1,X_2,\cdots,X_n)}\\\\ &amp;amp;=&amp;amp;\displaystyle\frac{P(C=c_k)\prod_{i=1}^n P(X_i|C=c_k)}{P(X_1,X_2,\cdots,X_n)} \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;接下来使用训练集数据，估计出所有的 P(C=c_k) 以及 P(X_i=x_i|C=c_k) 即可，而无需考虑上式中的分母，因为它和 C 的取值无关。对于新的待分类样本，使用它的特征向量取值对每个 c_k 求出 P(C=c_k) × Π_i P(X_i=x_i|C=c_k)，并比较这些值中最大的，就可以确定这个新样本的分类：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;C\leftarrow\arg\max_{c_k} P(C=c_k)\prod_{i=1}^n P(X_i|C=c_k)&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;&lt;b&gt;以上就是朴素贝叶斯分类器的数学表达式。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在实际的应用中，根据特征变量是离散的还是了连续的，在使用训练集数据估计 P(X_i=x_i|C=c_k) 时，又有不同的处理方法。在离散的情况下，只需要 counting（计数），即：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\hat P(X_i=x_i|C=c_k)=\frac{\#\{X_i=x_i\bigwedge C=c_k\}}{\#\{C=c_k\}}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中 #{X_i=x_i Λ C=c_k} 表示训练集中 X_i = x_i 和 C = c_k 共同发生的次数；#{C=c_k} 表示训练集中 C = c_k 发生的次数。这个估计方法称作&lt;b&gt;最大似然估计（maximum likelihood estimate）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;b&gt;在一些情况下，由于样本数据极度匮乏，很有可能出现某个特征的取值和某个类别的取值在训练集中从未同时出现过，即&lt;/b&gt; #{X_i=x_i Λ C=c_k} = 0&lt;b&gt;，这会造成对&lt;/b&gt; P(X_i=x_i|C=c_k) &lt;b&gt;的估计等于零。&lt;/b&gt;P(X_i=x_i|C=c_k) = 0 会导致对应的 P(C=c_k) × Π_i P(X_i=x_i|C=c_k) = 0，即让我们误以为这个样本属于某个类别 c_k 的概率为 0。这是不合理的，&lt;b&gt;不能因为一个事件没有观察到就认为该事件不会发生。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;解决这个问题的办法是给每个特征和类别的组合加上给定个数的&lt;b&gt;虚假样本（“hallucinated” examples）&lt;/b&gt;。假设特征 X_i 的取值有 J 个，并假设为每个 x_i 对应的 #{X_i=x_iΛC=c_k} 增加 s 个虚假样本，这样得到对 P(X_i=x_i|C=c_k) 的估计称为&lt;b&gt;平滑估计（smoothed estimate）&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\hat P(X_i=x_i|C=c_k)=\frac{\#\{X_i=x_i\bigwedge C=c_k\}+s}{\#\{C=c_k\}+sJ}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;特别的，当 s = 1 时，上述平滑称为&lt;b&gt;拉普拉斯平滑（Laplace smoothing）&lt;/b&gt;。类似的，对于 P(C=c_k) 的估计也可以采用平滑的方式：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\hat P(C=c_k)=\frac{\#\{C=c_k\}+t}{\#\{C\}+tK}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中，t 为对每个类增加的虚假样本数，K 是类别个数，#{C} 表示训练集的样本数。&lt;/p&gt;&lt;p&gt;当特征是连续变量时，情况稍微复杂一些。在使用训练集求解 P(X_i=x_i|C=c_k) 时，&lt;b&gt;需要假设该条件概率分布的形式。&lt;/b&gt;一种常见的假设是认为对于给定的 c_k，P(X_i=x_i|C=c_k) 满足正态分布，而正态分布的均值和标准差需要从训练集学习得到。这样的模型称为&lt;b&gt;高斯朴素贝叶斯分类器（Gaussian Naïve Bayes classifier）&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 一个例子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;下面我们用朴素贝叶斯分类来选股看看。假设描述上市公司的特征有 7 个维度：市盈率、市净率、净资产收益率、总资产周转率变动率、预期盈利增长修正、20 日涨幅、以及市值。为了简化讨论，令每一个特征的取值都是 binary 的，即分为高或者低；进一步令类别也是 binary 的，即好公司（买入后的一段时间内股价上涨）或者差公司（买入后的一段时间内股价下跌）。假设训练集中共有 20 个公司，它们的特征和类别如下表所示。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-25fb9a0b7939d2566b4574fdfabd7f7f_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;769&quot; data-rawheight=&quot;533&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;使用这个训练集来估计所有的 P(X_i=x_i|C=c_k) 和 P(C=c_k) 的取值。通过计数（counting）以及拉普拉斯平滑就可以求出这些参数的估计量（见下表）。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-13522ce649d58c1a8259ac72574710c4_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;583&quot; data-rawheight=&quot;371&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;使用这些估计量就可以对任意给定的新公司分类。比如对于某上市公司，它的特征分别为：市盈率低、市净率高、净资产收益率高、总资产周转率变动率高、预期盈利增长修正低、20 日涨幅高、市值低。使用朴素贝叶斯，对好公司和差公司这两类，分别计算 P(C=c_k) × Π_i P(X_i=x_i|C=c_k) 的取值：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4452b202d608da86be765e323cda7d70_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;649&quot; data-rawheight=&quot;271&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;由于 0.00753 &amp;gt; 0.00036，因此朴素贝叶斯分类对该公司的分类结果是好公司。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 结语 —— 朴素贝叶斯为什么靠谱？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;由于条件独立性这个强假设的存在，朴素贝叶斯分类器十分简单。但是，&lt;b&gt;它仍然有非常不错的效果。&lt;/b&gt;原因何在呢？人们在使用分类器之前，首先做的第一步（也是最重要的一步）往往是&lt;b&gt;特征选择（feature selection），&lt;/b&gt;这个过程的目的就是为了&lt;b&gt;排除特征之间的共线性、选择相对较为独立的特征。&lt;/b&gt;其次，当我们假设特征之间相互独立时，这事实上就暗含了正则化的过程；而&lt;b&gt;不考虑变量之间的相关性有效的降低了朴素贝叶斯的分类方差。&lt;/b&gt;虽然这有可能提高分类的偏差，但是如果这样的偏差不改变样本的排列顺序，那么它对分类的结果影响不大。由于这些原因，朴素贝叶斯分类器在实际中往往能够取得非常优秀的结果。Hand and Yu (2001) 通过大量实际的数据表明了这一点。&lt;/p&gt;&lt;p&gt;最后，我们以 Wu et al. (2008) 中对朴素贝叶斯分类器的高度概括作为全文的收尾：&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;The naive Bayes model is tremendously appealing because of its simplicity, elegance, and robustness. It is one of the oldest formal classification algorithms, and yet even in its simplest form it is often surprisingly effective. It is widely used in areas such as text classification and spam filtering. A large number of modifications have been introduced, by the statistical, data mining, machine learning, and pattern recognition communities, in an attempt to make it more flexible, but one has to recognize that such modifications are necessarily complications, which detract from its basic simplicity.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：朴素贝叶斯模型因其简单、优雅和鲁棒性而极具吸引力。它是最古老的形式化分类算法之一，但即使是最简单的形式，它也常常令人惊讶地有效。它被广泛应用于文本分类和垃圾邮件过滤等领域。统计、数据挖掘、机器学习和模式识别领域的专家们通过对它进行了大量的修改，试图使其更加灵活。但人们必须认识到，这种修改必然是复杂的，这削弱了它的基本简单性。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Hand, D. J. and K. Yu (2001). Idiot’s Bayes – not so stupid after all? &lt;i&gt;International Statistical Review&lt;/i&gt;, Vol. 69(3), 385 – 398.&lt;/li&gt;&lt;li&gt;Wu, X., V. Kumar, J. R. Quinlan, J. Ghosh, Q. Yang, H. Motoda, G. J. McLachlan, A. Ng, B. Liu, P. S. Yu, Z. Zhou, M. Steinbach, D. J. Hand, and D. Steinberg (2008). Top 10 algorithms in data mining. &lt;i&gt;Knowledge and Information Systems&lt;/i&gt;, Vol. 14(1), 1 – 37.&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-26-38533349</guid>
<pubDate>Tue, 26 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>获得诺奖的行为金融学是怎么一回事</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-26-38526672.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38526672&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-c76c662a3fd5b1f6839bcf41c2d34e55_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;0 引子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;如果必须从下面两个选项中做出选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a） 100% 损失 3000 元&lt;/li&gt;&lt;li&gt;（b） 80% 损失 4000 元；20% 概率无损失&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;你会选哪个？&lt;/p&gt;&lt;p&gt;从经济学的角度，前者的损失预期是 3000，后者的损失预期是 3200（4000 x 80%），显然前者更优。然而实际情况却是，大多数人都选择了后者。其中的差异就来自人性的影响。&lt;/p&gt;&lt;p&gt;我们在这篇文章中就来谈谈投资中的人性因素，主要以行为金融学中获得诺贝尔奖的&lt;b&gt;前景理论（Prospect Theory）&lt;/b&gt;为基础。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;1 几个有趣的小实验&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;1.1 你比想象中善变&lt;/b&gt;&lt;/p&gt;&lt;p&gt;实践是检验真理的唯一标准。我们先来看三组一共 6 个实验。在每个实验中，实验者都被提供了两个选项，必须从中选择一个。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 1&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）80% 的概率得到 4000 元&lt;/li&gt;&lt;li&gt;（b）100% 得到 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，20% 的人选择了（a）而 &lt;b&gt;80% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 2&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）20% 的概率得到 4000 元&lt;/li&gt;&lt;li&gt;（b）25% 的概率得到 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;65% 的人选择了（a）&lt;/b&gt;而 35% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 1 ~ 2 的分析：&lt;/p&gt;&lt;p&gt;在实验 1 中，尽管期望收益更大的是（a）（4000 x 80% = 3200元），但绝大多数参与者更喜欢能一定到手的 3000 元（b）。&lt;/p&gt;&lt;p&gt;在实验 2 中，与实验 1 的唯一区别是将选项的确定性减小到之前的 1/4，但结果竟然完全相反。大部分选择（a）的参与者认为，既然两个选项都不怎么确定了，那么（a）显然比（b）的期望收益要高（4000 x 20% = 800，大于 25% x 3000 = 750）。&lt;/p&gt;&lt;p&gt;这组实验说明，&lt;b&gt;收益为正的选项中，拥有确定性的选项（如实验1中的（b））给人的主观价值会大于其真实价值。换言之，在面对正收益时，人们往往更加厌恶风险。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果选项的结果不是金钱而是某种福利（比如免费旅游），也可以得到同样的结论。考虑如下实验 3 和 4，其中实验 4 是实验 3 去掉了 90% 的确定性后得到的。结论和实验 1 和 2 完全一致。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 3&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率得到一次包括英格兰、法国、意大利的三周免费旅游&lt;/li&gt;&lt;li&gt;（b）确切地（100%）得到一次英格兰的一周免费旅游&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，22% 的人选择了（a）而 &lt;b&gt;78% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 4&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）5% 的概率得到一次包括英格兰、法国、意大利的三周免费旅游&lt;/li&gt;&lt;li&gt;（b）10% 的概率得到一次英格兰的一周免费旅游&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;67% 的人选择了（a）&lt;/b&gt;而 33% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;前面的两组实验考察了当所有选项都有正期望收益时，结果的确定性对做决策产生的影响。那么当所有选项的期望收益都为负（即损失）时，又会怎样的？考察下面的实验 5 和 6。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 5&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）80% 的概率损失 4000 元&lt;/li&gt;&lt;li&gt;（b）确切地（100%）损失 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;92% 的人选择了（a）&lt;/b&gt;而仅有 8% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 6&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）20% 的概率损失 4000 元&lt;/li&gt;&lt;li&gt;（b）25% 的概率损失 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，42% 的人选择了（a）而 &lt;b&gt;58% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 5 ~ 6 的分析：&lt;/p&gt;&lt;p&gt;在实验 5 中，92% 的参与者选择了（a）。虽然（a）有很高的概率（80%）损失 4000 元，但绝大多数人仍然觉着它比确定的损失 3000 元更好（主观价值更高）。&lt;b&gt;似乎所有人都认为在面对亏损时，运气会站在自己这一边。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;而当我们从两个选项中都去掉 75% 的确定性后（实验 6），人们又似乎“恢复了理智”，选择了期望亏损相对更低的选项（b）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;这两个实验说明，在面对潜在亏损时，人们往往能够容忍甚至愿意承担更高的风险。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;实验 1 ~ 6 带给我们的结论：&lt;b&gt;确定性和反射性&lt;/b&gt;&lt;/p&gt;&lt;p&gt;以上 6 个实验说明了人们在做决策时，&lt;b&gt;格外偏好具备高确定性且收益为正的选项&lt;/b&gt;，&lt;b&gt;格外厌恶具备高确定性且收益为负的选项&lt;/b&gt;；而当确定性大幅降低后，人们又恢复了理智。&lt;/p&gt;&lt;p&gt;正收益实验（实验 1 ~ 4）和负收益实验（实验 5 ~ 6）说明，当不改变结果的概率而仅改变结果的正负号（盈余变为亏损），人们的选择将截然相反。这个现象被称为&lt;b&gt;反射性&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;1.2 你比想象中容易被忽悠&lt;/b&gt;&lt;/p&gt;&lt;p&gt;简化是人类进步的核心动力，这就使得人们在面对不同选择时，往往忽略相同的部分，而专注于不同的部分作为决策的基础。&lt;/p&gt;&lt;p&gt;然而这种简化可能导致大相径庭的结果。实验7说明了这一点。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 7&lt;/b&gt;&lt;/p&gt;&lt;p&gt;假设某游戏由两个阶段组成：&lt;/p&gt;&lt;p&gt;阶段一，25% 概率晋级下一轮，75% 概率被淘汰；阶段二，在两个选项中进行选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）80% 的概率得到 4000，&lt;/li&gt;&lt;li&gt;（b）100% 的概率得到 3000。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;最有意思的地方来了：参与者必须在&lt;b&gt;游戏开始前&lt;/b&gt;就在（a）和（b）中做出选择。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;由于这个游戏的特殊规则，参与者（在游戏开始前）实际上是在以下两个选项中做决定：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a’）20% 的概率得到 4000 元&lt;/li&gt;&lt;li&gt;（b’）25% 的概率得到 3000 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;注意，这实际上和实验 2 的两个选项是完全一致的。然而，在这个新实验中，&lt;b&gt;78% 的参与者选择了（b）&lt;/b&gt;，这和实验 2 的结论完全相反（&lt;b&gt;实验 2 中 65% 的人选择了（a）&lt;/b&gt;）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 7 的分析：&lt;/p&gt;&lt;p&gt;之所以产生这样的“矛盾”，是因为在实验 7 中，&lt;b&gt;人们忽略掉了游戏的第一阶段&lt;/b&gt;（因为该阶段对于两个选项是一样的），而仅仅根据第二阶段的结果来比较两个选项。&lt;b&gt;而第二阶段的选择相当于实验 1&lt;/b&gt;（即得到 3000 元这个选项是确定的），所以大多数参与者选择了选项（b）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;这个实验说明了人们的选择可以因“对结果的概率的描述不同”而改变。&lt;/b&gt;此外，人们的选择还可以因“&lt;b&gt;对于结果的描述不同&lt;/b&gt;”而改变。来看下面的实验 8 和 9。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 8&lt;/b&gt;&lt;/p&gt;&lt;p&gt;假设在你现有财富的基础上，先给你 1000 块钱，然后需要你再从下面两个选项中选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率再得到 1000&lt;/li&gt;&lt;li&gt;（b）100% 的概率再得到 500&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;结果表明，16% 的人选择（a），而 &lt;b&gt;84% 的人选择（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 9&lt;/b&gt;&lt;/p&gt;&lt;p&gt;假设在你现有财富的基础上，先给你 2000 块钱，然后需要你再从下面两个选项中选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）50% 的概率失去 1000&lt;/li&gt;&lt;li&gt;（b）100% 的概率失去 500&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;结果表明，&lt;b&gt;69% 的人选择（a）&lt;/b&gt;，而 31% 的人选择（b）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对实验 8 ~ 9 的分析：&lt;/p&gt;&lt;p&gt;可以看到，大多数人在实验 8 中选择（b），而在实验 9 中选择（a）。这样的结果并不令人意外。正如前所属，&lt;b&gt;由确定性和反射性可知，人们在收益前厌恶风险，而在损失前偏好风险&lt;/b&gt;（实验 1 ~ 6）。&lt;/p&gt;&lt;p&gt;然而，尽管两个实验获得的&lt;b&gt;最终财富&lt;/b&gt;（选项（a）都是有 50% 的概率增加 2000 元或 1000 元，而选项（b）都是确定地得到 1500 元）被设置为&lt;b&gt;完全一致&lt;/b&gt;，但实验结果却截然相反。这清楚地显示，&lt;b&gt;参与者忽略了“先得到的钱”这个一致的前提条件，而仅仅是基于后面的选项本身做决定。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这组实验说明了如下这个非常重要的结论：&lt;b&gt;人在做决策时，不同结果带给他的主观价值是取决于这个结果给他的财富带来的变化，而非其财富的最终状态。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 行为金融学和前景理论&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;以上几个实验均出自由 Daniel Kahneman 和 Amos Tversky 提出的&lt;b&gt;行为金融学&lt;/b&gt;中最重要的&lt;b&gt;前景理论&lt;/b&gt;（Prospect Theory，又译作前景理论，Kahneman于 2002 年因其获得诺贝尔经济学奖。Tversky 于 1996 年去世，而诺贝尔奖不追授颁奖时已逝 6 个月以上的学者）。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d5aac6bd13ecad4a9fb7776099ea9ec8_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;293&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;（Daniel Kahneman（左）和 Amos Tversky（右））&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;作为行为经济学的一个分支，行为金融学研究投资者行为。它认为证券的市场价格并不只由证券内在价值所决定，还在很大程度上受到投资者主体行为的影响，即投资者心理与行为对证券市场的价格决定及其变动具有重大影响。&lt;/p&gt;&lt;p&gt;由于投资品收益的不确定性，投资者事实上都是在风险下做决策（decision-making under risk），这也是行为金融学主要研究内容。在这方面，最著名的模型包括期望效用理论（Expected Utility Theory, Bernoulli 1954）和前景理论（Kahneman and Tverskey 1979）。两者相较，后者可以解释所有前者能解释的现象，但反之则不然。可见，前景理论优于前者。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 对前景理论的感性认识&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;前景理论研究人如何在风险下做决策。&lt;/p&gt;&lt;p&gt;这个问题可以描述为，一个人可能面对着 n &amp;gt; 1 种不同的选项，每个选项可以有 m &amp;gt;= 1 种结果，而每个结果有一定的实现概率（注：当某个选项只产生一个结果时，我们说该结果是确定的，即它的实现概率是 100%）。当人们面对不同的选项时：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;b&gt;首先评估每个选项中所有可能结果，并据此得到每个选项对于他自己的“主观价值”；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;然后再比较所有选项的“主观价值”高低；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;最后选择价值最高的那个选项。&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;前景理论分析的便是人们在风险下为不同选项赋予“主观价值”背后蕴含的逻辑。&lt;/p&gt;&lt;p&gt;通过我们此前实验 1 ~ 9 的分析，相信你已经对人如何在风险下做实验有了一些感性的认识。下面我们就来阐述前景理论的数学模型。它由价值函数和权重函数组成。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 前景理论的数学模型：价值函数与权重函数&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;为了做最利于自己的选择，决策者必须评估每个选项的价值，然后比较不同的选项。&lt;b&gt;每个选项的最终价值（V）由价值函数（v）和权重函数（w）决定。&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;价值函数以结果的实际价值为自变量，得到的是该结果对于决策者的主观价值；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;权重函数以结果的产生概率为自变量，得到的是这个结果对其所属选项的影响程度。&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;为简化讨论，假设选项中有两个非零的结果（x 和 y），它们的实现概率分别为（p 和 q）。则这个选项的价值 V(x,p;y,q) 可以由如下方程得到：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;V(x,p;y,q) = w(p)v(x) + w(q)v(y)&lt;/equation&gt;&lt;/p&gt;&lt;p&gt;由此可知，为了确定一个选项的价值，必须研究价值函数和权重函数的数学特征。下面一一介绍。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;4.1 价值函数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;当决策者评估每个选项中的不同结果时，他感受到的是每个结果对他的主观价值 v(x)，而非该结果的真实价值 x。主观价值是选项中不同结果的真实价值的函数，但不等同于真实价值。&lt;/b&gt;举个生活中的例子，假如两个人都把手放在两个水温一样的盆里，他们感受到的水温可能因为他们之前接触过冷的或者热的物体而截然不同。&lt;/p&gt;&lt;p&gt;&lt;b&gt;前景理论中对于价值函数的刻画中，另一个非常重要的本质是，价值取决于财富的变化量，而非财富的最终状态&lt;/b&gt;（回顾实验 8 和 9）。&lt;b&gt;这说明价值的衡量由两个因素决定：变化的初始状态（称作参考点）以及变化的幅度。&lt;/b&gt;因为只有定义了参考点之后，才能正确描述一个选项的结果是带来正收益还是负收益。当参考点在决策过程中发生变化时，一个正收益的结果可能会变成一个负收益的结果，反之亦然。比如下面这两幅图，中间小长方形的颜色是一样的。然而，取决于它边上的大长方形的深浅，我们可以得到关于中间小长方形深浅的不同的结论。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2f994ab303eb6d56605e3c473befdb24_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;663&quot; data-rawheight=&quot;215&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;对于价值函数的形状，前景理论定性的指出：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;当结果为正收益时，价值函数为结果的凹函数；&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;当结果为负收益时，价值函数为结果的凸函数。&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;换句话说，对于正收益（负收益）结果，随着结果本身的增加（减少），&lt;b&gt;结果的变化带来的边缘价值逐步减少。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;举个例子，比如将室温从 3 度提高到 6 度，以及从 13 度提高到 16 度，二者都是提高了 3 度，但显然前者给人的边缘感受要强于后者。又或者，比如从亏了 100 变成亏了 200，以及从亏了 1100 到亏了 1200，两者都是多亏损 100 块，但显然前者给人的边缘感受高于后者。&lt;/p&gt;&lt;p&gt;&lt;b&gt;凹函数的性质表明，对于两个正收益的结果 x1 和 x2，它们的主观价值满足v(x1+x2) &amp;lt; v(x1) + v(x2)&lt;/b&gt;；&lt;b&gt;凸函数的性质表明，对于两个负收益的结果 -y1 和 -y2，它们的主观价值满足&lt;/b&gt; &lt;b&gt;v(-y1-y2) &amp;gt; v(-y1) + v(-y2)。&lt;/b&gt;此外，前景理论认为&lt;b&gt;亏损部分的增长快于收益部分的增长&lt;/b&gt;。基于这些特点，可以得到定性的价值函数曲线如下图所示。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-35189cbd0cb05d95e516f0902ed912e5_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;771&quot; data-rawheight=&quot;509&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;价值函数&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;4.2 权重函数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;决定每个选项的第二个重要因素是选项中每个结果的权重。&lt;b&gt;权重 w(p) 是结果的产生概率 p 的函数，但它不是概率。它衡量的是每个结果对其所在的选项的影响，而非仅仅是该结果发生的可能性。&lt;/b&gt;然而特别的，当结果发生的概率为0时，w(0) = 0；当结果发生的概率为 1 时，w(1) = 1。当 0 &amp;lt; p &amp;lt; 1 时 w(p) 是什么样呢？&lt;/p&gt;&lt;p&gt;前景理论指出，&lt;b&gt;如果一个结果产生的概率非常小（微乎其微），人们往往容易放大这种可能性&lt;/b&gt;，即当p非常小时，w(p) &amp;gt; p。考虑如下实验 10 和 11。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 10&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）0.1%（百分之 0.1，非常小）的概率得到 5000 元&lt;/li&gt;&lt;li&gt;（b）100% 的概率得到 5 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，&lt;b&gt;72% 的人选择了（a）&lt;/b&gt;而仅有 28% 的人选择了（b）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;实验 11&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;（a）0.1%（百分之 0.1，非常小）的概率损失 5000 元&lt;/li&gt;&lt;li&gt;（b）100% 的概率损失 5 元&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;在所有参与者中，17% 的人选择了（a）而 &lt;b&gt;83% 的人选择了（b）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;对实验 10 ~ 11 的分析：&lt;/p&gt;&lt;p&gt;实验 10 实际上描述了一个生活中非常熟悉的场景。我们平时买彩票就类似这个情况。假设一张彩票是 5 元钱，而买了彩票后你有千分之一的机会得到 5000。这看起来是如此诱人，以至于绝大多数实验者选择了（a）。这是因为人们放大了这个千分之一的可能性在评估两个选项时对选项（a）的作用。&lt;/p&gt;&lt;p&gt;同样的，在实验 11 中，人们也放大了损失 5000 这件事对应的千分之一的可能性。这就像人们买保险一样，和损失的 5 元保险费相比，人们更愿意避免千分之一才会发生的损失 5000 元的事故。因此，二者之间更多的人选择了（b）。在 Markowitz (1952) 中也有类似的描述。&lt;/p&gt;&lt;p&gt;尽管对于很小的 p 有 w(p) &amp;gt; p，前景理论指出，对于任意的 0 &amp;lt; p &amp;lt; 1，有 w(p) + w(1-p) &amp;lt; 1，这个性质称为&lt;b&gt;次确定性（subcertainty）&lt;/b&gt;。这个特性揭示了人们对于不确定事件态度的重要特征，即两个在发生概率上完全互补的事件（即注定会发生其中某一个）的权重之和小于1。除此之外，前景理论还说明了权重函数满足&lt;b&gt;次比例性（subproportionality）&lt;/b&gt;和&lt;b&gt;次可加性（subadditive）&lt;/b&gt;。这里不详细论述。基于权重函数的特点，前景理论给出它的定性图形如下图所示。注意，&lt;b&gt;该函数在概率 p 为 0 和 1 的时候是不连续的，是突变的。&lt;/b&gt;&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cbb7d8cc81a188789b9e813ae4072d37_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;658&quot; data-rawheight=&quot;542&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;权重函数&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;权重函数是非线性的，而且当 0 &amp;lt; p &amp;lt; 1 时它是凸函数。&lt;b&gt;这说明结果概率的增量带给人们的边缘权重增量随着概率本身的增大而增大。这可以理解为人们对确定性的一种追逐。&lt;/b&gt;比如在俄罗斯轮盘赌（Russian roulette），我们有机会花钱来从左轮手枪中减少一发子弹。在这种情况下，根据枪膛中剩余子弹数目的不同，人们愿意花不同的价钱。显然把子弹从 2 颗减少到 1 颗比把子弹从 4 颗减少到 3 颗会让人愿意出更多的价钱。在前者中，我们把结果（不被击中）的概率从 4/6 提高到了 5/6；而在后者中，我们把结果的概率从 2/6 提高到了 3/6。虽然都是提高了 1/6，但显然前者的吸引力大于后者。这显示了w(p) 的凸性。如果仅剩余 1 颗子弹而我们可以通过花钱来把它去掉的话（把不被击中的概率提升到1），那么无论出多少价都是值得的。&lt;b&gt;这既说明了 w(p) 在 p = 1 时的突变，又说明了确定性可以显著提升人们的决策权重&lt;/b&gt;（如同本文开篇的几个实验中展示的那样）。&lt;/p&gt;&lt;p&gt;了解了价值函数和权重函数的定性特性后，我们便可以利用前景理论做决策了。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 用前景理论解释身边的例子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;考虑几个假想的例子（来自网络）。假如上市公司要进行消息发布，在下面的每个情境中，上市公司应该一起发布还是分开发布呢？&lt;/p&gt;&lt;ul&gt;&lt;li&gt;情景 1：有两个好消息要发布&lt;/li&gt;&lt;li&gt;情景 2：有两个坏消息要发布&lt;/li&gt;&lt;li&gt;情景 3：有一个大大的好消息和一个小小的坏消息&lt;/li&gt;&lt;li&gt;情景 4：有一个大大的坏消息和一个小小的好消息&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;根据前景理论中价值函数的特性，不难得出结论。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;情景 1：假设两个消息的正结果价值为 x 和 y，因为 v(x) + v(y) &amp;gt; v(x+y)，该公司应该分开发布好消息。&lt;/li&gt;&lt;li&gt;情景 2：假设两个消息的负结果价值为 -x 和 -y，因为 v(-x) + v(-y) &amp;lt; v(-x-y)，该公司应该一起发布坏消息。&lt;/li&gt;&lt;li&gt;情景 3：假设好、坏消息的结果价值为 x 和 -y且 x &amp;gt; y，因为 v(x) + v(-y) &amp;lt; v(x-y)，该公司应该一起发布。&lt;/li&gt;&lt;li&gt;情景 4：假设好、坏消息的结果价值为 x 和 -y且 x&amp;lt;y，因为 v(x) + v(-y) &amp;gt; v(x-y)，该公司应该分开发布。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 看不懂大函数也没关系，几句话简单总结一下&lt;/b&gt;&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;我们更在乎财富的变化而不是财富的绝对水平；&lt;/li&gt;&lt;li&gt;亏损对我们的伤害要强于盈利带给我们的满足感。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;我们对拥有确定性的选项毫无抵抗力；&lt;/li&gt;&lt;li&gt;只有在不那么确定的时候才会用脑子。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;如果能获取收益，我们都是胆小鬼，认为自己运气比别人差；&lt;/li&gt;&lt;li&gt;如果要承担损失，我们都是赌徒，认为自己运气比别人都好。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;面对极小概率的事件，我们倾向于放大它的影响；&lt;/li&gt;&lt;li&gt;面对极大概率的事件，我们倾向于放大它的影响。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;我们在选择的时候会忽略掉相同的条件，仅关注不同的部分；&lt;/li&gt;&lt;li&gt;这会让我们更容易被忽悠，当然也可以活学活用去忽悠别人。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Bernoulli, D. (Originally published in 1738) translated by L. Sommer (1954). Exposition of a New Theory on the Measurement of Risk. Econometrica, 22(1), 22–36&lt;/li&gt;&lt;li&gt;Kahneman, D. and A. Tversky (1979). Prospect Theory: An Analysis of Decision under Risk. &lt;i&gt;Econometrica&lt;/i&gt;, 47(2), 263–291&lt;/li&gt;&lt;li&gt;Markowitz, H (1952). The Utility of Wealth. &lt;i&gt;Journal of Political Economy&lt;/i&gt;, 60, 151–158&lt;/li&gt;&lt;li&gt;Tversky, A (1972). Elimination by Aspects: A Theory of Choice. &lt;i&gt;Psychological Review&lt;/i&gt;, 79, 281–299&lt;/li&gt;&lt;li&gt;Tversky, A. and D. Kahneman (1992). Advances in Prospect Theory: Cumulative Representation of Uncertainty. &lt;i&gt;Journal of Risk and Uncertainty&lt;/i&gt;, 5(4), 297–323&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-26-38526672</guid>
<pubDate>Tue, 26 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>协方差矩阵的 Newey-West 调整</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-26-38506157.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38506157&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-738e7c18c15348d28af1cfa4f9d1dd3d_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 引言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们在&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38280638&quot;&gt;《正确理解 Barra 的纯因子模型》&lt;/a&gt;介绍了 Barra 的多因子模型。该文讨论的重点在于从业务上说明国家、行业、风格纯因子投资组合的含义，而非具体的数学计算。&lt;/p&gt;&lt;p&gt;不过，后来我意识到我给自己挖了一个坑。因为有个小伙伴给我们留言询问在计算因子协方差矩阵时，Barra 使用的 Newey-West 调整是怎么一回事儿。所以今天就来填坑了。本文就来简单说说 Newey-West 调整对于协方差矩阵估计的重要性。&lt;/p&gt;&lt;p&gt;在我为了写作本文而查阅的相关资料中，除了文末参考文献中的几篇重要论文外，知乎上的两篇讨论也给我很多启发（见参考文献），特此感谢。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 为什么关注因子协方差矩阵？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通过多因子模型，我们可以把个股的收益率表达为因子收益率和个股特异性收益率的形式：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf r = \bf X\bf f+\bf u&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在上式中，&lt;b&gt;r&lt;/b&gt; 为 N × 1 维个股收益率向量（省略了时间下标，假设有 N 支股票）、&lt;b&gt;X&lt;/b&gt; 为当期因子暴露矩阵（N × K 矩阵，K 为因子个数），&lt;b&gt;f&lt;/b&gt; 为 K × 1 维因子收益率向量，&lt;b&gt;u&lt;/b&gt; 为 N × 1 维个股特异性收益率向量。&lt;/p&gt;&lt;p&gt;使用因子模型的好处是可以用它来推算个股收益率之间的协方差矩阵。直接计算股票收益率协方差矩阵的问题是该矩阵有 0.5 × (N^2 + N) 个不同的参数需要估计。这意味着我们至少需要 N 个样本数据来计算它。由于 N 是个股的个数，通常很大，因此这几乎是不可能的任务。&lt;/p&gt;&lt;p&gt;多因子模型的好处是，它把股票的收益率转换为因子收益率的线性组合。因此股票的风险也转换为因子风险的组合。因为因子的个数远远小于股票的个数，估计因子收益率的协方差矩阵要容易的多。对&lt;b&gt;r&lt;/b&gt; = &lt;b&gt;Xf&lt;/b&gt; + &lt;b&gt;u&lt;/b&gt; 等号两边同时做协方差运算可得：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf V = X V_f X&#39;+\Delta&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;其中，&lt;b&gt;V&lt;/b&gt;（N × N）是股票收益率的协方差矩阵，&lt;b&gt;V_f&lt;/b&gt;（K × K）是因子收益率的协方差矩阵，而 &lt;b&gt;Δ&lt;/b&gt;为 N × N 对角阵，其对角线上的元素对应个股的特异性收益率的方差 —— 多因子模型假设股票的特异性收益和因子解释的收益率之间是独立的，因此因子收益率和特异性收益率之间不存在协方差；此外，模型同时假设不同股票的特异性收益率是相互独立的，因此股票的特异性收益率的协方差也为 0。&lt;/p&gt;&lt;p&gt;可见，为了得到 &lt;b&gt;V&lt;/b&gt;，对于 &lt;b&gt;V_f&lt;/b&gt; 的求解至关重要。Newey-West 调整就是为了更准确的计算出 &lt;b&gt;V_f&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 时序不相关条件下协方差矩阵求解&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在介绍协方差矩阵的 Newey-West 调整前，我们首先看看当因子收益率在时序上没有相关性时的做法（通常的做法）。&lt;b&gt;为了简化数学表达，在下面的推导中，假设收益率已经去均值化（demean）了。&lt;/b&gt;假设共有 K 个因子，令 &lt;b&gt;F&lt;/b&gt;_t 表示第 t 期这 K 个因子的收益率向量，它是一个 K × 1 向量：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf F_{\mbox{$t$}}=\left[ \begin{array}{c} f_t^{(1)}\\ f_t^{(2)}\\ \vdots\\ f_t^{(K)} \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在上面的表达中，符号 f_t^(k) 既有下标也有上标：下标 t 表示第 t 期，而上标 (k) 表示第 k 个因子，因此 k 的取值是从 1 到 K，所以 f_t^(k) 就代表第 t 期，因子 k 的收益率（按照本小节一开始的说明，所有的 f_t^(k) 都已经 demean 了）。&lt;/p&gt;&lt;p&gt;将 &lt;b&gt;F&lt;/b&gt;_t 和它的转置 &lt;b&gt;F&lt;/b&gt;_t’ 相乘，利用线性代数的定义得到 &lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;= \left[\begin{array}{cccc} f_t^{(1)}f_t^{(1)},&amp;amp;f_t^{(1)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;f_t^{(1)}f_t^{(K)}\\\\ f_t^{(2)}f_t^{(1)},&amp;amp;f_t^{(2)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;f_t^{(2)}f_t^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ f_t^{(K)}f_t^{(1)},&amp;amp;f_t^{(K)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;f_t^{(K)}f_t^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;假设计算协方差矩阵的时间窗口为 T，即 t 的取值为 1 到 T。对 T 窗口内的所有 t 都进行上述运算并把不同 t 的 &lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’ 相加得到 Σ&lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle\sum_{t=1}^T\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;= \left[\begin{array}{cccc} \displaystyle\sum_{t=1}^Tf_t^{(1)}f_t^{(1)},&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(1)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(1)}f_t^{(K)}\\\\ \displaystyle\sum_{t=1}^Tf_t^{(2)}f_t^{(1)},&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(2)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(2)}f_t^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ \displaystyle\sum_{t=1}^Tf_t^{(K)}f_t^{(1)},&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(K)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\sum_{t=1}^Tf_t^{(K)}f_t^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;最后，将 Σ&lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’ 除以时间窗口长度 T 就得到 (1/T) Σ&lt;b&gt;F&lt;/b&gt;_t&lt;b&gt;F&lt;/b&gt;_t’，这正是以 T 窗口为长度计算出来的 K 个因子收益率的协方差矩阵 &lt;b&gt;V_f&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle \mathbf{V_f}=\frac{1}{T}\sum_{t=1}^T\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;= \left[\begin{array}{cccc} \displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(1)}f_t^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(1)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(1)}f_t^{(K)}\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(2)}f_t^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(2)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(2)}f_t^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(K)}f_t^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(K)}f_t^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^Tf_t^{(K)}f_t^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;写了这么“啰嗦”的推导，实在不是因为我有编辑数学公式的癖好，而是希望我们能够对如何从因子收益率向量求解协方差矩阵加深印象。这是因为 Newey and West (1987) 这篇提出 Newey-West 调整的论文行文风格非常干练、没有任何废话，上来就是矩阵和向量的运算，直接给出了计算向量 h_t(θ) 的协方差矩阵 S_T 的表达式（见下红框图划重点的部分）。我第一次读这篇论文的时候感到云里雾里，&lt;b&gt;难以把该文的推导和 Barra 文献中关于 Newey-West 调整的说明联系起来&lt;/b&gt;（换句话说，看了 Barra 的文档说用了 Newey-West 调整，然后找到 1987 年的这篇论文一看，第一感觉却是“这俩有关系吗……”）。所以在我自己写作时，我花费了上面笔墨解释了协方差矩阵到底是怎么从单期收益率向量推导出来的，这能帮助我们更好的阅读 Newey and West (1987)。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f882c5653f96ac5e61c5f9a35846edd0_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;927&quot; data-rawheight=&quot;733&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-f882c5653f96ac5e61c5f9a35846edd0&quot; data-watermark-src=&quot;v2-fb6cebd657c828c9d9790937b9b37fec&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在前文推导中，&lt;b&gt;F&lt;/b&gt;_t 可以被认为对应 Newey and West (1987) 中的 h_t(θ)，而 &lt;b&gt;V_f&lt;/b&gt; 对应 Newey and West (1987) 中 S_T 的估计量。这样通过上面的推导就不难理解在 Newey and West (1987) 中 S_T 的估计量为什么会有和本文中的 &lt;b&gt;V_f&lt;/b&gt; 一样的表达式，这对于理解 Newey and West (1987) 很重要。&lt;/p&gt;&lt;p&gt;Newey and West (1987)  是严谨的数学论文，因此行文在总体和样本统计量之间切换。但在阅读本文时请暂时遗忘总体 vs 样本统计量。本文的所有 notation，比如 &lt;b&gt;F&lt;/b&gt;_t、&lt;b&gt;V_f&lt;/b&gt; 这些都是针对样本数据而言，正如 Barra 的模型一样 —— 我们关注的是如何使用样本数据、通过 Newey-West 调整来对未知的协方差数据进行估计。&lt;/p&gt;&lt;p&gt;在接下来的行文中，我们只要记住：&lt;b&gt;F&lt;/b&gt;_t 是一个 K × 1 的列向量，代表第 t 期 K 个因子的收益率向量（demean 之后的收益率）；而通过总共 T 期（sample size）的 &lt;b&gt;F&lt;/b&gt;_t, t = 1, 2, …, T 计算出来的因子收益率协方差矩阵 &lt;b&gt;V_f&lt;/b&gt; 为（请记住这个式子，下面讲 Newey-West 调整时还会用到）：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle \mathbf{V_f}=\frac{1}{T}\sum_{t=1}^T\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;&lt;b&gt;上式就是当因子收益率在时序上没有自相关性时计算协方差矩阵的一般方法。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;值得一提的是，在 Barra 的模型中，它们还对上式进行了一点点修改。&lt;b&gt;上式中对时间窗口 T 内的各期收益率采用了简单平均，而 Barra 的模型采用了指数平均，目的是为了让更近期的数据有更高的权重，从而快速捕捉波动率的变化。&lt;/b&gt;使用指数平均对上式进行改进不是本文关注的重点，因此不再赘述。感兴趣的朋友请参考 Briner et al. (2009) 中的第 5.1 节（这个文献是 Barra 的 EUE3 模型 —— 欧洲股权模型，它和 Barra 的 USE4 以及 CHE5 模型使用的方法相同）。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 Newey-West 调整&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上一节给出了当因子收益率在时序上不相关时求解协方差矩阵的方法。然而，当因子收益率在时序上有自相关性时，上节的计算方法就有问题了，它不是真实协方差矩阵的一个&lt;b&gt;相合估计（consistent estimation）&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;相合估计大致可以理解为随着样本个数的增加，一个统计量的估计越来越逼近其真实值，实现在概率上收敛的效果。相合估计有助于我们计算统计量的估计误差，这对于后续使用该估计量至关重要（比如计算置信区间等）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;为了得到相合估计，必须考虑因子收益率之间的自相关性，从而在计算协方差矩阵时考虑自协方差的影响，这就是 Newey-West 调整的作用。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;此外，&lt;b&gt;Barra 的模型中必须要进行自协方差调整的另一个原因是，Barra 的多因子模型是日频的，因此每天都会有一期因子收益率，而然它们的风险预测模型是月频的。这意味着 Barra 需要把日频的协方差矩阵通过尺度变换（scaling）变成月频的协方差矩阵&lt;/b&gt;。在这个过程中就必须考虑日频收益率之间的序列相关性。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;All EUE3 risk forecasts are&lt;/i&gt; &lt;i&gt;&lt;b&gt;monthly&lt;/b&gt;&lt;/i&gt; &lt;i&gt;volatility estimates. The use of&lt;/i&gt; &lt;i&gt;&lt;b&gt;daily&lt;/b&gt;&lt;/i&gt; &lt;i&gt;factor returns in (5.1) necessitates scaling the covariance matrices to monthly horizon. This scaling step needs to account for possible serial correlation in subsequent factor returns.&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;假设单期的因子收益率 &lt;b&gt;F&lt;/b&gt;_t 满足一个 q 阶的序列相关性，即 F_t 可以用 MA(q) 来刻画。则协方差矩阵的一个最简单的相合估计为（对应 Newey and West 1987 中的式 (4)）：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rlll} &amp;amp;\mathbf{V_f}&amp;amp;=&amp;amp;\displaystyle\mathbf{\Gamma}_0+\sum_{i=1}^q(\mathbf{\Gamma}_i+\mathbf{\Gamma}_i&#39;)\\\\ \mbox{where}&amp;amp; \displaystyle \mathbf{\Gamma}_0&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;\\\\ &amp;amp;\displaystyle \mathbf{\Gamma}_i&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-i}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t+i$}}&#39; \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;在上式中，&lt;b&gt;Γ&lt;/b&gt;_0 就是第三节中不考虑自相关性的协方差矩阵，而任何 i ≠ 0 对应的 &lt;b&gt;Γ&lt;/b&gt;_i 代表着由 &lt;b&gt;F&lt;/b&gt;_t 和从时刻 t 滞后 i 期得到的 &lt;b&gt;F&lt;/b&gt;_{t+i} 计算出来的自协方差矩阵。举个例子，令 i = 3 则 &lt;b&gt;Γ&lt;/b&gt;_3 为：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\displaystyle \mathbf{\Gamma}_3=\frac{1}{T}\sum_{t=1}^{T-3}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t+3$}}&#39;= \left[\begin{array}{cccc} \displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(1)}f_{t+3}^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(1)}f_{t+3}^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(1)}f_{t+3}^{(K)}\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(2)}f_{t+3}^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(2)}f_{t+3}^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(2)}f_{t+3}^{(K)}\\\\ \vdots&amp;amp;\vdots&amp;amp;\ddots&amp;amp;\vdots\\\\ \displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(K)}f_{t+3}^{(1)},&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(K)}f_{t+3}^{(2)},&amp;amp;\cdots,&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-3}f_t^{(K)}f_{t+3}^{(K)}\\ \end{array} \right] &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;从这个例子中不难看出 &lt;b&gt;Γ&lt;/b&gt;_3 本身不一定是对称的，因此在上述调整中，对于任何的滞后期 i，&lt;b&gt;Γ&lt;/b&gt;_i 和&lt;b&gt;Γ&lt;/b&gt;_i’ 总是成对出现（&lt;b&gt;Γ&lt;/b&gt;_i + &lt;b&gt;Γ&lt;/b&gt;_i’ 是对称的）。需要特别提醒的是，当计算滞后期为 i 的自协方差时，由于 &lt;b&gt;F&lt;/b&gt;_t 和 &lt;b&gt;F&lt;/b&gt;_{t+i} 之间有间隔 i，因此在总共 T 长度时间窗口内，这二者的配对儿个数为 T - i、少于 T，但是在计算 &lt;b&gt;Γ&lt;/b&gt;_i 的表达式中，永远是除以 T，而不是 T - i。&lt;/p&gt;&lt;p&gt;&lt;b&gt;上述调整（请注意，我没有称该调整为 Newey-West 调整！下面马上就会解释）的本质是使用最大到&lt;/b&gt; q &lt;b&gt;阶的自协方差 Γ&lt;/b&gt;_i &lt;b&gt;对 Γ&lt;/b&gt;_0 &lt;b&gt;进行修正，从而得到调整后的因子收益率协方差矩阵 V_f。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;上面这个调整有一个小问题，就是如此得到的协方差矩阵 V_f 不一定是半正定（positive semi-definite）的，而协方差矩阵必须是半正定的。为了解决这个问题，大名鼎鼎的 Newey-West 调整出场。&lt;/b&gt;它在上述调整的思想上，对 &lt;b&gt;Γ&lt;/b&gt;_i 的修正加入了 Bartlett 权重系数 1 - i/(1+q)。可以看到，该系数和滞后期 i 成反比，说明两个收益率向量 &lt;b&gt;F&lt;/b&gt;_t 和 &lt;b&gt;F&lt;/b&gt;_{t+i} 的间隔越大，&lt;b&gt;Γ&lt;/b&gt;_i 的权重越小。最终，&lt;b&gt;协方差矩阵的 Newey-West 调整为&lt;/b&gt;（对应 Newey and West 1987 中的式 (5)）：&lt;/p&gt;&lt;p&gt;&lt;equation&gt;\begin{array}{rlll} &amp;amp;\mathbf{V_f}&amp;amp;=&amp;amp;\displaystyle\mathbf{\Gamma}_0+\sum_{i=1}^q\omega_i(\mathbf{\Gamma}_i+\mathbf{\Gamma}_i&#39;)\\\\ \mbox{where}&amp;amp; \displaystyle \mathbf{\Gamma}_0&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t$}}&#39;\\\\ &amp;amp;\displaystyle \mathbf{\Gamma}_i&amp;amp;=&amp;amp;\displaystyle\frac{1}{T}\sum_{t=1}^{T-i}\bf F_{\mbox{$t$}}\bf F_{\mbox{$t+i$}}&#39;\\\\ &amp;amp;\omega_i&amp;amp;=&amp;amp;\displaystyle1-\frac{i}{1+q} \end{array} &lt;/equation&gt; &lt;/p&gt;&lt;p&gt;&lt;b&gt;Newey and West (1987) 证明了上面这个协方差矩阵是一个相合估计，而且它是半正定的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这就是 Barra 采用的 Newey-West 调整。在 Barra 的 EUE3 研究报告（Briner et al. 2009）中的第五节对此有简单的说明。此外，前文提到，Barra 需要用日频的协方差矩阵通过 scaling 转换成月频的。为此，Barra 的做法是对 Newey-West 调整后的日频协方差矩阵乘以一个月内的交易天数，即 22，这就得到了最终的因子收益率协方差矩阵（下图截自 Briner et al. 2009，在 EUE3 中 Barra 采用的最大滞后期为 15）。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-10ea22b80e8dab9cb72fea2797aaf85b_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;273&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-10ea22b80e8dab9cb72fea2797aaf85b&quot; data-watermark-src=&quot;v2-f38543c640f12f9f9c14051e52265c78&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;最后想要指出的是，在计算股票特异性收益率的协方差矩阵上，Barra 同样采用了 Newey-West 调整，只不过对于个股特异型收益率，Barra EUE3 模型选择的最大滞后期为 10。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 结语&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;好了，终于把之前的坑填上了。学习大概就是不断的挖坑然后再填坑的过程。&lt;/p&gt;&lt;p&gt;&lt;b&gt;从 Barra 自己的论述来看，它们在因子收益率协方差矩阵以及股票特异性收益率的方差矩阵上面都进行了 Newey-West 调整，且这一调整被沿用到了最新版的模型中，足见这一步的重要程度。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;值得一提的是，在 Barra 的 USE4 模型中，Barra 把协方差矩阵拆成了分别计算每个因子收益率的波动率以及不同因子之间的相关系数矩阵（而非直接求协方差矩阵，见 Menchero et al. 2011）。因此，它们对因子的波动率和相关系数矩阵分别进行 Newey-West 调整。Barra 的 USE4 模型并没有披露具体细节，但&lt;b&gt;万变不离其宗&lt;/b&gt;。我猜想应该和 EUE3 模型中的处理方法（即本文介绍的方法）一致，&lt;b&gt;区别就是我们使用不同因子的收益率序列&lt;/b&gt; {f_t^(k} &lt;b&gt;计算出类似于本文中的 Γ&lt;/b&gt;_i &lt;b&gt;，即利用&lt;/b&gt; K &lt;b&gt;个因子的&lt;/b&gt; {f_t^(k)} &lt;b&gt;序列求出不同滞后期&lt;/b&gt; i &lt;b&gt;下相关系数的矩阵以及方差的对角阵，然后用这个矩阵替换 Γ&lt;/b&gt;_i&lt;b&gt;套入 Newey-West 调整的表达式即可；核心是用 &lt;/b&gt;{f_t^(k)} &lt;b&gt;找到正确的矩阵。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;比如因子 (1) 和 (2) 之间的滞后期为 i 的相关系数可以通过下式计算，对所有因子和所有最大滞后期 q 以内的 i 计算就可以求出类似于本文中 &lt;b&gt;Γ&lt;/b&gt;_i 的相关系数矩阵，然后就可以运用 Newey-West 调整得到相关系数矩阵的相合估计。&lt;/p&gt;&lt;p&gt;&lt;equation&gt;r_i^{(1)(2)}=\frac{\displaystyle\sum_{t=1}^{T-i}f_t^{(1)}f_{t+i}^{(2)}}{\sqrt{\displaystyle\sum_{t=1}^T\left(f_t^{(1)}\right)^2}\sqrt{\displaystyle\sum_{t=1}^{T-i}\left(f_{t+i}^{(2)}\right)^2}}&lt;/equation&gt; &lt;/p&gt;&lt;p&gt;我自己尚未对 Newey-West 调整在 A 股上的有效性进行验证，但是国内一些券商的金工团队在这方面已经有了不少的探索。在这方面，天风证券应该算是走在了前列（天风直接对协方差矩阵调整，类似 EUE3 模型）。它应该是我最早看到将 Barra 这一套系统应用于国内 A 股市场上的（至少是 1 年以前），并且还非常有创造性的利用了最优化的手段配合 Barra 的体系来进行选股。进行最优化的前提条件当然是各种输入要尽可能准确，这就能体现出 Newey-West 调整的重要性了。在今后我们进行实证之后，如果有新的发现，也会及时和各位分享。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Briner, B. G., R. C. Smith, and P. Ward (2009). &lt;i&gt;The Barra Europe Equity Model (EUE3).&lt;/i&gt;MSCI Barra Research Notes.&lt;/li&gt;&lt;li&gt;Menchero, J., D. J. Orr, and J. Wang (2011). &lt;i&gt;The Barra US Equity Model (USE4). &lt;/i&gt;MSCI Barra Research Notes.&lt;/li&gt;&lt;li&gt;Newey, W. K. and K. D. West (1987). A simple, positive semi-definite, heteroskedasticity and autocorrelation consistent covariance matrix. &lt;i&gt;Econometrica&lt;/i&gt;, Vol. 55(3), 703 – 708.&lt;/li&gt;&lt;li&gt;https://zhuanlan.zhihu.com/p/27197117&lt;/li&gt;&lt;li&gt;https://www.zhihu.com/question/57352186/answer/273603448&lt;/li&gt;&lt;/ul&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-26-38506157</guid>
<pubDate>Tue, 26 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>追求卓越，但接受交易中的不完美</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-23-38417800.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38417800&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-062a671fb6cafb22d738364eebd400ad_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 交易中最大的敌人&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;当把一个经过测试的交易系统用于实盘交易时，最大的敌人是什么？是回测中各种数据偏差（如前视偏差、幸存者偏差）？是模型在样本内的过拟合？是对交易手续费和冲击成本的不合理假设？是无法找到理论来解释这个交易想法本身？&lt;/p&gt;&lt;p&gt;都不是。&lt;/p&gt;&lt;p&gt;&lt;b&gt;一个系统投放到实盘时最大的敌人是一个人的心理关。更具体的说，这个心理关指的是交易者能否克服实盘中的心理压力从而坚持使用这个交易系统。&lt;/b&gt;面对回测中稳健的净值曲线（只有策略在回测中表现的不错我们才考虑将它投放到实盘），纵然我们深谙策略的各种指标——比如收益率、最大回撤幅度、最大回撤区间长度、夏普率、胜率、盈亏比等，我们也无法体会到实际交易中必须承受的压力。&lt;/p&gt;&lt;p&gt;对于任何一个交易系统，几乎可以确定的是它在回测中的表现是其在实盘中表现的上限。此外，当一个交易系统被用于实盘之初，亏损先于利润出现也是十分常见的。面对真金白银的亏损，你会比想象的更脆弱、更容易怀疑策略的开发中是否存在没有考虑到的问题、更容易自我动摇从而想要放弃这个系统；在实际交易中，价格时刻在波动，充斥着噪音的各路消息以远超过你能够接受的速度涌向你，你会快步踏入行为金融学中的各种认知偏差陷阱、丧失冷静、做出一系列干预交易系统的错误操作。&lt;b&gt;这些心理压力是哪怕再精细、再严格的回测也无法带给你的。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;举个例子，假如你持有黄金的多头。在 2017 年 7 月 10 日黄金短线跳水时，试想一下你的压力（&lt;b&gt;事后来看，金价最终又波动了回来，但彼时彼刻，你的所见是价格的跳水、所闻全是利空消息，你对几个小时后剧情会反转一无所知！&lt;/b&gt;）。在那种压力下你可能会做出减仓或平仓止损的决定——尽管你的交易系统未发出任何信号。如果这一天仅仅是回测中的一日，它则不会带给你任何感受（除了看到这天微涨），你无法体会到实盘中的心理压力，哪怕是一点点。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a2a9e97d0cf7b4c25bd04390356e1626_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;528&quot; data-rawheight=&quot;399&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-a2a9e97d0cf7b4c25bd04390356e1626&quot; data-watermark-src=&quot;v2-6f804868e562d1a9c9413029289aedb1&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;所以，克服掉心理关是一个回测中好的交易系统能否在实盘继续有效的必要条件。要实现这个需要做到两件事：&lt;b&gt;“认识到没有完美的交易系统”&lt;/b&gt;和&lt;b&gt;“追求卓越”&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 没有完美的交易系统&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;没有完美的交易系统。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;每个人都希望找到一个每天都能挣点小钱的交易系统。然而&lt;b&gt;任何一个策略或者交易系统，都是基于对市场的某个假设。市场充满着不确定性，因此它必然会在一些时候背离这个假设，这时该交易系统就会出现亏损。一个优秀的交易系统是一个长期来看能够盈利的系统，而非一个能够每笔交易都赚钱的系统。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;交易的本质是盈亏同源，因此交易者必须学会直面亏损。只有当他能够欣然接受亏损的时候，他才能开始学会赚钱。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;随着交易的进行，你可能希望不断的改进交易系统。但此时你必须格外小心，以免步入过拟合的陷阱。也许在实盘中的每笔亏损交易后，你都试图思考什么样的改进能够避免刚刚的亏损。但我负责任的告诉你，这种想法非常危险。如果你真的这么做的了——为了每一笔的亏损都对你的系统进行了修补，你便走上了“处处精准过拟合”的快车道，你的系统将会逐渐对市场未来的变化无能为力，这无异于自掘坟墓。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;Most traders take a good system and destroy it by trying to make it into a perfect system. – Robert Prechter&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：很多交易员都有一个优秀的交易系统。然而，试图使这个系统变得完美的努力恰恰摧毁了它。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;你的交易系统就像是你的孩子，因此你必须欣然接受它的优点和缺点。&lt;/b&gt;改造一个长期来看可以赚钱的优秀系统必须要非常小心。对哪怕是一个参数的哪怕是一丁点的调节都会改变该系统的效果。这么做是以改动后的系统对最新的交易数据表现更佳为前提；但是如果不能证明它在未来的样本外更有效，那么如此 “改进”仍然是徒劳的。所以，接受你的交易系统。如果它已经是有正期望的系统，那你还有什么不满足的呢？&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 追求卓越&lt;/b&gt;&lt;/h2&gt;&lt;blockquote&gt;&lt;i&gt;Strive for Excellence, Not Perfection.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：追求卓越，而非完美。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;现在的你已经摒弃了打造完美“圣杯”的念想。那么还剩下什么呢？&lt;b&gt;追求卓越！&lt;/b&gt;&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-32c858b82d5251143714ba5210d0c8b7_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1544&quot; data-rawheight=&quot;708&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-32c858b82d5251143714ba5210d0c8b7&quot; data-watermark-src=&quot;v2-dd4300a37696fad7a27bf5e3dd572801&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;把交易系统的表现留给系统本身，而你要做的是百分之百的、严格的遵循你的系统，按它的指令来交易。&lt;b&gt;交易系统的不确定性应该仅仅来自于市场；而非来自于你的操作。如果因为你偏离了你的交易系统——哪怕是最轻微的偏离——而给系统的表现带来了额外的不确定性，那都是你的责任。&lt;/b&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;Every trade that you take outside of your trading system is an insult to yourself, to the time and effort you put into trading, and to your self-respect.&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：违背自己的系统而做的每一笔交易都是你的耻辱；是对你为开发该系统所投入的时间和努力的羞辱；是对你自尊的羞辱。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;追求卓越最终归结为对自己的尊重。&lt;/b&gt;一旦你开始尊重自己，相信自己的能力和系统，你就可以更容易地遵循它。&lt;b&gt;如果你遭遇连续的亏损，首先要问问自己是否严格的按照交易系统执行了所有的交易。&lt;/b&gt;如果是，那么恭喜，至少在这方面你问心无愧。你可以继而看看是否是市场状态发生了改变导致系统失效和亏损。如果没有，那么再次恭喜，你的交易系统仍然是可靠的，虽然它产生了几笔连续的亏损，但你仍然可以继续相信它。&lt;/p&gt;&lt;p&gt;如果你无法百分之百的严格执行你的交易系统，那么你的交易将缺乏一致性，在一些交易中你或多或少的带入了人为的扰动。&lt;b&gt;在这样的情况下，你根本无法正确的评价这个交易系统&lt;/b&gt;——你有什么资格这么做呢？你根本没有给这个系统产生一致性交易结果的机会。&lt;/p&gt;&lt;p&gt;&lt;b&gt;一致性是追求卓越的核心。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 做到一致性&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;什么是一致性？如果把这个问题抛给交易员，他们也许会说“稳定的盈利，日复一日、年复一年；净值没有太大和太长的回撤”。诚然，这是交易者的（终极）目标——谁不想要呢？但是，&lt;b&gt;一致性产生的好结果止于此，而一致性非始于此。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;一般交易者的学习曲线大概如下面图中的黑色曲线：他们无法做到严格遵循一个交易系统，总是带着个人情感进行交易，将自己行为带来的不确定性错误地强加于系统的表现之上，从而误认为系统本身出了问题。这导致交易者无法持之以恒、三天两头更换系统。伴随着这个发生的是交易结果的不稳定性——当然是亏损远大于收益。最终，本金输光，无奈退出市场。与之相反的，一个优秀的交易者会专注于一致性，这会让他在通往盈利的进程中越走越远，最终到达胜利的彼岸。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fb39ce46977507b58fe0af783c9de244_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;749&quot; data-rawheight=&quot;333&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-fb39ce46977507b58fe0af783c9de244&quot; data-watermark-src=&quot;v2-5f88c5e741ef786a3320a57c98925f41&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;那么，如何做到一致性呢？三步走。&lt;/p&gt;&lt;p&gt;&lt;b&gt;虽然用了“简单”这个词，但这并不意味着它很容易。&lt;/b&gt;交易成功和很多我们日常想要达到的目标——如减肥、成为一个好学生、做一个好父亲——并无区别，然而&lt;b&gt;知道该做什么是一回事儿，真正做到它又是另外一回事儿。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;第一步：使用一个交易系统&lt;/b&gt;&lt;/p&gt;&lt;p&gt;首先，你需要使用一个交易系统，这将有助于你实现交易的一致性。前文说过，任何交易系统都是基于对市场的某种假设，并严格按照那个假设来交易。因此，在这一步，你需要选择适合自己的系统——比如趋势追踪系统、均值回归系统、价值投资系统、小市值系统，you name it ——不管是什么，一旦选择，就请坚持下去。也许一开始你并不能马上赚钱，但这绝对是一个好的起点。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;No man ever reached to excellence in any profession without having passed through the slow and painful process of study and preparation. – Mark Douglas&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：在任何职业中想要到达卓越，都必须历经缓慢而痛苦的学习和准备过程。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;你不会在还没有摸过篮球时就妄图成为 NBA 的巨星；你不会在还没有学过计算机时就想在 BAT 找一份编程的工作；同样，你也不会在刚上了一节极限课后就声称掌握了微积分的全部内容。那么，你为什么会幻想着一开始交易就马上赚钱呢？&lt;/p&gt;&lt;p&gt;道理很清楚，但很多交易员就是无法做到。人们总幻想更换一个技术指标，或者找到 K 线的另外一个形态，从而一步到位、走向人生巅峰。但不要忘记，“即便是最顶级的耳机也不会让你一步成为一个优秀的 DJ”、“一支再昂贵的钢笔也不能使你一跃成为畅销书的作家”。想要取得成功终须经过漫长的努力，交易也不例外。&lt;/p&gt;&lt;p&gt;严格遵守交易系统将带给你一致性的交易结果，这就是第二步。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;第二步：获得一致性的交易结果&lt;/b&gt;&lt;/p&gt;&lt;p&gt;相对于主观投资，我最喜欢量化投资的一点是，&lt;b&gt;它能够保证交易结果的一致性——无论是盈利还是亏损——结果都来自于严格执行交易系统。&lt;/b&gt;反观主观投资（并不是说它的坏话），由于每次都加入了不同的人为的判断，因此无论交易结果好坏，都很难客观的评判其结果。&lt;/p&gt;&lt;p&gt;&lt;b&gt;获取一致性的第二步就是每次交易中都遵循你的交易系统，从而获得一致性的交易结果。&lt;/b&gt;也许一开始你会亏损，但你仍然可以拍着胸脯的说&lt;b&gt;交易结果中的波动都是来自市场的不确定性，而没有半点人工干预的成分。&lt;/b&gt;这将使你处于非常有利的位置——能够客观的评价这个交易系统在实盘中的表现。唯有如此，你才能正确的辨别出一个交易系统是否足够优秀；才能去伪存真，剔除差的、留下好的。&lt;/p&gt;&lt;blockquote&gt;&lt;i&gt;I fear not the man who has practiced 10,000 kicks once, but I fear the man who has practiced one kick 10,000 times. – Bruce Lee&lt;/i&gt;&lt;br&gt;&lt;i&gt;译：我不害怕那个虽然学了一万个招式但每个招式只练习了一次的人；但我畏惧那个虽然只学了一个招式但是却反复练习了一万次的人。&lt;/i&gt;&lt;/blockquote&gt;&lt;p&gt;持之以恒地执行你的交易系统，得到一致性的交易结果；只要这个系统在长期是盈利的，那么时间最终会变成你的朋友。&lt;/p&gt;&lt;p&gt;&lt;b&gt;第三步：变成更好的交易者&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;卓越不是一个技能；而是一个态度。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果你在每个交易中都坚持使用系统，排除人为干预，那么日复一日年复一年，当你进行了成百上千次交易后，你就能完全摸透这个系统——它的优点、它的劣势。&lt;/p&gt;&lt;p&gt;当一个系统产生亏损时，人们本能的反应是换一个新的。但现在你已经知道那么做百害而无一利，它只能把你拽回学习曲线的起点。所以，欣然接受它并坚持使用它。&lt;b&gt;不要总是在当事情变得棘手时就尝试新的事物。&lt;/b&gt;好奇害死猫。&lt;/p&gt;&lt;p&gt;我们都钦佩那些坚持多年并最终成为领域专家的人。始终信任你的系统（当然前提是你排除了市场状态变化导致的策略失效），在你对系统建立信任的不懈努力中，你已经成为了一位更好的交易者，你也最终会成为让别人钦佩的人。&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d3b974b3f59dee6f42db9b460fd75640_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;788&quot; data-rawheight=&quot;523&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-d3b974b3f59dee6f42db9b460fd75640&quot; data-watermark-src=&quot;v2-69c912cb39f4600156ec19526be75ab8&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;世上没有完美的系统，因此不要在交易中追求完美；但是你应努力做到追求卓越——无论是在交易中，还是在生活的其他方面。不要贪心，放弃做一个完美主义者。一个优秀的交易者知道亏损仅仅是游戏的一部分。&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-23-38417800</guid>
<pubDate>Sat, 23 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>究竟何为量化投资？</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-22-38368044.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38368044&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-bbe37e32fc8ee2c50ba4d8c3a6c4b92b_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;本文作者：高嵩，量信投资联合创始人、CTO&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;量化投资的概念最初由西蒙斯的文艺复兴基金引入公众视野，却始终蒙着一层神秘的面纱。究竟什么是量化投资？如今，若还将量化投资简单的理解为基于数学模型由计算机程序控制的投资，未免太过狭隘。事实上随着近几十年投资学作为一门独立学科高速发展，从定性研究到定量研究是学科发展的必然趋势，数量化的触角已经渗透到投资流程的方方面面，如今可以说是无投资不量化，&lt;b&gt;无量化不投资&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;时至今日，&lt;b&gt;广义的量化投资已经发展成为基于现代科学方法的理论体系、研究方式以及工程系统的总和。&lt;/b&gt;放弃量化投资，无异于放弃了现代科学千百年来积累形成的行之有效的方法论。&lt;/p&gt;&lt;p&gt;早期的科学都是经验的集合。到了近现代，人们对实证经验进行抽象，再辅之以数理推演以及形式逻辑推演，逐步构建了一个相对完整自洽的体系，也就是现代科学。&lt;b&gt;现代科学相较于早期科学，其核心优势就是经过对实证经验的抽象与综合，形成的体系能够去伪存真，获取世界更为本质的规律，对于没有直接观测到的事物进行准确的预测。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;整个投资的历史远较量化投资为长。人们在投资活动中积累了大量的经验，但是直到近几十年，这些经验才被逐渐的抽象归纳，形成可以称之为科学的投资学。基于各种数学模型的量化投资也正是出现在这个阶段。&lt;b&gt;长于各种精确计量的量化投资的兴起只不过是一个学科变得更为成熟的必由之路。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;对于投资实践经验的抽象与归纳，程序化思维是重要核心。程序化思维并非狭义的“如何把投资方法编写为程序”；而是对于各种投资的实践经验，将其一层层梳理拨开，精准确定每个条件每个环节，确定各个机巧所在，设计各种实验一一验证。这本质是一个思维的过程，是将经验抽象提炼转化为知识的过程。投资经验经过了这个过程，才真正上得了台面，能够指导未来投资实践。&lt;/p&gt;&lt;p&gt;投资经验一旦升华成了知识，就意味着其可检验、可重复，如日升月恒，运转不息。&lt;b&gt;不知疲倦的机器能够最有效的发挥知识的力量，以极低的成本快速扩大规模，遵循由人类长期投资经验抽象而成的知识，不折不扣的进行投资活动。这种投资领域的“工业化大生产”时代正在来临。&lt;/b&gt;&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-22-38368044</guid>
<pubDate>Fri, 22 Jun 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>机器学习能否助力风险投资？</title>
<link>https://henix.github.io/feeds/zhuanlan.mitcshi/2018-06-21-38348236.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38348236&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-9376471333ef292e3eb0ac6b57921ffd_r.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;1 引言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;近几年，以机器学习、特别是深度学习为代表的人工智能（AI）得到了长足的发展，机器学习和人工智能也成为出现在街头巷尾的高频词汇。在&lt;a href=&quot;https://zhuanlan.zhihu.com/p/38348112&quot;&gt;《AI 投资言过其实》&lt;/a&gt;这篇文章中，我们理性的分析了机器学习在二级市场中面对的困难。今天我们把目光放在风险投资（venture capital），看看机器学习能否在一级市场有所作为。&lt;/p&gt;&lt;p&gt;写本文的动机源自我最近读到的一篇来自麻省理工的论文 Hunter and Zaman (2017)。&lt;b&gt;该文提出了一个挑选优秀早期创业公司的量化分析框架，利用机器学习算法进行参数估计以及最优投资组合的构建，从而挑出那些最有可能成功的初创公司（成功的标准是风险投资人因该公司上市或者被收购而退出）。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;因为文章很新（2017 年的），而且将机器学习应用于了一个比较新的场景，读来让人耳目一新，因此希望把它介绍给关注公众号的小伙伴，开阔大家的视野。&lt;b&gt;最重要的是，它在样本外挑出的创业公司的退出成功率高达惊人的 60%！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文本身非常 technical，因为一些建模的细节问题，我还和作者进行了邮件沟通，确保正确的领会了文章传达的内容。本文将避免涉及太多大数学公式（会有少量必要的），但会不吝篇幅、力争把该分析框架的重点 —— 包括如何构建特征、如何对参数建模求解、以及选取什么样的目标函数 —— 解释清楚。文章最后是关于这个话题的思考。&lt;/p&gt;&lt;p&gt;在介绍这个框架之前，首先来看看相较于二级市场，风险投资为什么更适合机器学习。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 风险投资更适合机器学习&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;2016 年，AlphaGo 以无可争议的优势战胜了李世石；2017 年它的升级版更是风卷残云一般战胜了以柯洁为代表的中方各路围棋高手。AI 在围棋领域的大获全胜给了我们很大的启发，一个适合使用机器学习来解决的问题应该包括以下三个性质：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;信息边界明确，状态有限；&lt;/li&gt;&lt;li&gt;所有信息完全公开透明；&lt;/li&gt;&lt;li&gt;有明确的胜负判断标准。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;我们来看看风险投资是否满足这三个条件。根据百度百科，风险投资的定义如下：&lt;/p&gt;&lt;p&gt;&lt;b&gt;风险投资&lt;/b&gt;主要是指向初创企业提供资金支持并取得该公司股份的一种融资方式。风险投资公司为一专业的投资公司，由一群具有科技及财务相关知识与经验的人所组合而成的，经由直接投资被投资公司股权的方式，提供资金给需要资金者（被投资公司）。风投公司的资金大多用于投资新创事业或是未上市企业，并不以经营被投资公司为目的，仅是提供资金及专业上的知识与经验，以协助被投资公司获取更大的利润为目的，所以是一追求长期利润的高风险高报酬事业。&lt;/p&gt;&lt;p&gt;在一个创业公司融资的过程中，通常分为种子轮（seed）、A 轮、B 轮、……、F 轮（一般 IPO 前不超过 F 轮）、最后是 IPO。以 IPO 上市退出无疑会带给投资人最大的收益；在上市无望的情况下，被收购也是一种比较好的退出方式。根据上面的定义，&lt;b&gt;风投的手段是投资有希望的早期创业公司，目的是在退出时为投资人牟取超高额收益。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;从机器学习问题的角度来说，我们需要挖掘初创公司具备的特征与该公司最终能否为投资人带来了丰厚的报酬之间的关系：Y = f(&lt;b&gt;X&lt;/b&gt;)，即回答&lt;b&gt;“什么样的公司能在未来成为独角兽”&lt;/b&gt;这个问题（&lt;b&gt;X&lt;/b&gt; 代表特征向量，Y 代表是否带来了丰厚回报这件事儿）。训练这个模型是一个典型的&lt;b&gt;有监督学习问题&lt;/b&gt;。更重要的是，风险投资比较好的满足上面提到的三个条件：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;一个初创公司是否能够成功大概率受以下几方面的影响：所处的行业是否是风口行业、产品是否有核心竞争力、创始团队是否出色、是否有知名早期投资者扶持。与二级市场投资相比，风险投资问题的边界相对明确且状态有限。&lt;/li&gt;&lt;li&gt;关于初创公司的团队和融资路径数据，虽然还远非尽善尽美，但是也有足够多的数据（包括公开的和可花钱购买的）来建模。在美国，初创公司这方面数据的可得性（availability）可能更高一些，但是在国内也有像鲸准、IT 桔子、铅笔道这样的关于创业团队相关数据的提供方。&lt;/li&gt;&lt;li&gt;对于风投来说，成功的标准比较明确，就是成功退出（包括 IPO 退出或者被收购退出）。更加发散一步，在建模和参数估计时，也可以使用创业公司完成了哪一轮的融资作为判别的依据。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;需要明确说明一下 Hunter and Zaman (2017) 研究的样本对象。&lt;b&gt;该文的样本点仅考虑了 2000 年之后在美国创办的、且从数据库中可以获得其可靠种子轮或 A 轮融资数据的公司；作者关注的是早期融资成功的那些公司中，哪些更有可能最终脱颖而出。&lt;/b&gt;满足上述条件的公司超过 24,000 个。以它们为样本，该文作者使用机器学习算法找到了最有可能在未来成功的创业公司应具备的特质。由于样本中的公司都已完成了种子轮或 A 轮融资，因此&lt;b&gt;早期投资人的背景和能力也成为对公司建模的一个特征维度。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;下面就来说说 Hunter and Zaman (2017) 考虑的特征。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 选择特征&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上一节提到，创业公司的特征可以从以下四个方面考虑：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;行业&lt;/li&gt;&lt;li&gt;产品&lt;/li&gt;&lt;li&gt;领导团队（包括高管和顾问）&lt;/li&gt;&lt;li&gt;早期投资者（首轮融资）的资源和经验&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Hunter and Zaman (2017) 在构建特征时并没有独立考虑产品这个维度（也没有过多的加以说明）。我的猜想可能是行业已经是产品的一个有效代理指标，话句话说，产品和行业维度比较相关。另外的原因就是在产品初期，能客观定量评价它的指标可能非常有限；产品本身太过细分，难以横向比较。事实上，马上我们将看到，Hunter and Zaman (2017) 考虑的行业已经非常细致，这也暗示了无需再进一步考虑产品这个维度了。接下来，分别从行业、领导团队以及早期投资者三个维度介绍特征。这些数据来自 Crunchbase 数据库以及 Linkedin（领英）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.1 行业&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Hunter and Zaman (2017) 考虑了如下这些行业。当一个创业公司所属于某个行业时，它对应的行业特征取 1，否则为 0。这些行业包括：3D 打印、广告、分析、动画、Apps 应用程序开发、人工智能、汽车、无人驾驶汽车、大数据、生物信息、生物技术、比特币、商业智能、云计算、计算机、计算机视觉、约会交友、开发者 API、电子商务、线上学习、教育、线上虚拟体育、时尚、金融、金融服务、金融科技，健身、GPU、硬件、保健、健康诊断、医院、保险业、互联网、物联网、iOS 开发、生活方式、物流、机器学习、医疗、医疗设备、信息派送、移动通讯、纳米技术、网络安全、开放源码、个人健康、宠物、照片共享、可再生能源、共享出行、机器人、搜索引擎、社交媒体、社交网络、软件、太阳能、体育、交通、视频游戏、虚拟现实和虚拟化。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.2 领导团队&lt;/b&gt;&lt;/p&gt;&lt;p&gt;领导团队笼统的包括高管（含创始人）以及顾问。主要考虑的角度包括，团队成员在过去是否有成功的创业经验、团队成员之间工作和教育背景的相似性和互补性、团队和公司所处行业的符合度、以及团队的平均年龄。下面分别说明。&lt;/p&gt;&lt;p&gt;首先，团队成员过去的创业经验包括如下六个指标。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6604bc07d8f69ab2a05cffc5b5edb56a_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;720&quot; data-rawheight=&quot;289&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-6604bc07d8f69ab2a05cffc5b5edb56a&quot; data-watermark-src=&quot;v2-72e330e156abc00f530535de3c442e7d&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;其次，利用 Linkedin 的数据，Hunter and Zaman (2017) 抓取了所有领导团队成员在成立/加入本公司之前的工作经历，并从中计算出了如下代表他们工作经验和背景的特征。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-20ea7d6ae2dc7abf29aea82a19c149f6_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;705&quot; data-rawheight=&quot;256&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-20ea7d6ae2dc7abf29aea82a19c149f6&quot; data-watermark-src=&quot;v2-19257f04ada4b76bbf21be096bd59453&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在计算工作重合度时，Hunter and Zaman (2017) 采用了 Jaccard Index（一种评价两个集合中元素相似度的常见方法）。具体方法为，领导团队成员两两配对，找出他们之前工作单位的交集和并集，用交集中成员的数量除以并集中成员的数量求出 Jaccard Index。这个指标的取值在 0 到 1 之间，是工作重合度的度量，越高说明重合度越高。对于每个配对，都能得到一个 Jaccard Index，然后计算这些 Jaccard Index 的均值和标准差，作为工作重合度的均值和标准差。&lt;/p&gt;&lt;p&gt;在领导团队的教育背景方面，Hunter and Zaman (2017) 考虑了最高学历、是否毕业于名校、以及教育背景重合度等特征。这些特征包括：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-51f1934f47c407022a92a30f1d344fe4_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;703&quot; data-rawheight=&quot;357&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-51f1934f47c407022a92a30f1d344fe4&quot; data-watermark-src=&quot;v2-abe4c46fc2c59771a375291055458c6c&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;在名校的表单中，Hunter and Zaman (2017) 仅考虑了美国的学校（这是个不足？），它们包括：伯克利、布朗大学、加州理工、卡耐基梅隆、哥伦比亚、康奈尔、达特茅斯、杜克大学、哈佛大学、约翰霍普金斯、麻省理工、西北大学、普林斯顿、斯坦福、芝加哥大学、宾夕法尼亚大学、以及耶鲁大学。在计算教育背景重合度时，同样采用的是 Jaccard Index，不再赘述。&lt;/p&gt;&lt;p&gt;对于团队教育背景和公司所处行业的相似性，Hunter and Zaman (2017) 使用了 WordNet 词汇数据库，计算每个领导团队成员学术专业和公司所处行业之间的语义相似度（具体方法是 Palmer-Wu 相似度分数，见 Wu and Palmer 1994）。得到由每个成员计算出的相似度后，取它们的均值作为团队教育背景和公司行业的相似性的度量。&lt;/p&gt;&lt;p&gt;最后一个关于创始团队的指标是在成立该公司时，团队的平均年龄。出于年龄数据不全的考量，作者假设团队成员 18 岁高中毕业、22 岁本科毕业，然后根据他们获得相应学位的年份和公司创办的年份计算出目标年龄。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.3 早期投资者&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在早期投资者这个维度，Hunter and Zaman (2017) 着实花了一番功夫，使用约 83,000 个公司和 48,000 个投资者数据构建了一个公司和投资者关系的动态知识图谱。该图谱随时间变化，对于任意给定的时间点，图谱中的给定节点表示在那个时刻某个投资者投资了某个公司。通过这个图谱，作者计算了两个评价早期投资者能力的指标：&lt;b&gt;投资人的参与度&lt;/b&gt;和&lt;b&gt;投资人的成功率&lt;/b&gt;。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-3ceb89aba4196c32013c047644455c24_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;696&quot; data-rawheight=&quot;429&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-3ceb89aba4196c32013c047644455c24&quot; data-watermark-src=&quot;v2-8dc0f3f2f2369d8009db42d1e345ca48&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;以上介绍了从行业、团队和早期投资者这三个维度如何构建创业公司的特征。&lt;b&gt;其中的难点在于数据的抓取、数据的清洗（提高数据质量）、以及投资人和公司关系图谱的构建。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 构建参数模型&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;有了特征之后，下一步就是要把特征和最终模型学习的目标联系起来。对于选择优秀的初创公司这件事儿，目标应该是什么呢？&lt;/p&gt;&lt;p&gt;我们最终的目标是找到最有希望 IPO 的公司。&lt;b&gt;但是使用上述特征直接映射到创业公司能否 IPO （比如使用逻辑回归）太过简单粗暴了。&lt;/b&gt;下图显示了在 Hunter and Zaman (2017) 的样本中，自 2000 年以来每年新成立的公司的数量以及每年处于各轮融资的公司的数量（从种子轮、A 轮、一直到被收购或者 IPO）。&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-158bff9eb19a924296cefb999aae15a3_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;860&quot; data-rawheight=&quot;346&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-158bff9eb19a924296cefb999aae15a3&quot; data-watermark-src=&quot;v2-add24f3b269fc8267a9a4e5e42f51192&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;从上面的右图可见，能够最终 IPO 的独角兽公司凤毛麟角。&lt;b&gt;如果仅仅以一个公司是否 IPO 作为标签的话，这样的样本数据是非常不均衡的。&lt;/b&gt;以此来训练分类模型的话，常规的方法会过度的考虑对非 IPO 公司（占绝大多数）分类的准确性，而忽视对少数 IPO 公司的准确性。&lt;/p&gt;&lt;p&gt;从直觉上来看，我们似乎应关心对 IPO 公司预测的准确率，并为此可以牺牲对该类预测的召回率，以及对非 IPO 公司预测的精度。但是不要忘记，IPO 的回报是非常高的 —— 不夸张的说，早期 VC 投 100 个公司，有一个能够最终 IPO 就足够覆盖其他 99 个失败造成的损失并给他带来丰厚的收益了。这样的收益特性称为 top-heavy payoff structure。基于此，我们似乎更应该关注对 IPO 公司分类的召回率。&lt;/p&gt;&lt;p&gt;无论如何，直接以是否 IPO 作为标签来训练一个有监督分类问题是过于简化了。更合理的建模思路应该是什么呢？从业务上来考虑，一个创业公司在成功的历经各轮融资后，它的估值是在逐步提升的。因此，&lt;b&gt;使用创业公司的特征来对它估值的变化建模似乎是一条可行并合理的路径。&lt;/b&gt;Hunter and Zaman (2017) 正是这么做的。&lt;/p&gt;&lt;p&gt;Hunter and Zaman (2017) 假设&lt;b&gt;一个公司的估值&lt;/b&gt; V(t) &lt;b&gt;随时间的变化可以由一个布朗运动描述&lt;/b&gt;，该布朗运动的漂移率和扩散率同样为时间 t 的函数，分别为 μ(t) 和 σ(t)。假设在成立时，公司的估值为 0，即 V(0) = 0，随着时间的推移，V(t) 按布朗运动波动。进一步假设不同的融资轮对应不同的估值阈值，当 V(t) 超过某轮阈值就意味着该公司成功完成该轮融资。&lt;b&gt;经过这样的假设，一个公司每完成新一轮融资所需要的时间就是这个布朗运动的 first passage time（首达时间）。&lt;/b&gt;在进一步的数学假设下，作者给出了布朗运动首达时间的概率分布函数 f 以及累计分布函数 F（公式本身太“感人”了，因此我们仅仅给出它们的数学符号，具体表达式就不列出来了，感兴趣的读者请参考原文）：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-82e4e3bf72e63d88052302a2feffad3b_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;439&quot; data-rawheight=&quot;94&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-82e4e3bf72e63d88052302a2feffad3b&quot; data-watermark-src=&quot;v2-a5c45041ede57e2ac57dd78c3df46bb7&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;其中 t_0 表示下一轮融资的起始时间、α 表示估值 V(t) 需要达到的阈值。结合创业公司的融资数据，作者观察到了如下特征，并将它们用于对 μ(t) 和 σ(t) 的建模中：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;大多数成功的创业公司在早期几轮融资中的间隔时间大致相同，这说明我们可以假设在一段时间内，μ(t) 和 σ(t) 保持不变；&lt;/li&gt;&lt;li&gt;很多公司虽然在前几轮融资成功，但是随着时间的推移，越来越多的不免走向失败，无法继续获得融资。这意味着当过一个公司发展了几年后，布朗运动的漂移率开始下降；&lt;/li&gt;&lt;li&gt;随着时间进一步推移，一个公司能够成功（IPO 或者被收购）的可能性越来越低（说明其估值 V(t) 到达某个极限，很难继续增长），这意味着 μ(t) 和 σ(t) 将随着 t 的增大趋近于 0。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;考虑到这些特性，Hunter and Zaman (2017) 对 μ(t) 和 σ(t) 的表达式总结如下：&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-2f99ced0be7c40558d6d3ef8291ea130_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;581&quot; data-rawheight=&quot;134&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-2f99ced0be7c40558d6d3ef8291ea130&quot; data-watermark-src=&quot;v2-3650fb7e7589a2fec6268ff25274189f&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;这表明当 t ≤ ν 时，μ(t) 和 σ(t) 为常数；而当 t ＞ ν 时，μ(t) 和 σ(t) 按指数衰减。ν、τ、μ_0 及 σ_0 需要根据训练集数据得到，其中 ν 和 τ 的取值对所有公司相同，而 μ_0 及 σ_0 是每个公司特有的参数。&lt;b&gt;用什么来决定每个公司的&lt;/b&gt; μ_0 &lt;b&gt;和&lt;/b&gt; σ_0 &lt;b&gt;呢？你一定已经猜到了：公司的特征！&lt;/b&gt;如此一来，公司特征就和上述布朗运动有机的结合起来了。&lt;/p&gt;&lt;p&gt;对于 μ_0 和 σ_0，分别考虑两组参数向量 &lt;b&gt;β&lt;/b&gt; 和 &lt;b&gt;γ&lt;/b&gt;，并令 μ_0 和 σ_0 是特征向量 &lt;b&gt;X&lt;/b&gt;以 &lt;b&gt;β&lt;/b&gt; 和 &lt;b&gt;γ&lt;/b&gt; 分别为权重的线性组合：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7341b56b6c9933ba95a138bb74ed46ad_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;478&quot; data-rawheight=&quot;118&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-7341b56b6c9933ba95a138bb74ed46ad&quot; data-watermark-src=&quot;v2-def05cf8587e73f5703de2a3aaf3d873&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;此外，Hunter and Zaman (2017) 认为&lt;b&gt;外部环境的改变会影响公司特征对于公司能否成功的重要性。&lt;/b&gt;为此，他们假设同年成立的公司共享一组 &lt;b&gt;β&lt;/b&gt;，但不同年份之间 &lt;b&gt;β&lt;/b&gt;向量是不同的（当然不同年的 &lt;b&gt;β&lt;/b&gt; 之间是不独立的）。对于给定年份，所有在该年成立的创业公司使用该年的 &lt;b&gt;β&lt;/b&gt; 向量和自身的特征向量 &lt;b&gt;X&lt;/b&gt; 来求解漂移率 μ_0。&lt;/p&gt;&lt;p&gt;&lt;b&gt;最终需要根据训练集来估计的参数包括 β 和 γ，以及用来描述漂移率和扩散率随时间变化结构的&lt;/b&gt; ν &lt;b&gt;和&lt;/b&gt; τ。对于给定的参数，可以求出描述公司估值变化的布朗运动的漂移率和扩散率，即 μ(t) 和 σ(t)，从而计算出估值 V(t) 到达各轮融资阈值的首达时间的概率分布；有了这个概率分布便能求出每个创业公司在个给定的时间内是否能成功完成指定轮融资的概率。&lt;b&gt;在参数估计中，目标函数就是最大化所有训练集样本点各轮融资发生的概率。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;为了计算概率，需要给定各轮融资的阈值。Hunter and Zaman (2017) 将这些阈值作为模型的超参数直接给定，但他们也强调模型对融资阈值的选择并不敏感。由于在模型中融资阈值对所有公司都一样，因此它们仅对 &lt;b&gt;β&lt;/b&gt; 和 &lt;b&gt;γ&lt;/b&gt; 参数的大小起缩放（scaling）作用，并不影响特征和目标函数之间的内在关系。&lt;/p&gt;&lt;p&gt;由于目标函数太复杂，作者采用了 Broyden-Fletcher-Goldfarb-Shanno 算法（一种求解无约束非线性优化问题的迭代算法，见 Yuan 1991），它能比传统的梯度法更快的找到最优解。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 构建最优投资组合&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;通过上述参数模型，作者构建了公司特征和公司估值 V 变化之间的关系。但到了这一步还没结束，仅仅有了这个关系，我们只能大致知道哪个公司可能更有希望获得融资。&lt;b&gt;为了从成千上万的创业公司中找出独角兽，我们最关心的是每个创业公司最终能够在有限时间内实现 IPO 的概率。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;有了首达时间的概率分布函数 F 和模型的参数，很容易通过下式求出任何公司 i 最终 IPO 的概率，记为 p_i（其中 H 为实现 IPO 所需要的阈值）：&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f164ae1be5a0e786908dc2625e7c3db8_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;445&quot; data-rawheight=&quot;51&quot; data-watermark=&quot;&quot; data-original-src=&quot;&quot; data-watermark-src=&quot;&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;有了每个公司成功的概率 p_i，那么 VC 是不是只需要将有限的资金投入给成功概率最高的那些公司就可以了呢？答案并非那么简单。假设一共有 m 个创业公司，由于资金有限制，VC 需要从中选出 k 个，&lt;b&gt;目标是这 k 个里面至少有一个最终会 IPO。&lt;/b&gt;这个问题类似背包问题（knapsack problem）或集合覆盖问题（set covering problem），其目标函数可以写成：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b715c3247c622f5be51860e817bc152d_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;477&quot; data-rawheight=&quot;89&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-b715c3247c622f5be51860e817bc152d&quot; data-watermark-src=&quot;v2-f15369f2653469a6ddd59a68cc22fa59&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;其中 [m] = {1, 2, …, m} 构成了所有公司的集合，S 是 [m] 的子集、大小为 k，E_i 代表公司 i 成功 IPO（其概率为 p_i）。由于我们希望至少有一个 IPO 成功，因此只需要将不同的 E_i 求交集。U(S) 就是选出的 k 个公司中，至少有一个 IPO 成功的概率，所以我们希望最大化 U(S)。&lt;/p&gt;&lt;p&gt;这个问题是 HP-hard，难以求解。但是，该问题具备一些不错的数学性质使得贪心算法（greedy）可以找到不错的次优解。&lt;b&gt;使用贪心算法，每一轮从所有剩余公司中选择一个，选出来的应该是能够最大化目标函数的边际增长，直到&lt;/b&gt; k &lt;b&gt;轮后，一共选择&lt;/b&gt; k &lt;b&gt;个公司构成&lt;/b&gt; S&lt;b&gt;。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果令 S_G 和 S_W 分别表示贪心算法的解和全局最优解，那么可以证明，目标函数的准确性是有&lt;b&gt;下界&lt;/b&gt;的：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-1122d775890e8f78828cfbf6b3511b7e_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;426&quot; data-rawheight=&quot;76&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-1122d775890e8f78828cfbf6b3511b7e&quot; data-watermark-src=&quot;v2-c6e5022bcaf90b7daa6ca5d856220a70&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;当 E_i 之间独立时 S_G 和 S_W 完全一致。在实际的求解中，Hunter and Zaman (2017) 假设公司之间能否 IPO 是独立的。利用独立性可以把目标函数表示成 p_i 的形式（p_i 是公司 i 成功 IPO 的概率）：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2594b8bebee93f6a233f9b8bef3d656a_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;473&quot; data-rawheight=&quot;167&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-2594b8bebee93f6a233f9b8bef3d656a&quot; data-watermark-src=&quot;v2-6668e21798164e5c97caafabfaf188c1&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;最后需要指出的一点是，在上一节的建模中，作者令系数 &lt;b&gt;β&lt;/b&gt; 随时间变化。因此在计算目标函数 U(S) 的时候必须考虑 &lt;b&gt;β&lt;/b&gt; 的变化引入的随机性。这意味着 U(S) 实际是关于 &lt;b&gt;β&lt;/b&gt; 的期望，即我们最终要最大化的是&lt;b&gt;按照 β 的概率分布计算出来的至少有一家创业公司成功 IPO 的期望概率&lt;/b&gt;：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b671fd2cd8d9d10e3b8d3894e10fbc94_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;703&quot; data-rawheight=&quot;321&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-b671fd2cd8d9d10e3b8d3894e10fbc94&quot; data-watermark-src=&quot;v2-0a2de732be7343a7ecfe47256ae382bf&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;这个期望可以使用蒙特卡洛积分求解。这就是这个量化风投框架的全部内容。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;6 量化效果&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;Hunter and Zaman (2017) 使用 2000 到 2010 年的数据作为训练集，之后的数据作为测试集，检验了他们提出的量化框架。通过在训练集上训练模型，他们得到了每个公司估值布朗运动的漂移率 μ_0 和扩散率 σ_0。将所有公司按照其最高的融资轮次分组，并考察每组中公司的 μ_0 和 σ_0 的中位数有：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-dc1ed1467198cf1ad6bf38124137c5dd_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;611&quot; data-rawheight=&quot;456&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-dc1ed1467198cf1ad6bf38124137c5dd&quot; data-watermark-src=&quot;v2-496b06bd76ff320b9c0e064441d834bd&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;观察这张图可以得到如下启发：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;表现较差的创业公司（最高融资轮止步于种子轮或者 A 轮）通常有较低的漂移率；&lt;/li&gt;&lt;li&gt;表现一般的创业公司（最高融资轮为 B 到 F 轮）通常有较高的漂移率，但是较低的扩散率；&lt;/li&gt;&lt;li&gt;表现最好的公司（以 IPO 或者被收购退出）的漂移率仅仅是一般水平，但是却有很大的扩散率。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;b&gt;这似乎说明足够大的扩散率是成功的必要条件。&lt;/b&gt;这让我们自然的提出下一个问题：什么样的公司特征可能带来比较大的扩散率（和漂移率）？&lt;/p&gt;&lt;p&gt;作者给出了 2010 年对漂移率产生最大影响的五个行业和非行业特征及它们的系数（别忘了 &lt;b&gt;β&lt;/b&gt; 每年是变的），以及对扩散率产生最大影响的五个行业和非行业特征及它们的系数：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-28c9a6294bc1bdc8b1b83e0c9af6102e_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;673&quot; data-rawheight=&quot;414&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-28c9a6294bc1bdc8b1b83e0c9af6102e&quot; data-watermark-src=&quot;v2-fa62465a20bf3e785275f4e11ffd68b3&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;从行业的角度来说，在 2010 年，影响漂移率的五大行业是线上学习、共享出行、开源、云计算以及生物信息学；影响扩散率的五大行业是社交媒体、信息派送、社交网络、APPs 应用程序开发以及云计算。这意味着这些行业的想象空间（波动）比较大。&lt;/p&gt;&lt;p&gt;从非行业特征角度来说，无论是对于漂移率还是扩散率，&lt;b&gt;最重要的特征就是创始团队的经验，特别是管理团队成员是否在成立本公司之前有过成功的创业经历。&lt;/b&gt;除此之外，&lt;b&gt;教育背景（是否毕业于名校），和早期投资者过往的成功率（maximum acquisition fraction）也尤为重要。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;根据训练模型和最优投资组合的优化函数，作者分别在 2011 年和 2012 年构建了两个投资组合，每个里面包含 10 个创业公司。这两个组合如下表所示，其中第二列为到 2016 年底每个公司最终的融资或退出情况，第三列为模型预测的退出概率 p_i，第四列为组合中依次加入每个公司之后目标函数 U(S) 的变化。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-46af32068f5d7256d0ff570bd15ff7a8_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1030&quot; data-rawheight=&quot;663&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-46af32068f5d7256d0ff570bd15ff7a8&quot; data-watermark-src=&quot;v2-edaac68097da19ee7e83ed568fd6fa87&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;结果显示，在 2011 年选出来的 10 个公司中，有 6 个如今已经成功退出了（包括 1 个 IPO 和 5 个被收购）；在 2012 年选出的 10 个公司中，有 4 个已经退出了（均是被收购）。这可以说是&lt;b&gt;令人称奇&lt;/b&gt;的结果了。&lt;/p&gt;&lt;p&gt;为了横向比较，Hunter and Zaman (2017) 把他们的模型和顶级 VC 以及一个基准模型比较。基准模型采用了 ordered logistic regression 算法，它使用每个公司最高的融资轮作为标签，进行有监督分类。&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f8781f46298bcecda715244970b3aa89_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;458&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-f8781f46298bcecda715244970b3aa89&quot; data-watermark-src=&quot;v2-ac5307b86c99554f7aa36e6b80a6a928&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;上图中，左侧的为 2011 年的结果，右侧为 2012 年的结果。横坐标表示所投公司数量，纵坐标为成功退出公司的数量。其中红线和蓝线为基于 Hunter and Zaman (2017) 框架的两个版本的模型的结果，它们的成功率远超基准模型以及顶级 VC；在 2011 年的组合中，当投资个数增加时，基准模型 ordered logistic regression 也取得了不错的效果，但是当投资的创业公司较少时，Hunter and Zaman (2017) 的框架仍然是最出色的。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;7 启发与思考&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;终于把这个框架介绍完了，首先的感受是“给跪了”。Hunter 和 Zaman 在这个量化风险投资框架中集成了大量的机器学习和数学优化算法。对它们的梳理如下：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;从创业公司数据库（如作者采用的 Crunchbase）和 Linkedin 抓取创业公司和创业者、投资人的数据；从行业、团队、早期投资人三个维度构建特征；这其中运用了知识图谱的构建以及语义分析等技术；&lt;/li&gt;&lt;li&gt;使用带漂移率和扩散率的布朗运动来建模创业公司估值的变化，以最大化训练集中所有公司各轮融资发生的概率为目标训练模型参数，这是一个有监督学习问题，求解时采用了 BFGS 算法；&lt;/li&gt;&lt;li&gt;根据模型的参数，使用布朗运动首达时间的概率分布计算出每个公司实现 IPO 的概率。&lt;/li&gt;&lt;li&gt;使用贪心算法和蒙特卡洛积分求解公司选取最优化问题，最优化的目标是最大化选出来的公司中至少有一个能够实现 IPO 的概率。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;b&gt;一个优秀的风险投资公司必备的两点是一套科学的方法论（来洞察投资热点和评估创业团队），和丰富的资源（无论是募资能力还是社会资源）。&lt;/b&gt;没有前者，它找不到好的项目；没有后者，好的项目不找它。&lt;b&gt;本文介绍的这个量化框架可以是这套科学方法论的有利助力。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;为什么这么说呢？因为哪怕是抛开该框架在样本外的预测效果而言，它通过训练集建模得到的参数就能给 VC 们带来很多非常有帮助的启发，这其中包括&lt;b&gt;对热点行业的追踪&lt;/b&gt;以及&lt;b&gt;对优秀创业公司必备的特征的精准定位&lt;/b&gt;。比如，通过模型的参数可以找出时下最热门的行业，并指出一个创业公司想要成功必备的特质是创始人的工作经历和教育背景 —— 资本尤其青睐连续创业者。这些发现和国内很多顶级 VC 的“投的是人，而不是项目”的理念不谋而合。&lt;/p&gt;&lt;p&gt;当然在现阶段，纯量化的风投框架无法解决一个风投公司的资源问题。换句话说，一个量化型风投基金如果没人脉没资源、没有足够的募资能力，那即便是它找到了最具成功潜质的公司，也很难得到股权投资的机会。但是对于那些已在市场中站稳脚跟的 VC 们，掌握一套量化的科学评估体系（无论是对行业还是对创业公司） —— 即便该体系没有本文介绍的这么复杂 —— 也都是大有裨益的。&lt;b&gt;该体系一定会在当下的风投界为这些 VC 们赢得一定的 edge。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果有一天，机器学习（或更广义的，人工智能）真的在投资界大有作为，那么一级市场的 VC 们恐怕会比二级市场的基金经理们率先“沦陷”，而“干掉”他们的正是他们扶持起来的这些人工智能领域的独角兽们。&lt;/p&gt;&lt;p&gt;犹未可知。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;参考文献&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Hunter, D. and T. Zaman (2017). &lt;i&gt;Picking winners: a framework for venture capital investment.&lt;/i&gt; Working paper, Sloan School of Management, Massachusetts Institute of Technology.&lt;/li&gt;&lt;li&gt;Wu, Z. and M. Palmer (1994). Verbs semantics and lexical selection. In &lt;i&gt;Proceedings of the 32th annual meeting on association for computational linguistics&lt;/i&gt;, 133 – 138.&lt;/li&gt;&lt;li&gt;Yuan, Y.X. (1991). A modified BFGS algorithm for unconstrained optimization. &lt;i&gt;IMA Journal of Numerical Analysis&lt;/i&gt;, Vol. 11(3), 325 – 332.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;http://weixin.qq.com/r/LkQ6IjTE02msrXBB9xE8 (二维码自动识别)&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>石川</author>
<guid isPermaLink="false">2018-06-21-38348236</guid>
<pubDate>Thu, 21 Jun 2018 00:00:00 +0800</pubDate>
</item>
</channel>
</rss>
