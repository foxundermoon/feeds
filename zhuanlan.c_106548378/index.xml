<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
<title>babyquant谈量化金融</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/</link>
<description></description>
<language>zh-cn</language>
<lastBuildDate>Tue, 01 May 2018 03:33:56 +0800</lastBuildDate>
<item>
<title>资管新规对量化的影响</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-04-28-36220649.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/36220649&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近发布了万众瞩目的资管新规，其实跟预期并没有太大变化。&lt;/p&gt;&lt;p&gt;比如这条：&lt;/p&gt;&lt;p&gt;“资产管理产品按照投资性质的不同，分为固定收益类产品、权益类产品、商品及金融衍生品类产品和混合类产品。固定收益类产品投资于存款、债券等债权类资产的比例不低于80%，权益类产品投资于股票、未上市企业股权等权益类资产的比例不低于80%，商品及金融衍生品类产品投资于商品及金融衍生品的比例不低于80%，混合类产品投资于债权类资产、权益类资产、商品及金融衍生品类资产且任一资产的投资比例未达到前三类产品标准。&quot;&lt;/p&gt;&lt;p&gt;之前的版本就有，其实对股票、债券还好，但是”商品和金融衍生品的比例不低于不低于80%“就牛逼了。其实很多商品CTA产品都是低杠杆运行，保证金比例10%左右，其它都是现金管理。如果真的80%放期货端，也只敢用10%-20%建仓，其它资金闲置的，那就造成大量浪费。&lt;/p&gt;&lt;p&gt;感觉商品CTA没法干啊。。。&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-c179e7a46d79e1e3d5831ae0b92c2435_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;405&quot; data-rawheight=&quot;305&quot; data-watermark=&quot;watermark&quot; data-original-src=&quot;v2-c179e7a46d79e1e3d5831ae0b92c2435&quot; data-watermark-src=&quot;v2-7be5ba9fc38cfff2ece252173001adda&quot; data-private-watermark-src=&quot;&quot;&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;而且，对于趋势策略还好，本身就用不到这么多杠杆，最多损失2%左右的现金管理收益。&lt;b&gt;而且可以不发纯商品的产品，可以发混合产品，就可以规避80%的限制&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;另一种方法是发行多空平衡市场中性的CTA，这种CTA市场上还不是很多，或许一些基于商品基本面的私募比较喜欢，毕竟多空对冲波动大幅减小持仓时间需要很长才能获得足够收益，而这么长的持仓时间最好需要基本面的支持。这种基金好一些，占用保证金更多，资金放在期货端本身就很多。&lt;/p&gt;&lt;p&gt;不过，不管多空对冲与否，增加总仓位事实上会增加风险，最极端情况：自己买的全部跌，自己卖的全部涨，亏损会非常惨重。只有减小仓位、缩短持仓时间才是减少风险的有效方法。&lt;b&gt;对冲本质上更多是忽悠投资者，或者说是耍流氓。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;当然，如果真的想做期货量化，又不想去私募，可以考虑券商自营。很多券商自营人均管理资金数亿元，用于做衍生品交易，本来自营就比私募激励要好，压力也没那么大。比如私募是从客户提取15%-20%的业绩报酬才给投资经理提成，而且还要给销售渠道分一部分，要乘以两个比例；但自营只需要乘以一个比例，自然相同管理规模的情况下可以多好几倍了，而且往往自营的人均管理规模就比私募多，毕竟私募招人裁人比较随意，人会非常多，流动性大，人均管理规模很小。有的私募从几亿到100亿人均管理规模还下降了很多。&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-04-28-36220649</guid>
<pubDate>Sat, 28 Apr 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>量化私募排名之我见</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-04-27-36201064.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/36201064&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;首先，这个排名仅代表我个人观点，只给出前面几名，几百家量化私募名单太长；&lt;/p&gt;&lt;p&gt;其次，我已经不做私募了，所以不存在诽谤同行的说法，因为压根就不是同一行；&lt;/p&gt;&lt;p&gt;最后，跟大学排名差不多，有主观因素，比如武书连老喜欢把浙大排第三，你懂的；&lt;/p&gt;&lt;p&gt;&lt;b&gt;按历史最大规模排&lt;/b&gt;&lt;/p&gt;&lt;p&gt;最新规模不能反映历史情况，随机性较大，所以按历史最大规模比较有说服力：&lt;/p&gt;&lt;p&gt;大岩、富善、泓信、九坤、博普、明汯、念空&lt;/p&gt;&lt;p&gt;&lt;b&gt;按品种齐全程度&lt;/b&gt;&lt;/p&gt;&lt;p&gt;比如期货、股票、对冲、单边、高频、低频都做，而且都还有一定规模最好，比如每个门类要5亿以上：&lt;/p&gt;&lt;p&gt;富善、九坤、博普、明汯、念空、泓信&lt;/p&gt;&lt;p&gt;&lt;b&gt;按人均管理资金&lt;/b&gt;&lt;/p&gt;&lt;p&gt;有的公司几个亿的时候几个研究员、投资经理，到了100多亿的时候100多个研究员、投资经理，没用啊，分到每个人的钱没啥变化，每个人收入也没啥变化，差评。&lt;/p&gt;&lt;p&gt;元盛、世坤、思勰、进化论&lt;/p&gt;&lt;p&gt;&lt;b&gt;按友好程度&lt;/b&gt;&lt;/p&gt;&lt;p&gt;比如非竞争协定越松越好，老板越liberal越好，liberal就是自由、平等、开放，规矩没那么多；conservative就相反，比较老板专制一些，想说话吐槽都不行，上知乎都不给；&lt;/p&gt;&lt;p&gt;明汯、思勰、千象、富善&lt;/p&gt;&lt;p&gt;大概这样吧..... &lt;/p&gt;&lt;p&gt;其实，量化私募的发展分两段时间：2015年8月以前和2015年8月之后。&lt;/p&gt;&lt;p&gt;记得2014左右光大银行对量化投顾招标，100多家量化团队报名，最后入选的是龙旗、博普、盈融达，那时候这三家的风头应该是最盛的，主要是股票量化对冲；或许再加上金锝，应该是比较牛逼的私募吧。那时候，富善、明汯主要做股指，其他在知乎跳的最欢那几个，还在非量化不知名的公司打工……&lt;/p&gt;&lt;p&gt;股灾之后，很多公司损失惨重，很多公司没损失的，其实都是股灾之后成立的……cta方面，其实&lt;a href=&quot;tel:2012-2016&quot;&gt;2012-2016&lt;/a&gt;都挺好，只是很多时候股票对冲风头正旺，从规模角度cta只是零头，大公司看不上，但2015之后大家都重点发展cta，2016规模上的很快，只是2017又跪了……&lt;/p&gt;&lt;p&gt;于是，很多成立两三年的公司，没经历过股灾，2016没做cta，或者做了亏钱没发产品，就在知乎上自称第一梯队和大佬了……&lt;/p&gt;&lt;p&gt;如果一个行业，成立两三年的公司都能自称大佬，那么或许很多人得考虑是否应该转行，或者自己开一家试试……&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-04-27-36201064</guid>
<pubDate>Fri, 27 Apr 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>【转发】招聘交易系统开发人员</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-04-27-36182248.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/36182248&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;某top高频交易团队招聘高性能交易系统开发师，要求国内前10  海外前50计算机 EE专业名校生。要求有1-3年的C++开发经验，数据结构和算法背景优秀，了解TCP 协议，对于计算机性能和系统架构有深刻的理解，欢迎有 GEEK精神的大侠加入。有兴趣的同学欢迎加微信或电话18589024966了解。薪酬高于BAT，前景无限。&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-04-27-36182248</guid>
<pubDate>Fri, 27 Apr 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>机器学习做CTA的一些注意事项</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-03-15-34581781.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/34581781&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;现在机器学习方法大行其道，很多人也想用这些方法来做CTA，我自己也做了一段时间，高频低频都有，觉得有些地方需要注意一下。&lt;/p&gt;&lt;p&gt;首先是数据处理方面。传统的量化交易系统喜欢主力连续合约或指数合约，其实最关键的是换月部分的处理。如果是主力连续，那么换月时计算指标回看行情的时候可能会用到不同的合约，这当然是不大合理的；如果用指数合约，其实更不靠谱，毕竟很多非主力合约买卖价差非常大，价格跳跃严重，而且换月部分还是用了不同的合约。&lt;b&gt;靠谱一些的方法自然是每个合约都保存完整的行情，分别计算完技术指标，再抽取主力部分形成连续合约；而不是先生成连续合约再计算指标。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;有了数据之后就是建模了。如果是分笔数据，500毫秒一个。传统的技术指标一般需要高开低收，其实500毫秒数据也是有高开低收的，主要考虑这几个价：&lt;/p&gt;&lt;p&gt;前500毫秒的最新价；&lt;/p&gt;&lt;p&gt;当前500毫秒的最新价；&lt;/p&gt;&lt;p&gt;当前买卖挂单价，可以估算分别成交了多少，大于零则把价格加入对比；&lt;/p&gt;&lt;p&gt;国内有个日内最高价、最低价，如果恰好那500毫秒有更新，则可以加入对比；&lt;/p&gt;&lt;p&gt;前500毫秒的挂单价，若估算有成交也可以加入对比；&lt;/p&gt;&lt;p&gt;因此，最多可能有6个价格参与对比，自然就可以计算K线的最高最低价，那么传统的技术指标都可以用了，至少几十个这类指标，套用不同回看周期，可以有几百个因子。&lt;/p&gt;&lt;p&gt;如果是中低频有人用5分钟K线，但其实这简化了数据，也浪费了很多信息。比如相邻两个5分钟的指标取值或预测值可以相差很远，这就不够平滑。实际交易是逐笔行情进行分析的，因此可以考虑用5×60×2=600个行情来代替5分钟。比如预测周期是20个5分钟，那么就预测12000个行情即可，这样每笔行情来都预测，预测值比较相近，可以用一些平滑方法来处理。另外也不会错过机会。用5分钟K线的一个很大问题在于可能行情大涨时预测值跟着升高，但恰好没到阈值就变缓和了，预测值跟着下降，然后又一波大涨......可能就是差那么一点到达预测阈值而无法交易，只能依靠硬性止损来避免。但如果用逐笔行情来代替，则可以大大降低此类风险。&lt;/p&gt;&lt;p&gt;还有就是计算指标值。无论python/matlab/r其实计算速度都是不大行的，对于逐笔行情计算因子还是得依靠C++。其实速度也挺快的，计算一个因子50纳秒，那么100个因子就是5微秒，一天4万笔行情，就是20万微妙即200毫秒，一年250天，就是50秒；30个期货品种也才1500秒，总之用C++会非常快，哪怕发现中间有错，要全部重新算一遍，这个开销也不大。做机器学习研究经常出现一些问题，需要从很底层开始改起，上面的工作全部重来，如果整个流程太长，那么研究效率会很低。&lt;/p&gt;&lt;p&gt;然后就是构建因子的问题。如果预测长度是500，那么因子的回看周期最好也是500，这样可以有最强的相关性。比如有20个生成因子的函数，每个都取500，就有20个因子，这些因子相关性不会很高，用它们来建模可以很好避免过度拟合，或者它们全部加起来只是欠拟合。&lt;/p&gt;&lt;p&gt;真正导致过度拟合的是每个因子选取很多回看周期，50、100、200、500、1000等，反正生成这么多因子，总有能用的，但由于选取基数很大，就很难说这么选的因子有什么实际意义了。&lt;/p&gt;&lt;p&gt;然后就是regularization、回测等等，一般来说lasso会比ridge更安全一些，毕竟它自带因子筛选功能。或者这么想：如果扔进去的因子很牛逼，那么哪怕是不用regularization也是可以的，这时候lasso和ridge也没区别；但如果扔进去的因子不是那么牛逼，或者过去牛逼现在可能突然不牛逼了，那么lasso具备因子筛选功能还可以及时删除这些因子，ridge就只能保留下来，有可能无效因子非常多，每个贡献一些噪音，加起来就很很不好了。下面这个quantopian的例子简单说明这点。比如对于单纯的线性回归不加约束，结果如下：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d4786431d04124b62cbf5af38a159d08_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;958&quot; data-rawheight=&quot;251&quot;&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;蓝色线是资金曲线，可见是亏钱的。&lt;/p&gt;&lt;p&gt;然后下面这个是ridge regression的：&lt;/p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-1ca1025c4383075a7435a318d97bdc26_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;951&quot; data-rawheight=&quot;254&quot;&gt;&lt;p&gt;可见表现也不咋地。&lt;/p&gt;&lt;p&gt;但同样的因子换成lasso就不同了：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-9b7e3aa0693e6dcc9f71ad4b34b0909a_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;965&quot; data-rawheight=&quot;267&quot;&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;蓝色线好歹是赚钱的。可见，如果是因子不咋地的话，lasso会更好一些。当然，如果设计因子比较精细的话，那其实就没所谓了。&lt;/p&gt;&lt;p&gt;有了预测模型之后，就要确定开平仓的条件。比如开仓阈值选10个，平仓阈值10个，一共就100组参数。如果模型靠谱的话，100组至少90组得是盈利的，而且交易次数要有足够的变化，从几次到几百次等，不能为了结果好久人为缩小参数阈值。这类网格优化是很容易过度优化的，因此，只有说大部分结果都是好的情况下才能很好地避免。&lt;/p&gt;&lt;p&gt;有人问那结果就是不好呢?此时切忌开发过多筛选条件硬是矮子里面挑高佬，这时候一般可以考虑两个方面：一个是预测的长度，另一个是因子的质量，或许预测长度更重要一些。&lt;/p&gt;&lt;p&gt;以前股指很活跃的时候，几秒、几十秒的波动有好几个价位，因此预测时间的长度不需要很长，或许30ticks足矣。但现在很多商品波动很小，预测这么短的时间价格波动很难覆盖交易成本，因此需要预测更长时间，比如500、1000、1500等等都是可能的。这么做出来的策略也不会特别高频，甚至几天才一次交易。&lt;/p&gt;&lt;p&gt;对于因子质量，其实传统的几十个技术指标也都可以用，另外还有基于挂单量也可以开发出一些指标，另外就是跨品种的指标等等。其实即使是日内比较高频的策略，有10个比较好的指标也可以了，其实要开发出稳定的也不难。指标稳定的意思很多种，比如它跟未来收益的相关性不能时正时负，金融很多人用spearman相关性，例如80%都是同一种符号，那就比较稳定了。还有就是跟目标变量的相关性，高频的话单个指标5%以上也是比较容易达到的。其实无论什么模型，如果结果靠谱的话，最终指标的数目都不会很多。用lasso的话它自动筛选出少数指标，用ridge的话需要人工筛选出少数靠谱的再代入模型，结果都差不多。&lt;/p&gt;&lt;p&gt;大概能想到的就是这些吧。。。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-03-15-34581781</guid>
<pubDate>Thu, 15 Mar 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>讨论一下最近某金融资讯软件下载数据受限的事情</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-03-02-34155770.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/34155770&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近，某国内大型金融资讯服务提供商下载数据的API貌似受到了限制，比如原来普通试用客户是500万条/周，付费用户5000万条/周，现在变成了普通用户50万条/周，付费用户500万条/周。于是很多量化研究员表示情绪不大稳定。&lt;/p&gt;&lt;p&gt;事情的起因，据说是公司某位码农离职导致的。当然，我一向不以恶意揣测别人。有人说我的文章抨击码农比较多，但其实这是不正确的。我一直认为，&lt;b&gt;该谁干的活就该谁干&lt;/b&gt;。比如量化私募研究策略，当然是量化研究员干的，你一个码农搀和什么呢？就算团队合作，也有个主次分明，很显然码农更多是打下手的角色，这才是合理的。但很多码农，或者公司领导、老板，也不知道出于什么心态，就喜欢把水搞浑然后浑水摸鱼，我就不知道说什么好了。如果你们公司有这样的领导，注意了。&lt;/p&gt;&lt;p&gt;比如万德，本来他就是软件公司，那当然是码农为主，这没什么疑问。其实我一直觉得码农就应该去这种码农主导的公司，而不是去什么量化私募。再说，在码农主导的公司，上限时比尔盖茨、扎克伯格，水平比什么西蒙斯、DE Shaw高到不知哪里去了。&lt;/p&gt;&lt;p&gt;另外，很多码农觉得待遇不好，所以跳槽，其实很多时候是公司老板对码农不够厚道。我认为，&lt;b&gt;衡量一个码农的价值，不能说靠着他在公司贡献多少收入来决定，毕竟这个太难量化&lt;/b&gt;。一个软件几十人几百人写，比如销售赚了1000万，分给这些人，咋分啊？按代码量？好像比较弱智，人家故意把简洁的代码写复杂岂不是更坑爹么。所以这码农的待遇就比较难量化。&lt;/p&gt;&lt;p&gt;换个角度，或许可以考虑”&lt;b&gt;如果这个码农跳槽了，公司会损失多少“&lt;/b&gt;来决定他的待遇更为靠谱。经常一些公司，我对事不对人哈，一些码农性格比较内向，干了很多活但不会抢功，很多领导专门欺负老实人。但老实人不代表不需要钱，人还是需要钱的，否则跟咸鱼有什么区别？码农觉得受了委屈得不到理解，于是跳槽了，留下一堆手尾，结果公司领导带领一大群人加班加点去研究，客户投诉日益增多，流失严重，这些加班费、客户流失等等带来的损失远远超过了码农的薪资待遇。因此，对公司而言，最优的决策当然是给码农升职加薪留住他，否则他走了岂不惹得自己一身骚。&lt;/p&gt;&lt;p&gt;最后，说说资讯软件API的事情。其实一些软件很牛逼的，主流的R/Matlab/Python/C++都有支持，可以方便批量下载数据，这对量化研究很有帮助。其实说实话，如果是分笔数据，就没必要用这些软件下载了，螺纹钢一个合约一天4万条，3个活跃合约超过10万，每个品种10万，40个品种400万，一周两千万，还有股票呢？所以哪怕是正常的需求都是比较难满足的，这也容易跟那些恶意下载数据的混淆，被错杀了。&lt;/p&gt;&lt;p&gt;因此，如果是这些分笔行情数据，还真不如淘宝买就好了，比如淘宝一般期货一个月60元，股票25元，股票量更大但需求少所以便宜。哪怕每天盘后也才100元。担心质量问题多找一家，费用也不高，总比10几万的信息咨询提供商好吧。&lt;/p&gt;&lt;p&gt;如果是基本面数据，特别是期货的各类基本面信息，确实只能找这些资讯提供商。但其实基本面一般日线。上中下游，加起来1000个指标，历史1000天，一个品种就是100万个数据，40个品种4000万，其实如果付费用户一周5000万的量这是可以满足的。另外又不是每天下载全部历史数据，下载完一次只用每天更新最新的，那个量就非常少了。&lt;/p&gt;&lt;p&gt;反正我国金融业还在起步阶段，经济也在社会主义初级阶段，不能福利跟北欧比，军事跟美国比，资讯软件跟彭博比，没意义，人比人，气死人，做最好的自己就行了。再说，一分钱一分货，想要彭博的质量，就要给彭博的价钱，而且我觉得彭博要自己专门的机器和键盘有点不大好。&lt;/p&gt;&lt;p&gt;说实话，我还真不用这些资讯软件，历史数据自己下，然后每个月找淘宝买数据核对一下，就行了。现在流行轻资产运营，就是这个理。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-03-02-34155770</guid>
<pubDate>Fri, 02 Mar 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>被动投资增加会增加市场有效性吗？</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-03-01-34084615.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/34084615&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;近年来被动投资逐渐增加，主动投资越来越少。特别是现在有很多ETF产品，使得被动投资更加容易。&lt;/p&gt;&lt;p&gt;当然，ETF也有很多种，大盘、小盘、各类题材等，甚至跟波动率有关的，包括最近爆掉的那个。&lt;/p&gt;&lt;p&gt;巴菲特一直倡导指数化投资，常理来说，80%的共同基金的基金经理无法打败市场，那么哪怕被动投资指数，也可以比80%的人强，这自然是一个不错的选择。特别是最近巴菲特跟某人的十年赌约，就是十年前让某人挑5只他认为最牛逼的对冲基金，然后看10年后这些基金跟标普500指数对比如何，结果最近几年标普猛涨，那些基金估计做了市场中性亏损严重，自然比不过了。于是巴菲特再次封神。&lt;/p&gt;&lt;p&gt;其实要跟指数比收益率，要考虑这几个因素：&lt;/p&gt;&lt;p&gt;&lt;b&gt;1.指数是默认一直满仓的，但基金不可能一直满仓&lt;/b&gt;，多多少少留有现金。另外指数是满仓股票，而基金还有债券等其他收益率更低的品种，因此如果只考虑收益率的话，确实很难打败指数。还有就是买卖的各种费用，分红也要交税，这些指数都不用。巴菲特长期打败标普，很大程度上因为他家保险公司可以用很低的成本融资，因此他是带杠杆的。哪怕他只买指数也能赚更多。&lt;/p&gt;&lt;p&gt;&lt;b&gt;2.从零和博弈看，要想打败市场，就要有人跑输市场&lt;/b&gt;。如果被动投资越来越多，大家都选择跟随市场，特别是原来跑输市场的人直接认怂，选择被动跟随市场，那么主动投资想获得超额收益确实会更难一些，毕竟犯错的人少了。其实很多指数化投资也需要构建组合的，比如某个板块的指数等等，如果重仓了一个板块，但这个板块很弱，那么这种指数化投资也是跑输全市场指数的。&lt;/p&gt;&lt;p&gt;&lt;b&gt;3.从价值投资角度看被动投资未必能增加市场有效性&lt;/b&gt;。上面是从零和博弈角度分析的，你赚的钱就是别人亏的，或者说你跑赢市场的钱就是别人跑输的。但从另外一个角度，如果大家都被动了，那么研究价值发现的人少了，&lt;b&gt;或许市场上还真的会出现很多便宜的优质股没人要&lt;/b&gt;。从这个角度，打败市场似乎会更容易一些。&lt;/p&gt;&lt;p&gt;简单假设：市场就两只股票，一只牛股，一只烂股；指数化投资就跟随着投，牛股烂股都投；价值投资的话，当然只投牛股不投烂股，这么看似乎大家都去被动投资了那么主动投资的人反而更容易打败市场了。如果是主动投资的人很多，那么牛股的股价也会很高，最终收益率或许跟烂股差不多；但正因为大家都去做指数化投资了，所以牛股买的人也不是很多，反而有了投资机会。&lt;/p&gt;&lt;p&gt;所以，我觉得理解市场行为可以这样看：价值投资者买牛股，散户买烂股，另外还有一些不是选股而是择时的交易者，他们更类似零和博弈，但价值投资者这些不是零和的。如果股票波动很大，而整体涨幅不大，那么择时交易者却是比较容易打败市场，这也就是所谓的市场不是很有效的情况；但如果反过来，市场整体涨幅很大，但局部波动不大，也就是胡乱交易的散户不多，那么短线择时交易者（大多数对冲基金的交易模式）获利空间大幅缩小，就比较难打败市场了。但是对价值投资者来说，如果大家都买指数基金，做价值发现的人更少了，那么做价值发现就更容易了，因此他们是更容易打败市场的。&lt;/p&gt;&lt;p&gt;最后的结论：被动投资多了，对短线投机者来说是坏消息，他们更难打败市场，市场对他们来说更有效；对价值投资者来说是好消息，他们更容易选到廉价优质股，长期打败市场的概率增加。至于整体评价市场是否更有效，由于短线交易者获利后会不断出金，事实上他们的长期复合收益率并不高，因此这部分人只是小部分，影响不大，&lt;b&gt;价值投资者（长期投资者）才是市场大头，由于他们赚钱更容易了，因此整体上市场应该更为无效&lt;/b&gt;。&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-03-01-34084615</guid>
<pubDate>Thu, 01 Mar 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>为什么中国政府不积极发展金融衍生品市场?</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-02-20-33879132.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/33879132&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;看到知乎有人问这个问题，本来回答了，但没写好，被人怒怼了，其实我对期权也不是很了解，随便写了几句，后来发现欠妥，就删了，现在认真写一下。&lt;/p&gt;&lt;p&gt;中国政府也好，美国政府也好，对金融衍生品市场，一直都是&lt;b&gt;“放松-监管-放松-监管”这样的循环&lt;/b&gt;。但中国比美国更为集权，所以无论放松还是监管，幅度都比美国大，显得政策波动大得多，让人更加难以捉摸，政策风险比较大。美国更多是市场导向，哪怕政府加强监管，也更多是小修小补，整体上政策风险小的多。有人说奥巴马是极左，那请他来中国，见识一下什么叫真正的左。&lt;/p&gt;&lt;p&gt;说实话，发展衍生品市场在技术上也不是很难。比如简单的期货逐笔行情，交易所一直说自己有逐笔行情，随时都可以发布，但监管方面不给，只允许截面行情。但是对广大普通量化从业人员来说是有好处的，因为数据量小了，处理更方便了，对编程、计算的要求都更低一些，普通人也可以做量化。其它方面，参考新加坡、韩国这些中等体量的经济体，人家新加坡的股指类期货、韩国的期权规模都很大，远远超过其经济体对应的地位，可见只要政府重视，发展这些难度并不是很大。&lt;/p&gt;&lt;p&gt;中国很多特殊国情，比如大家都知道开交易所赚钱多，证监会想开，其他部委也想开，地方政府也想开，大家行政级别差不多，政治地位差不多，谁也左右不了谁。比如虽然证监会监管的上海期货交易所有黄金和白银的期货，但人民银行的上海黄金现货交易所也在交易黄金、白银的衍生品，只不过是现货，但也是保证金交易，也可以程序化，交易规模还挺大，甚至超过上期所，对散户来说，其实都是投机，交易期货、现货一样的；另外，各地方政府、国有企业也在弄各种各样的贵金属交易平台，证监会只能说这些非法，但无权取缔，美国一般说commodity都默认商品年期货，很少听说商品现货交易的。&lt;/p&gt;&lt;p&gt;中国的这些现货交易所分流了太多散户资金，让企业难以对冲风险。说白了，对冲、分散风险本质上需要其他一些风险承受能力强的投机客来承担，比如想一夜暴富的散户。&lt;b&gt;2016的商品期货价格大涨让国有钢厂扭转数年亏损实现盈利，这是金融帮助实体经济的典型案例，说白了就是散户给钢厂送钱&lt;/b&gt;。当然有些散户规模还不小，甚至是基本面方面的大牛。但跟党国的企业比起来本质上还是散户。&lt;/p&gt;&lt;p&gt;说回“放松-监管”的事。中国1990年代的时候期货市场曾经非常火爆，全国300多个期货交易所，自行车期货都有，终于酿成了国债期货“327国债事件”，证券教父管金生锒铛入狱。&lt;/p&gt;&lt;p&gt;其实期货很简单的，有多有空，管金生到处借钱大举做空，由于交易时间有限，很快收盘，对手方是国有背景的中经开，损失惨重，但交易所宣布最后时间段的交易无效（&lt;b&gt;这就是政策风险&lt;/b&gt;）。后来管金生和中经开的老总都因此坐牢，然后从严监管，300个期货交易所剩下3个，国债期货也关闭了。&lt;/p&gt;&lt;p&gt;比期货复杂一些的是期权，跟期权很像的是权证，香港叫涡轮。2000年代中国有一段时间权证非常火爆，但后来所谓“南航天量创设”事件而遭到监管层封杀，2005-2011年风光无限的权证市场就此终结。&lt;/p&gt;&lt;p&gt;其实这些不难理解的：既然是金融衍生品，理论上规模可以非常大，美帝当年16万亿美元的GDP支撑了600万亿美元的金融衍生品市场。天量创设也是这个意思：赌南航股票的涨跌，哪怕南航市值只有100亿，但赌盘可以1000亿、1万亿，所以天量创设从道理上来说是合理的。但由于那段时间南航股票暴跌，导致认沽权证价格暴涨，但后来行权价7块多，最后价格只跌到8块多，使得这些认沽权证通通变成废纸，而之前南航天量创设发行了非常大量的认沽权证，让人们认为是这些新发行的权证拉低了价格。&lt;/p&gt;&lt;p&gt;其实从期权定价公式来看，似乎&lt;b&gt;并没有说衍生品发行量对价格有啥影响，一般来说波动率有影响&lt;/b&gt;。权证被废之后，股指期货逐渐发展起来，应该是2010年4月16日上市的。那时候股票量化对冲就火了起来，各方大神粉墨登场。反正就说中国股市有了做空机制，牛市熊市都能赚钱，其实说多一句就是牛市熊市都能亏钱。应该来说，任何市场刚开始的时候机会还是很多的，2015年之前股票量化对冲都是很好的策略，一年15%-20%，最大回撤3%-5%，好牛逼的，很多公司规模都达到了几十亿，应该说中国还是比较大力发展的。&lt;/p&gt;&lt;p&gt;那个时候确实有很多海外工作的人回国了，良莠不齐，差的多好的少，国内一些公募基金、证券公司喜欢招这些背景还比较光鲜的人，薪资也比较高，几百万的年薪。但其实那时候股票量化对冲竞争也不是很激烈，而这种策略短期来看很难做得非常好。比如大家都是15%-20%的收益，3%-5%的回撤，都差不多，国内随便找个研究生能做到，海归大拿也是这种水平，短时间内区分度太小，于是很多本土背景的公司领导在媒体放炮说“&lt;b&gt;华尔街那些人的模型不适合中国市场，还不如我们招的实习生牛逼&lt;/b&gt;”。很多时候，too simple, sometimes naive......&lt;/p&gt;&lt;p&gt;但好景不长，其实2014年之前是漫长熊市，很多股民去证监会上访，说股指期货压制住了股票市场。其实很多&quot;专家&quot;的逻辑是这样的：&lt;b&gt;股指期货半秒报一次价，股票指数15秒，而大户都做空，所以股指期货会领导股票下跌&lt;/b&gt;。然后证监会就不给各个研究部门公布大户持仓的数据。当然，后来2015大涨的时候又没人说股指期货的领涨作用。&lt;/p&gt;&lt;p&gt;2015是个神奇的一年，就是发生了股灾，然后对股指期货进行了限制，大幅提高日内平仓手续费100倍，限制撤单等，就是扼杀了高频交易。对程序化的定性是“助涨助跌”，本来是要严厉整顿程序化交易的，可惜提出整顿的那位证监会高官自己被抓了，于是就不了了之，两年后高频巨头伊士顿也被轻判。其实这些都是中国特色的政策风险。&lt;/p&gt;&lt;p&gt;其实美国的衍生品市场发展也差不多，比如1987年的股灾被认为是“投资组合保险”这类程序化交易导致的，而这类保险也是衍生品。1998年长期资本管理公司就更牛逼了，当时公司管理规模才40亿，居然融资了1200亿，大部分买场外衍生品，特别是利率衍生品，合约名义价值1万亿美元，所以合约跌1个基点就是1亿美元，40亿美元1个月就亏完了，于是很多合约就没有对手方，大家就恐慌了。&lt;/p&gt;&lt;p&gt;其实嘛，原因各种各样都有，&lt;b&gt;比如流动性危机之类的&lt;/b&gt;，这类场外衍生品想平仓的时候找不到对手方；&lt;b&gt;还有就是模型风险，俄罗斯违约造成了很多小概率事件&lt;/b&gt;；另外就是&lt;b&gt;高杠杆的风险&lt;/b&gt;，40亿本金买了1万亿的东西；但那时候美联储很快处理了危机，影响不是很大，所以美国政府也不是很重视，甚至还废除了混业经营的限制。&lt;/p&gt;&lt;p&gt;10年之后的2008年，又是这些场外衍生品惹事，这次是CDO、CDS这些，其实道理还是那些，比如小概率事件发生了，这次是房贷市场出了问题；另外一个重要原因是产品太复杂，比如CDO的平方之类的，可能对风险估算得不是那么准确。&lt;/p&gt;&lt;p&gt;国外衍生品是场外规模远远大于场内，比如利率、外汇这些；但国内是反过来，是场内远远大于场外。而且国内的场外衍生品很多是个股期权。期权这东西，设计上或许并不复杂，但背后定价、动态对冲啥的复杂一些。虽然有一套很完美的随机微积分（stochastic calculus）的理论，金融工程硕士传统上教学内容也是学这些，但现实往往跟理论有一定出入。比如著名的长期资本管理公司（LTCM）号称做场外期权世界顶级的，成立四年就栽了大跟头，尸骨无存。美国2008的CDO、CDS等也酿成大祸。&lt;/p&gt;&lt;p&gt;其实当年美国的场外衍生品quant被誉为“绝望博士收容所”，无数哈佛、麻省、普林的数学、物理博士都跑去投行当这类quant，比如用蒙特卡罗给奇异期权定价之类的。这些人应该是很牛逼的，但最后还是阴沟翻船，比如著名的goldman alpha亏损30多亿美金，其他贝尔斯等、雷曼、美林等直接就跪了。其实现在国内的中信、中金、华泰、广发就相当于美国当年的高盛、摩根、美林、雷曼吧，说实话，美国这些公司招哈佛、麻省的人，国内这些公司就招北大、清华的人，&lt;b&gt;哈佛、麻省的学生在美国捅出大篓子，那么北大清华会不会在中国捅出篓子？咱们来日方长，拭目以待。。。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;期货多空双方收益对等的，但期权买卖双方收益不对等，而大券商一般是卖方，亏起来会很厉害。&lt;b&gt;有人说，他们会动态对冲不用担心。但说实话难道LTCM不会？雷曼、贝尔斯等不会？这些忽悠一下小实习生或小女朋友就算啦，如果自己也信了，就不知道说什么好了。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;中国衍生品市场的发展速度，放到国际上来看，到底是快还是慢呢？那个问题有个高票回答一味跪舔中国政府，吸引了不少小粉红点赞。但衡量好与坏得有一个标准，你不能说发展不好的部分就是“&lt;b&gt;中国政府压根看不上衍生品市场，没用心发展它&lt;/b&gt;”，那就显得莫名其妙了。&lt;/p&gt;&lt;p&gt;证监会高层也经常换人，之前专业水平挺高的张育军已经锒铛入狱，现在的方星海是斯坦福经济学博士，当然水平也是高的。但之前搞了个熔断没多久下台那位，你硬要说水平高，我就不知道说什么好了。其实即使是张育军，虽然专业水平高，毕竟两个交易所老总都当过，但忙着“靠山吃山”，让他救市却拿国家队的钱炒妖股，然后拉高自己赚钱，我也不好说什么了。&lt;/p&gt;&lt;p&gt;&lt;b&gt;其实官员的专业素养是一方面，监管态度是另一方面。主要就是左翼严格监管和右翼放松监管的区别&lt;/b&gt;。美国更明显一些，民主党自由派就是加强监管，共和党保守派就是放松监管。中国一向以左翼思想立国，本来就趋向于严格监管，偶然放松一下，出了乱子，立马出台更严格的监管措施。奥巴马也是一样的，比如问题改成“为什么奥巴马政府不大力发展衍生品市场”，答案也是差不多。比如奥巴马说过“&lt;b&gt;数学和工程专业的毕业生应该从事实体经济的工作，而不应该去当衍生品交易员。&lt;/b&gt;”中国最高层领导也是类似的态度，肯定希望培养的理工科人才去从事工程技术的工作，而不是衍生品虚拟经济。当然，或许对自己的子女择业有不同的看法。&lt;/p&gt;&lt;p&gt;零零散散说了这些，最后，说点正能量的东西。中国现在的思路一直说金融要服务实体经济，不能资金在金融领域空转，这些对复杂的金融衍生品如CDO、CDS等的发展似乎不是很有利。但对于普通的场内期货、期权的发展还是有利的。特别是商品期货，本来中国商品期货市场的规模N年前就是世界第一，现在又要商品很多新品种，未来发展还是有很大潜力的。&lt;b&gt;场外期权方面，现在没出事，是因为发展时间太短，大家还比较谨慎，以后真的出件大事撸掉一两家大型券商，那大家就舒服了。&lt;/b&gt;所以，本人非常不看好场外期权这类业务。当然，做销售是没问题的，反正卖出去就有佣金，管它之后洪水滔天。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-02-20-33879132</guid>
<pubDate>Tue, 20 Feb 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>关于对量化交易比特币的看法</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-02-14-33814248.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/33814248&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近有一些报道，说一些原来做程序化、量化交易的人转战比特币市场，1年300倍，看起来还挺不错的。&lt;/p&gt;&lt;p&gt;其实，我之前说过，&lt;b&gt;太暴利的东西往往不能长久&lt;/b&gt;。比如2015的股指期货高频，牛逼的时候很多人也是每天盈利过百万的，比现在比特币牛逼多了。那个1年300倍的本金是2万，300倍也不过600万。&lt;/p&gt;&lt;p&gt;有人说，不对啊，那是他本金投入少，如果他投入200万，现在就是6亿。但不能这么算的。他这种程序化是做套利的，比如很多个交易所，都有比特币，这个价格高一些，那个价格低一些，他就利用程序低买高卖。所以这种策略容量不会很大，未必200万就能成比例的增加。&lt;/p&gt;&lt;p&gt;有人说，听起来好简单啊，这么弱智，为啥他能做别人不能做呢？其实应该做的人也有一些，但是相对于广大不用程序化交易的人来说，这些套利者的比例还非常小，所以赚钱还不是特别的难。&lt;/p&gt;&lt;p&gt;其实期货市场、美国股票市场、外汇市场也有类似的机会。比如一些期货有迷你合约，大合约跟迷你合约本质上都是一个标的，价格应该完全一样的，但有时候买卖价差不同，要么卖价一样，要么买价一样，总会有一些机会，但那些就不是绝对性质的套利了，有一定的概率。&lt;/p&gt;&lt;p&gt;其实这类套利策略，如果高度相关的品种很多，品种的买卖价差又很大，手续费相对波动和价差又很低，就是比较容易做的。比特币虽然手续费高，据说千分之一，但他一天波动10%以上，那还是比手续费高多了，而且交易所也多，另外专业的程序化不多，所以机会很多。&lt;/p&gt;&lt;p&gt;有一些量化交易的人抨击交易比特币是吸粉，对此我不敢苟同。其实嘛，哪怕是美国的emini s&amp;amp;p 500期货刚上市的时候，跟原来的s&amp;amp;p 500期货也有很多套利机会，绝不在现在比特币之下，当时靠套利赚钱的人也很多，为啥就不是吸粉呢？文艺复兴早期的时候也发现了很多明显的套利机会，为啥就不是吸粉呢？其实嘛，既然都是靠交易赚钱，有人在容易赚钱的市场做，有人在难赚钱的市场做。现在就有某些人，自己在难的市场做，又赚不到钱，又不屑于去容易赚钱的市场做，却去抨击在容易赚钱的市场交易的人，这有点莫名其妙。&lt;/p&gt;&lt;p&gt;任何领域，在一开始的时候，竞争都不激烈，获利比较容易，然后随着竞争者逐渐加入，获利就比较难了；这时候，有些人就会主动寻找其它新兴市场，紧跟市场风向；有些人，则墨守成规，死守自己的一亩三分地。当然，不排除深挖一个领域可以变的更牛逼，但人家分散化投资也没错，而且不同市场相关性比较低，综合起来或许成效更显著，&lt;b&gt;毕竟分散化是最简单的提高收益风险比的方法嘛&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;也没必要交易期权就鄙视期货，因为期权非线性的比期货线性的复杂；然后交易期货的就说交易比特币的是吸粉。其实有些人做股票日内回转赚了很多钱，但他们交易商品是亏的，那我可不可以说股票日内回转是吸粉？毕竟期货程序化交易比股票普遍，而且股票现在接口限制多。&lt;/p&gt;&lt;p&gt;反正这年头，赚点小钱不容易，外界舆论对量化也不是那么友好，比如又大佬抨击量化的时候量化内部的人还忙着窝里斗评价谁是吸粉谁不是，还在说开live的好还是不好，谁是高频一线谁不是，没能一致对外。这种情况，每次股灾成为替罪羊不也是活该么。&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-02-14-33814248</guid>
<pubDate>Wed, 14 Feb 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>不同数据推送机制对高频交易的影响</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-02-11-33759393.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/33759393&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;研究高频交易策略首先当然得有高频数据，国内并没有那种真正的分笔数据。&lt;/p&gt;&lt;p&gt;一般CTP免费接到的都是一秒两次的数据，一秒两次不代表500毫秒一次，上期所是严格的按照0、500毫秒报数据，比如这样的：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-20a018e3ba98ea4d922326ffaf218b06_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;717&quot; data-rawheight=&quot;348&quot;&gt;&lt;p&gt;但大商所不是，比如这样的：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-e423b63639c3c48f925809cd9ac32494_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;528&quot; data-rawheight=&quot;356&quot;&gt;&lt;p&gt;可见精确的毫秒数不是固定0、500的，但大概间隔是500毫秒。&lt;/p&gt;&lt;p&gt;有人问这么样对交易有什么影响呢？如果策略是单品种出信号的，或许没什么影响，毕竟都是一个品种的信息过来，然后计算指标之类的；但如果是跨品种的，则会有一定影响。&lt;/p&gt;&lt;p&gt;比如上期所，固定0、500的，不一定每个时间点每个品种都会有行情。例如我们做rb和hc，它们高度相关的，可能09:33:05.000的时候rb有行情，但hc没有，在回测的时候，我们可以沿用hc前面的行情值；但在实盘的时候我们并不知道hc会不会有行情。&lt;/p&gt;&lt;p&gt;当然，实盘接收行情可以选择按照一定顺序推送，比如hc先送，rb后送，那么我们收到rb的行情之后，如果还没收到hc的行情，那么我们就知道此刻hc没有行情；但如果恰好那个时间点，hc有行情，rb没有，就比较麻烦了，因为我们收到hc的时候并不知道rb是没有行情的。&lt;/p&gt;&lt;p&gt;如果不是特别高频的，可以等待一些时间，比如等待一定时间后rb都没有行情，那么我们就确认这个时刻rb没有了。至于等待多少呢？这个要自己根据实际情况估算，一般毫秒级别。&lt;/p&gt;&lt;p&gt;大商所就没有这个问题，因为行情不是整0、500推送的，时间点每个品种不一样，比如我们看看j的情况：&lt;/p&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-13c159213e6e7df4c92948e53e66f9b2_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;557&quot; data-rawheight=&quot;370&quot;&gt;&lt;p&gt;比如在21：17：03，i的毫秒数是384、857，j的毫秒数是407、910，默认都是同一台机器的，可见之间的间隔也有数十毫秒。&lt;/p&gt;&lt;p&gt;如果是做那种跨品种的策略，显然大商所就容易多了，比如j的407毫秒的数据过来的时候，我当然就已经拿到i的384毫秒的数据，当然就可以用i的因子，合并数据也容易，直接按毫秒数合并，完全一样的毫秒数也有，但毕竟情况也不多的。实盘也容易，毕竟也是按照这些顺序来的，偶尔有随机影响。&lt;/p&gt;&lt;p&gt;另外可以注意到21：17：04的时候i有两个行情，分别在381和932，而j只有一个行情，在317，下一个行情是21：17：05.258，如果i在381的时候有大趋势，由于品种之间的lead/lag关系，对j也有一定影响，如果跨品种的信号，那么j在21：17：04.381就可以触发交易，而如果是但品种的信号，则需要等到21:17:05.258，满了差不多一秒，对高频来说，滑点之类的影响就非常非常大了；哪怕381没有趋势，或许932时候有，也领先了几百毫秒。从市场微观结构看，行情发动各品种不可能同时的，肯定有一些时间上的差异，比如几十、几百毫秒，高频很多时候就是赚这些钱，从逻辑上并没有太复杂的地方。&lt;/p&gt;&lt;p&gt;当然，提早太多也不好，一般高频信号衰减是非常快的。有些人回测时发现一个信号发生后5秒价格真的涨了，误以为自己信号很好，提前5秒预判趋势，但实际上这是不对的，因为他买了之后要忍受5秒的浮亏。那种由于市场数据发布机制导致的几十毫秒延迟产生的盈利反而是最靠谱的。&lt;/p&gt;&lt;p&gt;另外还有深度行情，比如大商所的：&lt;/p&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-75d1f4b9b97136edfb55a707789d5d99_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;414&quot; data-rawheight=&quot;336&quot;&gt;&lt;p&gt;这是淘宝买的，只精确到秒，没有精确到毫秒，所以做单品种还行，多品种就无法合并数据了。&lt;/p&gt;&lt;p&gt;有人说可不可以用一档数据估算五档的时间呢？其实是有点难度的，比如这个例子：&lt;/p&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-05a85544fca1753a52d703f4c5a1f598_r.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;355&quot; data-rawheight=&quot;305&quot;&gt;&lt;p&gt;一档数据在13：30：38.139的时候累计成交量是1758918，而五档数据在13:30:37的时候累计成交量是1758928，可见两者的时钟很不一样，很可能交易所就是两个机器来发布行情，机器时钟不一样。&lt;/p&gt;&lt;p&gt;如果是自己接数据，则没有这个问题，同一台机器同时接受两种行情，记录自己的机器时间，不按交易所的时间，甚至几台机器同时接收数据，然后再校准，再弄一套更靠谱一些的数据进行回测研究，那当然投入成本会更大一些。&lt;/p&gt;&lt;p&gt;其实很多高频交易公司做几年了有这些积累当然优势明显，刚入门的只能买淘宝数据慢慢摸索，甚至先从低频一些的日内策略出发，慢慢过渡到高频，有点积累了再加大投入。但有时候，低频策略就不大稳定，老板可能也会不满意。&lt;/p&gt;&lt;p&gt;很多时候也没有这么极端。比如高频策略可以每周创新高，很低频的持仓1、2周的每年创新高，那么偏日内非高频的或许每3个月创新高，对硬件投入也不大。对高频的人来说，习惯了极低回撤的日子，不能忍受这类日内非高频的；对于低频的来说，IT投入不是很大，难以做这类日内的，觉得容量也不大，所以刚入门高频的反而可以从这种爹爹不疼爷爷不爱的策略入手。&lt;/p&gt;&lt;p&gt;其实真正高频的策略反而就是辛苦活，能这么低回撤高回报的肯定不是赚取风险收益，固定成本会投入很大，当老板还行，在里面打工估计生活状态会比较差。&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-02-11-33759393</guid>
<pubDate>Sun, 11 Feb 2018 00:00:00 +0800</pubDate>
</item>
<item>
<title>关于lasso/ridge/pca对过度拟合的比较</title>
<link>https://henix.github.io/feeds/zhuanlan.c_106548378/2018-02-09-33711731.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/33711731&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;骑士金融建模最担心的一点是过度拟合，一般常见的减少过度拟合的方法是正则化，比如lasso/ridge/pca regression等等，现在简单对比一下。&lt;/p&gt;&lt;p&gt;一般统计背景的人喜欢lasso，因为统计研究的问题样本会比较小，比如几十个病人，但银子会比较多，比如几万个基因，那么到底哪个基因导致生病呢？&lt;/p&gt;&lt;p&gt;对于这类参数的数目p远远大于样本的数目n（及p&amp;gt;&amp;gt;n）的高维统计问题，一般来说只能用lasso了，因为其它涉及矩阵求逆运算的无法操作。&lt;/p&gt;&lt;p&gt;在金融里面，或许也会出现这种情况。比如有篇论文就是说，2000只股票，要动态预测下一分钟的价格变化，然后用的因子是过去3分钟每分钟的价格变化，此时因子数是2000*3=6000，样本数是2000，可见就是p&amp;gt;&amp;gt;n了，这时候当然是用lasso的。&lt;/p&gt;&lt;p&gt;lasso这类又叫稀疏性建模（sparsity），因为它会让很多因子的系数变成零，只保留一部分因子，比如几千个变成10-20个。那么，是保留哪些删除哪些呢？其实，最直观的方法，&lt;b&gt;当然是保留系数最大的，&lt;/b&gt;系数小的因子很可能是噪音。&lt;/p&gt;&lt;p&gt;但有些人会说，因子取值的幅度本来就很不一样，比如有的因子是-1到1，有的是-10到10，那么系数肯定会很不一样。因此，在使用lasso之前，有必要对因子的取值幅度进行调整，这样计算出来的系数才具有可比性。&lt;/p&gt;&lt;p&gt;事实上，哪怕大家都是过去1分钟的收益，有的股票波动大，取值就大，系数反而可能更小，这些就需要调整一下。&lt;/p&gt;&lt;p&gt;ridge跟lasso不大一样，&lt;b&gt;它不会删除因子，但是会对因子的取值幅度进行压缩&lt;/b&gt;。如果做主成分分析，会发现它会对每个特征向量进行相同操作的压缩，这样特征值小的特征向量会被压缩得最厉害，比如压缩比例是(d/(d+lambda）,如果d是100，lambda是1，自然没啥变化，从1变成100/101；但如果d是0.5，lambda不变的还是1，那么就变成1/3，自然被压缩得更厉害。因此，其实这类压缩还是要求因子取值幅度最好差不多，这样系数也差不多，压缩起来才更有意义。&lt;/p&gt;&lt;p&gt;其实很多人喜欢ridge，是因为绝大多数情况下其实它跟lasso也差不多，特别是样本数远大于因子数的情况，几千个样本，几十个因子，ridge计算快得多，直接矩阵求逆，简单粗暴，也未必不好。如果是那种精心设计的因子，比如就几十个因子，数值都调整好，偏度、峰度、正态化、去极值等等，而且普遍适用多个品种，在经济学上也有意义，这样用ridge当然是好的，比如很多cross sectional regression，几十个因子，几千只股票，当然是不大需要稀疏化那一套的。&lt;/p&gt;&lt;p&gt;但现在很多公司喜欢大量训练因子，几万、几十万、几百万的因子库，而样本数目往往没有这么多，所以这时候ridge就未必有什么好处。比如另外一个极端简单粗暴的公司，数据驱动，没那么多时间打磨因子，反正买了无数台机器，硬盘空间大，计算设备充足，反正就批量自动化产生这些因子，不同数据套差不多的公式，然后简单的相关性过滤，比如跟目标变量的相关性大于3%（日线），但跟已有因子的相关性小于70%等，这样就可以进入因子库，然后再直接一个lasso类型的模型去筛选。&lt;/p&gt;&lt;p&gt;所以说，lasso选出来的一般都是短期有效的因子，这么简单粗暴弄出来的，很难长期稳定有效，但反正因子数量庞大，任何时候总有合适的；ridge的话，本来备选因子库就不会很大，所以因子质量首先就需要高一些，比如较长期稳定的，然后只是适当弱化，使之更适应最近的行情而已。&lt;/p&gt;&lt;p&gt;最后就是主成分回归，其实本质上也是为了防止过度拟合。比如主成分的最大数量就是特征值的数量，一般也就是因子的个数。跟ridge不同的地方在于，它并不是对小的特征值进行收缩，而是对小的特征值直接去掉不要了。因此，&lt;b&gt;它既有ridge关于主成分的特点，又有lasso稀疏化的成分。&lt;/b&gt;比如很多人认为lasso的各个因子多多少少存在相关性，这在因子设计中很难避免；但提取主成分就不同了，每个特征向量都是垂直的，这就避免了因子之间的相关性，或许在预测中也更有优势。&lt;/p&gt;&lt;p&gt;其实也可以主成分跟lasso相结合的，比如主成分产生了一系列因子，本质上就是原本因子的线性组合；如果原本因子取值幅度差不多，其实产生的这些主成分，哪怕幅度不同，也可以进行一定的压缩，使之幅度差不多，但方向不变，所以还是垂直的。&lt;b&gt;然后就可以用这些主成分进行回归，再套用lasso把系数取值小的删掉&lt;/b&gt;，或许效果会更好，因为这进一步降低了对因子质量的要求。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>babyquant</author>
<guid isPermaLink="false">2018-02-09-33711731</guid>
<pubDate>Fri, 09 Feb 2018 00:00:00 +0800</pubDate>
</item>
</channel>
</rss>
